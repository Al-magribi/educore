import{b9 as e,T as a,F as s,db as n,j as t,S as i,A as r,h as l,B as c,s as o,a as d,dc as m,d as j,f as h,C as u,g as x,b as y,ac as p}from"./index-Bv8LfhQL.js";import{H as f,b as k}from"./vendor-BhwIo2T6.js";import{M as g}from"./index-yRGjkVEl.js";import{B as b}from"./book-open-BT-oL9t5.js";import{U as _}from"./user-round-Bu3epCO2.js";import{T as w}from"./timer-B2jYVAsz.js";import{E as S}from"./index-B3z_uEJa.js";import{C as z}from"./clipboard-list-C7iD63zr.js";import{G as v}from"./graduation-cap-DuEmM5_I.js";import"./ActionButton-D8LEv3q3.js";const M=e("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),C=e("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),{Text:T}=a,U=e=>"pelanggaran"===e?{type:"error",title:"Status: Pelanggaran"}:"mengerjakan"===e?{type:"warning",title:"Status: Mengerjakan"}:"selesai"===e?{type:"info",title:"Status: Selesai"}:null,A=({open:e,onClose:a,exam:d})=>{const[m]=s.useForm(),j=f(),[h,{isLoading:u}]=n(),[x,y]=k.useState(null);k.useEffect(()=>{e&&(m.resetFields(),y(null))},[e,m]);return t.jsx(g,{title:t.jsxs(i,{align:"center",size:8,children:[t.jsx(C,{size:18}),t.jsx("span",{children:"Masukkan Token Ujian"})]}),open:e,onCancel:a,footer:null,centered:!0,destroyOnHidden:!0,children:t.jsxs(i,{vertical:!0,size:12,style:{width:"100%"},children:[t.jsx(T,{type:"secondary",children:d?.name?`Ujian: ${d.name}`:"Pastikan token sesuai jadwal."}),x&&U(x.status)&&t.jsx(r,{type:U(x.status).type,title:U(x.status).title,description:x.message,showIcon:!0}),t.jsxs(s,{form:m,layout:"vertical",onFinish:async e=>{try{y(null),await h({exam_id:d?.id,token:e.token?.trim()}).unwrap(),o.success("Token valid. Selamat mengerjakan ujian."),j(`/computer-based-test/start?exam_id=${d?.id}&exam_name=${d?.name?.replaceAll(" ","-")}`),a()}catch(s){const e=s?.data?.status||null,a=s?.data?.message||"Token ujian tidak valid";e?y({status:e,message:a}):o.error(a)}},children:[t.jsx(s.Item,{label:"Token Ujian",name:"token",rules:[{required:!0,message:"Token ujian wajib diisi"}],children:t.jsx(l,{placeholder:"Masukkan token ujian"})}),t.jsx(T,{type:"secondary",style:{fontSize:12},children:"Status ujian: Belum Masuk = belum mengikuti, Pelanggaran = keluar dari halaman ujian, Mengerjakan = masih berlangsung, Selesai = sudah menjawab semua soal."}),t.jsxs(i,{style:{width:"100%",justifyContent:"flex-end"},children:[t.jsx(c,{onClick:a,children:"Batal"}),t.jsx(c,{type:"primary",htmlType:"submit",loading:u,children:"Verifikasi"})]})]})]})})},{Title:B,Text:D}=a,I=e=>{if(!e)return"-";const a=new Date(e);return Number.isNaN(a.getTime())?"-":a.toLocaleString("id-ID")},q=()=>{const e=d.c(36),{data:a,isLoading:s,isError:n}=m(),[r,l]=k.useState(null),[o,f]=k.useState(!1),g=a?.length||0;let C;a?.reduce(E,0),e[0]!==a?(C=new Set((a||[]).map(F).filter(Boolean)),e[0]=a,e[1]=C):C=e[1];const T=C.size,U=a?.[0]?.class_name||"Kelas belum tersedia";if(s){let a;return e[2]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(y,{title:"Jadwal Ujian",children:t.jsx(j,{children:t.jsx(p,{active:!0,paragraph:{rows:6}})})}),e[2]=a):a=e[2],a}if(n){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(y,{title:"Jadwal Ujian",children:t.jsx(j,{children:t.jsx(D,{type:"danger",children:"Gagal memuat jadwal ujian."})})}),e[3]=a):a=e[3],a}let q;e[4]===Symbol.for("react.memo_cache_sentinel")?(q=e=>{l(e),f(!0)},e[4]=q):q=e[4];const J=q;let N;e[5]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{f(!1),l(null)},e[5]=N):N=e[5];const H=N;let L,P,R,V,$,G,O,K,Q,W,X,Y,Z,ee,ae,se,ne;return e[6]===Symbol.for("react.memo_cache_sentinel")?(L={width:"100%"},e[6]=L):L=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(P={width:"100%"},e[7]=P):P=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("div",{style:{width:44,height:44,borderRadius:12,background:"#eef2ff",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(z,{size:20,color:"#4f46e5"})}),e[8]=R):R=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsxs(i,{align:"center",size:12,children:[R,t.jsxs("div",{children:[t.jsx(B,{level:4,style:{margin:0},children:"Jadwal Ujian"}),t.jsx(D,{type:"secondary",children:"Daftar ujian aktif sesuai kelas Anda"})]})]}),e[9]=V):V=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(v,{size:12}),e[10]=$):$=e[10],e[11]!==U?(G=t.jsx(x,{color:"blue",icon:$,children:U}),e[11]=U,e[12]=G):G=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(b,{size:12}),e[13]=O):O=e[13],e[14]!==T?(K=t.jsxs(x,{color:"geekblue",icon:O,children:[T," Mapel"]}),e[14]=T,e[15]=K):K=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(M,{size:12}),e[16]=Q):Q=e[16],e[17]!==g?(W=t.jsxs(x,{color:"purple",icon:Q,children:[g," Ujian Aktif"]}),e[17]=g,e[18]=W):W=e[18],e[19]!==K||e[20]!==W||e[21]!==G?(X=t.jsx(j,{hoverable:!0,children:t.jsxs(i,{vertical:!0,size:10,style:P,children:[V,t.jsxs(i,{wrap:!0,size:8,children:[G,K,W]})]})}),e[19]=K,e[20]=W,e[21]=G,e[22]=X):X=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsxs(i,{align:"center",size:8,children:[t.jsx(z,{size:18,color:"#1d4ed8"}),t.jsx("span",{children:"Daftar Ujian"})]}),Z={borderRadius:16},e[23]=Y,e[24]=Z):(Y=e[23],Z=e[24]),e[25]!==a?(ee=t.jsx(j,{title:Y,style:Z,children:a?.length?t.jsx(h,{gutter:[16,16],children:a.map(e=>t.jsx(u,{xs:24,md:12,xl:8,children:t.jsx(j,{hoverable:!0,children:t.jsxs(i,{vertical:!0,size:10,style:{width:"100%"},children:[t.jsxs(i,{align:"center",size:8,children:[t.jsx(D,{strong:!0,children:e.name}),t.jsx(x,{color:"green",children:"Aktif"})]}),t.jsxs(i,{size:12,wrap:!0,children:[t.jsxs(D,{type:"secondary",children:[t.jsx(b,{size:14})," ",e.subject_name||"-"]}),t.jsxs(D,{type:"secondary",children:[t.jsx(_,{size:14})," ",e.teacher_name||"-"]}),t.jsxs(D,{type:"secondary",children:[t.jsx(w,{size:14})," ",e.duration_minutes," menit"]})]}),t.jsxs(D,{type:"secondary",children:[t.jsx(M,{size:14})," Dibuat:"," ",I(e.created_at)]}),t.jsxs(i,{align:"center",style:{justifyContent:"space-between",width:"100%"},children:[t.jsx(x,{color:"blue",children:e.bank_type||"Ujian"}),t.jsx(c,{type:"primary",onClick:()=>J(e),children:"Ikuti Ujian"})]})]})})},e.id))}):t.jsx(S,{description:"Belum ada jadwal ujian untuk kelas Anda."})}),e[25]=a,e[26]=ee):ee=e[26],e[27]!==X||e[28]!==ee?(ae=t.jsxs(i,{vertical:!0,size:20,style:L,children:[X,ee]}),e[27]=X,e[28]=ee,e[29]=ae):ae=e[29],e[30]!==r||e[31]!==o?(se=t.jsx(A,{open:o,onClose:H,exam:r}),e[30]=r,e[31]=o,e[32]=se):se=e[32],e[33]!==ae||e[34]!==se?(ne=t.jsxs(y,{title:"Jadwal Ujian",children:[ae,se]}),e[33]=ae,e[34]=se,e[35]=ne):ne=e[35],ne};function E(e,a){return e+Number(a.duration_minutes||0)}function F(e){return e.subject_name}export{q as default};
