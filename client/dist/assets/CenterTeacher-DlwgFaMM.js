import{I as e,k as a,F as s,L as n,Z as t,_ as i,o as r,C as l,y as o,p as c,x as m,R as d,q as h,D as u,z as x,T as p,$ as j,a0 as f,s as y,A as b,Y as g,N as _,B as S,O as k,Q as v,S as w,w as I}from"./index-IfHJv5WL.js";import{r as C}from"./vendor-kOq7Q5-U.js";import{I as P}from"./InfiniteScrollList-Chj7-TfW.js";import{a as T}from"./index-CPaPbrqg.js";import{R as N}from"./PhoneOutlined-DIZ3kFQ0.js";import{S as z}from"./index-CZjB1WBU.js";import{M as B}from"./index-CQKi3m8Y.js";import{D as O}from"./index-C5Y2dds-.js";import{u as D}from"./useDebounced-CaaHS48V.js";import{T as F}from"./index-BM57nN4D.js";import{P as L}from"./index-BodHHeJo.js";import{R as M}from"./DeleteOutlined-BgrfJ2kJ.js";import"./charts-DyIopC3t.js";import"./index-BSxM1sbQ.js";import"./ActionButton-CwPtgC52.js";var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};function G(){return G=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},G.apply(this,arguments)}const H=(a,s)=>C.createElement(e,G({},a,{ref:s,icon:A})),E=C.forwardRef(H),{Option:q}=T,V=e=>{const p=a.c(58),{open:j,onCancel:f,onSuccess:y,initialData:b}=e,[g]=s.useForm();let _;p[0]===Symbol.for("react.memo_cache_sentinel")?(_={page:1,limit:100},p[0]=_):_=p[0];const{data:S,isLoading:k}=n(_),[v,w]=t(),{isLoading:I}=w,[P,D]=i(),{isLoading:F}=D;let L,M,A;p[1]!==g||p[2]!==b||p[3]!==j?(L=()=>{j&&(b?g.setFieldsValue({...b,password:"",homebase_id:b.homebase_id||void 0}):g.resetFields())},M=[j,b,g],p[1]=g,p[2]=b,p[3]=j,p[4]=L,p[5]=M):(L=p[4],M=p[5]),C.useEffect(L,M),p[6]!==v||p[7]!==g||p[8]!==b||p[9]!==y||p[10]!==P?(A=async e=>{try{b?(await P({id:b.id,...e}).unwrap(),u.success("Data guru diperbarui")):(await v(e).unwrap(),u.success("Guru berhasil ditambahkan")),g.resetFields(),y()}catch(a){const e=a;u.error(e?.data?.message||"Terjadi kesalahan")}},p[6]=v,p[7]=g,p[8]=b,p[9]=y,p[10]=P,p[11]=A):A=p[11];const G=A,H=b?"Edit Data Guru":"Tambah Guru Baru",E=I||F;let q,V,W,K;p[12]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx(O,{orientation:"left",style:{margin:"0 0 16px 0"},children:"Informasi Akun"}),p[12]=q):q=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(V=[{required:!0,message:"Nama wajib diisi"}],p[13]=V):V=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(W=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"full_name",label:"Nama Lengkap (dengan gelar)",rules:V,children:r.jsx(o,{placeholder:"Contoh: Budi Santoso, S.Pd.",prefix:r.jsx(c,{})})})}),p[14]=W):W=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(K=[{required:!0,message:"Username wajib diisi"}],p[15]=K):K=p[15];const U=!!b;let Y;p[16]!==U?(Y=r.jsxs(m,{gutter:16,children:[W,r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"username",label:"Username Login",rules:K,children:r.jsx(o,{placeholder:"Username unik",disabled:U})})})]}),p[16]=U,p[17]=Y):Y=p[17];const Q=b?"Password Baru (Opsional)":"Password",Z=!b;let $,J,X,ee;p[18]!==Z?($={required:Z,message:"Password wajib diisi"},p[18]=Z,p[19]=$):$=p[19],p[20]===Symbol.for("react.memo_cache_sentinel")?(J={min:6,message:"Minimal 6 karakter"},p[20]=J):J=p[20],p[21]!==$?(X=[$,J],p[21]=$,p[22]=X):X=p[22],p[23]===Symbol.for("react.memo_cache_sentinel")?(ee=r.jsx(x,{}),p[23]=ee):ee=p[23];const ae=b?"Biarkan kosong jika tidak diubah":"Password akun";let se,ne,te,ie,re,le,oe,ce,me,de,he,ue,xe;return p[24]!==ae?(se=r.jsx(o.Password,{prefix:ee,placeholder:ae}),p[24]=ae,p[25]=se):se=p[25],p[26]!==Q||p[27]!==X||p[28]!==se?(ne=r.jsx(s.Item,{name:"password",label:Q,rules:X,children:se}),p[26]=Q,p[27]=X,p[28]=se,p[29]=ne):ne=p[29],p[30]===Symbol.for("react.memo_cache_sentinel")?(te=r.jsx(O,{orientation:"left",style:{margin:"10px 0 16px 0"},children:"Data Kepegawaian"}),p[30]=te):te=p[30],p[31]===Symbol.for("react.memo_cache_sentinel")?(ie=[{required:!0,message:"Guru wajib memiliki Homebase"}],p[31]=ie):ie=p[31],p[32]!==S?.data?(re=S?.data?.map(R),p[32]=S?.data,p[33]=re):re=p[33],p[34]!==k||p[35]!==re?(le=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"homebase_id",label:"Penempatan (Homebase)",rules:ie,children:r.jsx(T,{placeholder:"Pilih Satuan Pendidikan",loading:k,showSearch:!0,optionFilterProp:"children",children:re})})}),p[34]=k,p[35]=re,p[36]=le):le=p[36],p[37]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"nip",label:"NIP / NIY",children:r.jsx(o,{placeholder:"Nomor Induk",prefix:r.jsx(d,{})})})}),p[37]=oe):oe=p[37],p[38]!==le?(ce=r.jsxs(m,{gutter:16,children:[le,oe]}),p[38]=le,p[39]=ce):ce=p[39],p[40]===Symbol.for("react.memo_cache_sentinel")?(me=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"phone",label:"No. Telepon / WhatsApp",children:r.jsx(o,{placeholder:"08xxx",prefix:r.jsx(N,{})})})}),p[40]=me):me=p[40],p[41]===Symbol.for("react.memo_cache_sentinel")?(de=r.jsxs(m,{gutter:16,children:[me,r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"email",label:"Email",children:r.jsx(o,{type:"email",placeholder:"email@sekolah.sch.id",prefix:r.jsx(h,{})})})})]}),p[41]=de):de=p[41],p[42]!==b?(he=b&&r.jsx(s.Item,{name:"is_active",label:"Status Akun",valuePropName:"checked",children:r.jsx(z,{checkedChildren:"Aktif",unCheckedChildren:"Nonaktif"})}),p[42]=b,p[43]=he):he=p[43],p[44]!==g||p[45]!==G||p[46]!==Y||p[47]!==ne||p[48]!==ce||p[49]!==he?(ue=r.jsxs(s,{form:g,layout:"vertical",onFinish:G,children:[q,Y,ne,te,ce,de,he]}),p[44]=g,p[45]=G,p[46]=Y,p[47]=ne,p[48]=ce,p[49]=he,p[50]=ue):ue=p[50],p[51]!==g.submit||p[52]!==f||p[53]!==j||p[54]!==ue||p[55]!==H||p[56]!==E?(xe=r.jsx(B,{title:H,open:j,onCancel:f,onOk:g.submit,confirmLoading:E,destroyOnHidden:!0,width:700,children:ue}),p[51]=g.submit,p[52]=f,p[53]=j,p[54]=ue,p[55]=H,p[56]=E,p[57]=xe):xe=p[57],xe};function R(e){return r.jsx(q,{value:e.id,children:e.name},e.id)}const{Title:W,Text:K}=p,U=()=>{const e=a.c(42),[s,n]=C.useState(1),[t,i]=C.useState("");let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[m,d]=C.useState(l),[h,x]=C.useState(!1),[p,I]=C.useState(null),T=D(t,500);let N;e[1]!==T||e[2]!==s?(N={page:s,limit:16,search:T},e[1]=T,e[2]=s,e[3]=N):N=e[3];const{data:z,isFetching:B,refetch:O}=j(N),[A,G]=f(),{isLoading:H}=G;let q,R,U,Q,Z;e[4]!==z||e[5]!==s?(q=()=>{z?.data&&d(1===s?z.data:e=>{const a=z.data.filter(a=>!e.some(e=>e.id===a.id));return[...e,...a]})},R=[z,s],e[4]=z,e[5]=s,e[6]=q,e[7]=R):(q=e[6],R=e[7]),C.useEffect(q,R),e[8]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{n(1)},e[8]=U):U=e[8],e[9]!==t?(Q=[t],e[9]=t,e[10]=Q):Q=e[10],C.useEffect(U,Q),e[11]!==z?.hasMore||e[12]!==B?(Z=()=>{z?.hasMore&&!B&&n(Y)},e[11]=z?.hasMore,e[12]=B,e[13]=Z):Z=e[13];const $=Z;let J;e[14]===Symbol.for("react.memo_cache_sentinel")?(J=e=>{I(void 0===e?null:e),x(!0)},e[14]=J):J=e[14];const X=J;let ee;e[15]!==A||e[16]!==O?(ee=async e=>{try{await A(e).unwrap(),u.success("Guru berhasil dihapus"),n(1),O()}catch(a){u.error("Gagal menghapus data")}},e[15]=A,e[16]=O,e[17]=ee):ee=e[17];const ae=ee;let se;e[18]!==O?(se=()=>{x(!1),I(null),n(1),O()},e[18]=O,e[19]=se):se=e[19];const ne=se;let te;e[20]!==ae||e[21]!==H?(te=e=>r.jsx(y,{hoverable:!0,style:{height:"100%"},bodyStyle:{padding:"16px"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{display:"flex",gap:12,flex:1,minWidth:0},children:[r.jsx(b,{size:48,src:e.img_url,icon:r.jsx(c,{}),shape:"circle",style:{backgroundColor:"#87d068",flexShrink:0}}),r.jsxs("div",{style:{minWidth:0,flex:1},children:[r.jsx(W,{level:5,style:{margin:0,fontSize:15},ellipsis:!0,children:e.full_name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:2},children:[r.jsxs(K,{type:"secondary",style:{fontSize:12},children:["@",e.username]}),r.jsx("span",{style:{color:"#ddd"},children:"|"}),r.jsx(K,{type:"secondary",style:{fontSize:12},children:e.nip||"Non-NIP"})]}),r.jsxs("div",{style:{marginTop:8},children:[r.jsx(F,{icon:r.jsx(E,{}),color:"cyan",style:{marginBottom:4},children:e.homebase_name||"Belum ada Homebase"}),r.jsx(F,{color:e.is_active?"success":"error",children:e.is_active?"AKTIF":"NONAKTIF"})]}),r.jsxs(K,{type:"secondary",style:{fontSize:11,display:"block",marginTop:4,color:"#aaa"},children:[e.email||"—"," • ",e.phone||"—"]})]})]}),r.jsxs(g,{direction:"vertical",size:0,children:[r.jsx(_,{title:"Edit",children:r.jsx(S,{type:"text",size:"small",icon:r.jsx(k,{style:{color:"orange"}}),onClick:()=>X(e)})}),r.jsx(L,{title:"Hapus Guru?",description:"Data mengajar, nilai, dan absensi terkait mungkin akan hilang.",onConfirm:()=>ae(e.id),okText:"Ya, Hapus",cancelText:"Batal",children:r.jsx(S,{type:"text",size:"small",danger:!0,icon:r.jsx(M,{}),loading:H})})]})]})}),e[20]=ae,e[21]=H,e[22]=te):te=e[22];const ie=te;let re,le,oe,ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(re={display:"flex",justifyContent:"space-between",marginBottom:16,gap:10},e[23]=re):re=e[23],e[24]===Symbol.for("react.memo_cache_sentinel")?(le=r.jsx(v,{}),e[24]=le):le=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsx(o,{placeholder:"Cari nama atau NIP...",prefix:le,allowClear:!0,onChange:e=>i(e.target.value),style:{maxWidth:300}}),e[25]=oe):oe=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsxs("div",{style:re,children:[oe,r.jsx(S,{type:"primary",icon:r.jsx(w,{}),onClick:()=>X(null),children:"Tambah Guru"})]}),e[26]=ce):ce=e[26];const me=z?.hasMore;let de,he,ue,xe,pe;return e[27]===Symbol.for("react.memo_cache_sentinel")?(de={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:6,xxl:6},e[27]=de):de=e[27],e[28]!==$||e[29]!==B||e[30]!==m||e[31]!==ie||e[32]!==me?(he=r.jsx(P,{data:m,loading:B,hasMore:me,onLoadMore:$,renderItem:ie,height:"75vh",emptyText:"Belum ada data guru",grid:de}),e[28]=$,e[29]=B,e[30]=m,e[31]=ie,e[32]=me,e[33]=he):he=e[33],e[34]===Symbol.for("react.memo_cache_sentinel")?(ue=()=>x(!1),e[34]=ue):ue=e[34],e[35]!==p||e[36]!==ne||e[37]!==h?(xe=r.jsx(V,{open:h,initialData:p,onCancel:ue,onSuccess:ne}),e[35]=p,e[36]=ne,e[37]=h,e[38]=xe):xe=e[38],e[39]!==he||e[40]!==xe?(pe=r.jsxs(r.Fragment,{children:[ce,he,xe]}),e[39]=he,e[40]=xe,e[41]=pe):pe=e[41],pe};function Y(e){return e+1}const Q=()=>{const e=a.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(I,{title:"Manajement Guru",children:r.jsx(U,{})}),e[0]=s):s=e[0],s};export{Q as default};
