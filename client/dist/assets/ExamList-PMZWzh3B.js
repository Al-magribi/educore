import{b9 as e,T as a,F as t,ba as s,c4 as n,bq as i,bv as l,cC as r,cD as o,cE as c,j as d,A as m,h,S as u,bC as x,B as p,s as y,a as j,cF as g,cG as f,cH as w,cI as b,g as _,d as S,az as k,cJ as v,aO as z,cK as P,cL as T,L as C,cM as B,cN as M,o as N,G as A,b as I}from"./index-CVvYH8o1.js";import{b as $,T as J,H as L}from"./vendor-BhwIo2T6.js";import{I as R}from"./InfiniteScrollList-9flDvJTp.js";import{a as F}from"./index-CAcyGMA9.js";import{U}from"./user-Dd1wDQF8.js";import{B as q}from"./book-open-BVapI3nD.js";import{T as D}from"./index-DEE68b5B.js";import{T as G}from"./timer-CKHstkcl.js";import{U as E}from"./users-Cc0wWcq2.js";import{S as K}from"./index-Bs_ywDJM.js";import{M as W}from"./index-DOzjnNTE.js";import{B as V}from"./index-CpCHorwg.js";import{U as H}from"./user-check-B7lEkRzF.js";import{C as O,D as X,F as Y}from"./folder-DWxzSxJN.js";import{A as Q}from"./arrow-left-Dk56Q-AA.js";import{u as Z,w as ee,S as ae}from"./xlsx-DhyWvxig.js";import{F as te}from"./Table-C723PDe_.js";import{C as se}from"./clipboard-list-Ca9tCKkC.js";import{P as ne}from"./index-C0MTcrq3.js";import{T as ie,S as le,P as re}from"./trash-2-BbE_66uF.js";import"./index-N53jIs86.js";import"./ActionButton-BSwwgC9k.js";import"./index-CW8TUlvU.js";const oe=e("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ce=e("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),de=e("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),me=e("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),he=e("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),ue=e("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),xe=e("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),{Text:pe}=a,ye=({initialValues:e,onClose:a,onSuccess:j})=>{const[g]=t.useForm(),{user:f}=s(e=>e.auth),w="admin"===f?.role,b=t.useWatch("grade_id",g),_=t.useWatch("class_ids",g),S=t.useWatch("teacher_id",g),k=w?S:f?.id,{data:v,isLoading:z}=n(void 0,{skip:!w}),{data:P,isLoading:T}=i(),{data:C,isLoading:B}=l({gradeId:b},{skip:!b}),{data:M,isLoading:N}=r({teacher_id:k},{skip:!k}),[A,{isLoading:I}]=o(),[J,{isLoading:L}]=c(),R=!!e,W=I||L,V=$.useRef(null),H=$.useMemo(()=>(C||[]).map(e=>({label:e.name,value:e.id})),[C]);$.useEffect(()=>{w?S||R||g.setFieldValue("teacher_id",null):g.setFieldValue("teacher_id",f?.id||null)},[w,S,f,g,R]),$.useEffect(()=>{b&&H.length&&(_&&0!==_.length||g.setFieldValue("class_ids",H.map(e=>e.value)))},[b,H,_,g]),$.useEffect(()=>{R&&e?g.setFieldsValue({...e,class_ids:e.classes?.map(e=>e.id)||[]}):(g.resetFields(),w||g.setFieldValue("teacher_id",f?.id||null))},[e,g,R,w,f]),$.useEffect(()=>{w&&k&&(V.current&&V.current!==k&&g.setFieldValue("bank_id",null),V.current=k)},[k,w,g]);return d.jsxs(t,{form:g,layout:"vertical",onFinish:async a=>{try{const t={...a,class_ids:a.class_ids||[]};R?await J({id:e.id,...t}).unwrap():await A(t).unwrap(),g.resetFields(),j&&j()}catch(t){y.error(t?.data?.message||"Terjadi kesalahan sistem")}},initialValues:{is_active:!0,is_shuffle:!1},children:[!R&&d.jsx(m,{title:w?"Mode Admin":`Guru: ${f?.full_name}`,description:w?"Pilih guru terlebih dahulu. Bank soal dan jadwal akan mengikuti guru tersebut.":"Guru otomatis terpilih sesuai akun Anda.",type:"info",showIcon:!0,style:{marginBottom:16}}),w&&d.jsx(t.Item,{label:"Guru",name:"teacher_id",rules:[{required:!0,message:"Admin wajib memilih guru"}],children:d.jsx(F,{placeholder:"Cari nama guru",loading:z,showSearch:{optionFilterProp:["label"]},allowClear:!0,suffixIcon:d.jsx(U,{size:14}),virtual:!1,children:v?.map(e=>d.jsx(F.Option,{value:e.id,label:e.full_name,children:e.full_name},e.id))})}),d.jsx(t.Item,{label:"Bank Soal",name:"bank_id",rules:[{required:!0,message:"Pilih bank soal"}],children:d.jsx(F,{placeholder:k?"Pilih bank soal":"Pilih guru terlebih dahulu",loading:N,showSearch:{optionFilterProp:["label"]},disabled:!k,suffixIcon:d.jsx(q,{size:14}),options:(M||[]).map(e=>({label:`${e.title} (${e.subject_name||"Mapel Umum"})`,value:e.id})),virtual:!1})}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.4fr 0.6fr",gap:12},children:[d.jsx(t.Item,{label:"Nama Jadwal Ujian",name:"name",rules:[{required:!0,message:"Nama jadwal wajib diisi"}],children:d.jsx(h,{placeholder:"Contoh: PTS Matematika Kelas X"})}),d.jsx(t.Item,{label:"Durasi (Menit)",name:"duration_minutes",rules:[{required:!0,message:"Durasi wajib diisi"}],children:d.jsx(D,{min:10,style:{width:"100%"},placeholder:"90",prefix:d.jsx(G,{size:14})})})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[d.jsx(t.Item,{label:"Grade",name:"grade_id",rules:[{required:!0,message:"Pilih grade"}],children:d.jsx(F,{placeholder:"Pilih grade",loading:T,showSearch:!0,onChange:()=>g.setFieldValue("class_ids",[]),virtual:!1,children:P?.map(e=>d.jsx(F.Option,{value:e.id,children:e.name},e.id))})}),d.jsx(t.Item,{label:d.jsxs(u,{size:6,align:"center",children:[d.jsx(E,{size:14}),d.jsx("span",{children:"Kelas"})]}),name:"class_ids",rules:[{required:!0,message:"Pilih minimal 1 kelas"}],children:d.jsx(F,{mode:"multiple",placeholder:b?"Pilih kelas":"Pilih grade dahulu",loading:B,options:H,disabled:!b,maxTagCount:"responsive",allowClear:!0,showSearch:{optionFilterProp:["label"]},virtual:!1})})]}),d.jsxs(x,{justify:"space-between",align:"center",style:{marginTop:-8,marginBottom:12},children:[d.jsx(p,{size:"small",onClick:()=>{0!==H.length&&g.setFieldValue("class_ids",H.map(e=>e.value))},children:"Pilih Semua Kelas"}),d.jsx(pe,{type:"secondary",style:{fontSize:12},children:"Jika hanya pilih grade, semua kelas di grade tersebut otomatis dipilih."})]}),d.jsxs("div",{style:{display:"flex",gap:16,marginBottom:16},children:[d.jsx(t.Item,{label:"Status Aktif",name:"is_active",valuePropName:"checked",style:{marginBottom:0},children:d.jsx(K,{})}),d.jsx(t.Item,{label:"Acak Soal",name:"is_shuffle",valuePropName:"checked",style:{marginBottom:0},children:d.jsx(K,{})})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16,paddingTop:12,borderTop:"1px solid #f0f0f0"},children:[d.jsx(p,{onClick:a,disabled:W,children:"Batal"}),d.jsx(p,{type:"primary",htmlType:"submit",loading:W,children:R?"Simpan Perubahan":"Buat Jadwal"})]})]})},{Text:je}=a,ge=e=>{const a=j.c(75),{data:t,examId:s}=e,[n,i]=$.useState(5);let l;a[0]!==s?(l={exam_id:s},a[0]=s,a[1]=l):l=a[1];const r=!s,o=60*n*1e3;let c;a[2]!==r||a[3]!==o?(c={skip:r,pollingInterval:o},a[2]=r,a[3]=o,a[4]=c):c=a[4],g(l,c);const[m,k]=f(),{isLoading:v}=k,[z,P]=w(),{isLoading:T}=P,[C,B]=b(),{isLoading:M}=B,[N,A]=J();let I;a[5]!==N?(I=N.get("exam_name"),a[5]=N,a[6]=I):I=a[6];const L=I,[U,q]=$.useState("all"),[D,G]=$.useState(""),[E,K]=$.useState("all");let X;if(a[7]!==t){X=Array.from(new Set(t.map(fe).filter(Boolean))).map(we),a[7]=t,a[8]=X}else X=a[8];const Y=X;let Q;if(a[9]!==E||a[10]!==t||a[11]!==D||a[12]!==U){let e;a[14]!==E||a[15]!==D||a[16]!==U?(e=e=>{const a="all"===U||e.status===U,t="all"===E||e.className===E,s=`${e.nis} ${e.name} ${e.className}`.toLowerCase().includes(D.toLowerCase());return a&&t&&s},a[14]=E,a[15]=D,a[16]=U,a[17]=e):e=a[17],Q=t.filter(e),a[9]=E,a[10]=t,a[11]=D,a[12]=U,a[13]=Q}else Q=a[13];const Z=Q,ee=be,ae=_e;let te;a[18]!==s||a[19]!==L||a[20]!==A?(te=e=>{A({view:"student_answers",exam_id:s,exam_name:L,student_name:(e.name||"").replaceAll(" ","-"),student_id:e.id,student_class:(e.className||"").replaceAll(" ","-"),student_nis:e.nis||""})},a[18]=s,a[19]=L,a[20]=A,a[21]=te):te=a[21];const se=te;let ne;a[22]!==m||a[23]!==s?(ne=e=>{W.confirm({title:"Izinkan Siswa?",content:"Siswa akan diizinkan masuk kembali tanpa mengubah waktu ujian.",okText:"Izinkan",cancelText:"Batal",onOk:async()=>{try{await m({exam_id:s,student_id:e.id}).unwrap(),y.success("Siswa diizinkan masuk ujian")}catch(a){const e=a;y.error(e?.data?.message||"Gagal mengizinkan siswa")}}})},a[22]=m,a[23]=s,a[24]=ne):ne=a[24];const ie=ne;let le;a[25]!==s||a[26]!==z?(le=e=>{W.confirm({title:"Ulangi Ujian Siswa?",content:"Log ujian dan semua jawaban siswa akan dihapus untuk ujian ini.",okText:"Ulangi",okButtonProps:{danger:!0},cancelText:"Batal",onOk:async()=>{try{await z({exam_id:s,student_id:e.id}).unwrap(),y.success("Ujian siswa diulang")}catch(a){const e=a;y.error(e?.data?.message||"Gagal mengulang ujian")}}})},a[25]=s,a[26]=z,a[27]=le):le=a[27];const re=le;let oe;a[28]!==s||a[29]!==C?(oe=e=>{W.confirm({title:"Selesaikan Ujian Siswa?",content:"Status ujian siswa akan diubah menjadi selesai.",okText:"Selesaikan",okButtonProps:{danger:!0},cancelText:"Batal",onOk:async()=>{try{await C({exam_id:s,student_id:e.id}).unwrap(),y.success("Ujian siswa diselesaikan")}catch(a){const e=a;y.error(e?.data?.message||"Gagal menyelesaikan ujian")}}})},a[28]=s,a[29]=C,a[30]=oe):oe=a[30];const ue=oe;let pe;a[31]!==v||a[32]!==ie||a[33]!==ue||a[34]!==re||a[35]!==M||a[36]!==se||a[37]!==T?(pe=e=>{const a=ae(e.status);return d.jsx(V.Ribbon,{text:ee(e.status).text,color:ee(e.status).color,children:d.jsxs(S,{hoverable:!0,size:"small",style:{borderRadius:14,height:"100%"},styles:{body:{display:"flex",flexDirection:"column",gap:12}},title:d.jsxs(je,{type:"secondary",children:["NIS ",e.nis]}),children:[d.jsxs("div",{children:[d.jsx(je,{strong:!0,style:{fontSize:15},children:e.name}),d.jsx("div",{style:{color:"#667085",fontSize:12},children:e.className})]}),d.jsxs(x,{wrap:"wrap",gap:12,children:[d.jsxs(u,{size:6,children:[d.jsx(de,{size:14}),d.jsx(je,{children:e.ip})]}),d.jsxs(u,{size:6,children:[d.jsx(me,{size:14}),d.jsx(je,{children:e.browser})]}),d.jsxs(je,{type:"secondary",children:["Mulai: ",e.startAt]})]}),d.jsxs(x,{wrap:"wrap",gap:8,children:[d.jsx(p,{size:"small",icon:d.jsx(ce,{size:14}),disabled:a.jawaban,onClick:()=>se(e),children:"Jawaban"}),d.jsx(p,{size:"small",icon:d.jsx(H,{size:14}),disabled:a.izinkan||v,onClick:()=>ie(e),children:"Izinkan"}),d.jsx(p,{size:"small",icon:d.jsx(he,{size:14}),disabled:a.ulangi||T,onClick:()=>re(e),children:"Ulangi"}),d.jsx(p,{size:"small",danger:!0,icon:d.jsx(xe,{size:14}),disabled:a.selesaikan||M,onClick:()=>ue(e),children:"Selesaikan"})]})]})})},a[31]=v,a[32]=ie,a[33]=ue,a[34]=re,a[35]=M,a[36]=se,a[37]=T,a[38]=pe):pe=a[38];const ye=pe;let ge,ke,ve,ze,Pe,Te,Ce,Be,Me,Ne,Ae,Ie,$e,Je,Le,Re,Fe,Ue,qe,De,Ge;return a[39]===Symbol.for("react.memo_cache_sentinel")?(ge={borderRadius:16},ke={body:{padding:20}},a[39]=ge,a[40]=ke):(ge=a[39],ke=a[40]),a[41]===Symbol.for("react.memo_cache_sentinel")?(ve={marginBottom:16},a[41]=ve):ve=a[41],a[42]===Symbol.for("react.memo_cache_sentinel")?(ze=d.jsx(h.Search,{placeholder:"Cari nama / NIS / kelas",allowClear:!0,onSearch:e=>G(e),style:{width:260}}),a[42]=ze):ze=a[42],a[43]===Symbol.for("react.memo_cache_sentinel")?(Pe={width:180},Te=[{value:1,label:"Auto Refetch 1 menit"},{value:2,label:"Auto Refetch 2 menit"},{value:3,label:"Auto Refetch 3 menit"},{value:4,label:"Auto Refetch 4 menit"},{value:5,label:"Auto Refetch 5 menit"}],a[43]=Pe,a[44]=Te):(Pe=a[43],Te=a[44]),a[45]!==n?(Ce=d.jsx(F,{value:n,onChange:i,style:Pe,options:Te}),a[45]=n,a[46]=Ce):Ce=a[46],a[47]===Symbol.for("react.memo_cache_sentinel")?(Be={width:180},Me=[{value:"all",label:"Semua Status"},{value:"belum_masuk",label:"Belum Masuk"},{value:"izinkan",label:"Diizinkan"},{value:"mengerjakan",label:"Mengerjakan"},{value:"pelanggaran",label:"Pelanggaran"},{value:"selesai",label:"Selesai"}],a[47]=Be,a[48]=Me):(Be=a[47],Me=a[48]),a[49]!==U?(Ne=d.jsx(F,{value:U,onChange:q,style:Be,options:Me}),a[49]=U,a[50]=Ne):Ne=a[50],a[51]===Symbol.for("react.memo_cache_sentinel")?(Ae={width:180},Ie={value:"all",label:"Semua Kelas"},a[51]=Ae,a[52]=Ie):(Ae=a[51],Ie=a[52]),a[53]!==Y?($e=[Ie,...Y],a[53]=Y,a[54]=$e):$e=a[54],a[55]!==E||a[56]!==$e?(Je=d.jsx(F,{value:E,onChange:K,style:Ae,options:$e}),a[55]=E,a[56]=$e,a[57]=Je):Je=a[57],a[58]!==Ce||a[59]!==Ne||a[60]!==Je?(Le=d.jsxs(u,{wrap:!0,children:[ze,Ce,Ne,Je]}),a[58]=Ce,a[59]=Ne,a[60]=Je,a[61]=Le):Le=a[61],a[62]===Symbol.for("react.memo_cache_sentinel")?(Re=d.jsx(O,{size:12}),a[62]=Re):Re=a[62],a[63]!==t.length?(Fe=d.jsxs(_,{color:"blue",icon:Re,children:["Total Peserta: ",t.length]}),a[63]=t.length,a[64]=Fe):Fe=a[64],a[65]!==Le||a[66]!==Fe?(Ue=d.jsxs(x,{justify:"space-between",align:"center",wrap:"wrap",gap:12,style:ve,children:[Le,Fe]}),a[65]=Le,a[66]=Fe,a[67]=Ue):Ue=a[67],a[68]===Symbol.for("react.memo_cache_sentinel")?(qe={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},a[68]=qe):qe=a[68],a[69]!==Z||a[70]!==ye?(De=d.jsx(R,{data:Z,loading:!1,hasMore:!1,onLoadMore:Se,renderItem:ye,emptyText:"Belum ada peserta ujian",grid:qe,height:"auto"}),a[69]=Z,a[70]=ye,a[71]=De):De=a[71],a[72]!==Ue||a[73]!==De?(Ge=d.jsx(d.Fragment,{children:d.jsxs(S,{style:ge,styles:ke,children:[Ue,De]})}),a[72]=Ue,a[73]=De,a[74]=Ge):Ge=a[74],Ge};function fe(e){return e.className}function we(e){return{value:e,label:e}}function be(e){return"mengerjakan"===e?{text:"Mengerjakan",color:"blue"}:"pelanggaran"===e?{text:"Pelanggaran",color:"red"}:"selesai"===e?{text:"Selesai",color:"green"}:"izinkan"===e?{text:"Diizinkan",color:"gold"}:{text:"Belum Masuk",color:"grey"}}function _e(e){return{jawaban:"pelanggaran"===e||"belum_masuk"===e||"izinkan"===e,izinkan:"mengerjakan"!==e,ulangi:"belum_masuk"===e,selesaikan:"belum_masuk"===e||"selesai"===e}}function Se(){}const{Title:ke,Text:ve}=a,{useToken:ze}=k,Pe=e=>{const a=j.c(54),{examId:t,examName:s,stats:n}=e,{token:i}=ze(),l=L();let r;a[0]!==l?(r=()=>{l("/computer-based-test/jadwal-ujian")},a[0]=l,a[1]=r):r=a[1];const o=r;let c;a[2]===Symbol.for("react.memo_cache_sentinel")?(c={color:"white",fontSize:10},a[2]=c):c=a[2];const m=`ID ${t||"-"}`;let h;a[3]!==m?(h=d.jsx(ve,{style:c,children:m}),a[3]=m,a[4]=h):h=a[4];const y=`1px solid ${i.colorBorderSecondary}`,g=`linear-gradient(135deg, ${i.colorPrimaryBg} 0%, #ffffff 55%)`;let f,w,b,k,v,z,P,T,C;a[5]!==y||a[6]!==g?(f={borderRadius:16,border:y,background:g},a[5]=y,a[6]=g,a[7]=f):f=a[7],a[8]===Symbol.for("react.memo_cache_sentinel")?(w={body:{padding:20}},a[8]=w):w=a[8],a[9]===Symbol.for("react.memo_cache_sentinel")?(b={marginBottom:6},a[9]=b):b=a[9],a[10]!==i.colorPrimary?(k=d.jsx(ue,{size:18,color:i.colorPrimary}),a[10]=i.colorPrimary,a[11]=k):k=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(ve,{type:"secondary",children:"Laporan Ujian"}),a[12]=v):v=a[12],a[13]!==k?(z=d.jsxs(u,{align:"center",size:10,style:b,children:[k,v]}),a[13]=k,a[14]=z):z=a[14],a[15]===Symbol.for("react.memo_cache_sentinel")?(P=d.jsx(Q,{size:14}),a[15]=P):P=a[15],a[16]!==o?(T=d.jsx(p,{type:"link",icon:P,onClick:o}),a[16]=o,a[17]=T):T=a[17],a[18]===Symbol.for("react.memo_cache_sentinel")?(C={margin:0},a[18]=C):C=a[18];const B=s||"Ujian CBT";let M,N,A;a[19]!==B?(M=d.jsx(ke,{level:4,style:C,children:B}),a[19]=B,a[20]=M):M=a[20],a[21]!==T||a[22]!==M?(N=d.jsxs(u,{children:[T,M]}),a[21]=T,a[22]=M,a[23]=N):N=a[23],a[24]!==z||a[25]!==N?(A=d.jsxs(x,{vertical:!0,children:[z,N]}),a[24]=z,a[25]=N,a[26]=A):A=a[26];const I=n?.ongoing||0;let $;a[27]!==I?($=d.jsxs(_,{color:"green",children:["Mengerjakan: ",I]}),a[27]=I,a[28]=$):$=a[28];const J=n?.violations||0;let R;a[29]!==J?(R=d.jsxs(_,{color:"red",children:["Pelanggaran: ",J]}),a[29]=J,a[30]=R):R=a[30];const F=n?.waiting||0;let U,q;a[31]!==F?(U=d.jsxs(_,{color:"default",children:["Belum Masuk: ",F]}),a[31]=F,a[32]=U):U=a[32],a[33]===Symbol.for("react.memo_cache_sentinel")?(q=d.jsx(E,{size:12}),a[33]=q):q=a[33];const D=n?.total||0;let K,W;a[34]!==D?(K=d.jsxs(_,{color:"blue",icon:q,children:["Total: ",D]}),a[34]=D,a[35]=K):K=a[35],a[36]===Symbol.for("react.memo_cache_sentinel")?(W=d.jsx(G,{size:12}),a[36]=W):W=a[36];const H=n?.duration||"-";let O,X,Y,Z,ee;return a[37]!==H?(O=d.jsxs(_,{color:"purple",icon:W,children:["Durasi: ",H," menit"]}),a[37]=H,a[38]=O):O=a[38],a[39]!==$||a[40]!==R||a[41]!==U||a[42]!==K||a[43]!==O?(X=d.jsxs(u,{size:8,wrap:!0,children:[$,R,U,K,O]}),a[39]=$,a[40]=R,a[41]=U,a[42]=K,a[43]=O,a[44]=X):X=a[44],a[45]!==A||a[46]!==X?(Y=d.jsxs(x,{justify:"space-between",align:"center",wrap:"wrap",gap:16,children:[A,X]}),a[45]=A,a[46]=X,a[47]=Y):Y=a[47],a[48]!==Y||a[49]!==f?(Z=d.jsx(S,{style:f,styles:w,children:Y}),a[48]=Y,a[49]=f,a[50]=Z):Z=a[50],a[51]!==Z||a[52]!==h?(ee=d.jsx(V.Ribbon,{text:h,children:Z}),a[51]=Z,a[52]=h,a[53]=ee):ee=a[53],ee},{Text:Te}=a,Ce=e=>{const a=j.c(65),{data:t,examName:s,examId:n}=e,[,i]=J(),[l,r]=$.useState("all"),[o,c]=$.useState(""),[m,y]=$.useState(8);let g;if(a[0]!==t){g=Array.from(new Set(t.map(Be).filter(Boolean))).map(Me),a[0]=t,a[1]=g}else g=a[1];const f=g;let w;if(a[2]!==l||a[3]!==t||a[4]!==o){let e;a[6]!==l||a[7]!==o?(e=e=>{const a="all"===l||e.className===l,t=`${e.nis} ${e.name}`.toLowerCase().includes(o.toLowerCase());return a&&t},a[6]=l,a[7]=o,a[8]=e):e=a[8],w=t.filter(e),a[2]=l,a[3]=t,a[4]=o,a[5]=w}else w=a[5];const b=w;let k;a[9]!==b||a[10]!==m?(k=b.slice(0,m),a[9]=b,a[10]=m,a[11]=k):k=a[11];const v=k;let z;a[12]!==s||a[13]!==b?(z=()=>{const e=b.map(Ne),a=Z.json_to_sheet(e),t=Z.book_new();Z.book_append_sheet(t,a,"Nilai");const n=String(s||"nilai-ujian").trim().replace(/[\/:*?"<>|]+/g,"-");ee(t,`${n}.xlsx`)},a[12]=s,a[13]=b,a[14]=z):z=a[14];const P=z;let T;a[15]!==n||a[16]!==s||a[17]!==i?(T=e=>{e&&n&&i({view:"student_answers",exam_id:n,exam_name:String(s||"").replaceAll(" ","-"),student_id:e.id,student_name:String(e.name||"-").replaceAll(" ","-"),student_class:String(e.className||"-").replaceAll(" ","-"),student_nis:String(e.nis||"-").replaceAll(" ","-")})},a[15]=n,a[16]=s,a[17]=i,a[18]=T):T=a[18];const C=T;let B,M,N,A,I,L;a[19]===Symbol.for("react.memo_cache_sentinel")?(M={title:"No",dataIndex:"no",width:60,render:Ae},N={title:"NIS",dataIndex:"nis",width:120},A={title:"Nama Siswa",dataIndex:"name",render:Ie},I={title:"Kelas",dataIndex:"className",width:120},B={title:"Nilai",dataIndex:"score",width:120,render:$e},a[19]=B,a[20]=M,a[21]=N,a[22]=A,a[23]=I):(B=a[19],M=a[20],N=a[21],A=a[22],I=a[23]),a[24]!==C?(L=[M,N,A,I,B,{title:"Aksi",key:"action",width:140,render:(e,a)=>d.jsx(p,{size:"small",onClick:()=>C(a),children:"Detail Jawaban"})}],a[24]=C,a[25]=L):L=a[25];const R=L;let U;a[26]!==b.length?(U=e=>{const{scrollTop:a,clientHeight:t,scrollHeight:s}=e.currentTarget;a+t>=s-20&&y(e=>e>=b.length?e:e+8)},a[26]=b.length,a[27]=U):U=a[27];const q=U;let D,G,E,K,W,V,H,O,Y,Q,ae,se,ne,ie,le,re,oe,ce,de;return a[28]===Symbol.for("react.memo_cache_sentinel")?(D={borderRadius:16},G={body:{padding:20}},a[28]=D,a[29]=G):(D=a[28],G=a[29]),a[30]===Symbol.for("react.memo_cache_sentinel")?(E={marginBottom:16},a[30]=E):E=a[30],a[31]===Symbol.for("react.memo_cache_sentinel")?(K=d.jsx(h.Search,{placeholder:"Cari nama / NIS",allowClear:!0,onSearch:e=>{c(e),y(8)},style:{width:260,maxWidth:"100%"}}),a[31]=K):K=a[31],a[32]===Symbol.for("react.memo_cache_sentinel")?(W=e=>{r(e),y(8)},V={width:180,maxWidth:"100%"},H={value:"all",label:"Semua Kelas"},a[32]=W,a[33]=V,a[34]=H):(W=a[32],V=a[33],H=a[34]),a[35]!==f?(O=[H,...f],a[35]=f,a[36]=O):O=a[36],a[37]!==l||a[38]!==O?(Y=d.jsxs(u,{wrap:!0,children:[K,d.jsx(F,{value:l,onChange:W,style:V,options:O})]}),a[37]=l,a[38]=O,a[39]=Y):Y=a[39],a[40]!==b.length?(Q=d.jsxs(_,{color:"blue",children:["Total Nilai: ",b.length]}),a[40]=b.length,a[41]=Q):Q=a[41],a[42]===Symbol.for("react.memo_cache_sentinel")?(ae=d.jsx(X,{size:14}),a[42]=ae):ae=a[42],a[43]!==P?(se=d.jsx(p,{icon:ae,onClick:P,children:"Download Excel"}),a[43]=P,a[44]=se):se=a[44],a[45]!==Q||a[46]!==se?(ne=d.jsxs(u,{wrap:!0,children:[Q,se]}),a[45]=Q,a[46]=se,a[47]=ne):ne=a[47],a[48]!==Y||a[49]!==ne?(ie=d.jsxs(x,{justify:"space-between",align:"center",wrap:"wrap",gap:12,style:E,children:[Y,ne]}),a[48]=Y,a[49]=ne,a[50]=ie):ie=a[50],a[51]===Symbol.for("react.memo_cache_sentinel")?(le={maxHeight:480,overflow:"auto"},a[51]=le):le=a[51],a[52]!==R||a[53]!==v?(re=d.jsx(te,{rowKey:"id",columns:R,dataSource:v,pagination:!1,sticky:!0}),a[52]=R,a[53]=v,a[54]=re):re=a[54],a[55]!==b.length||a[56]!==v.length?(oe=v.length>=b.length?d.jsx("div",{style:{textAlign:"center",color:"#98a2b3",padding:"8px 0 4px",fontSize:12},children:"Semua data telah dimuat"}):null,a[55]=b.length,a[56]=v.length,a[57]=oe):oe=a[57],a[58]!==q||a[59]!==re||a[60]!==oe?(ce=d.jsxs("div",{style:le,onScroll:q,children:[re,oe]}),a[58]=q,a[59]=re,a[60]=oe,a[61]=ce):ce=a[61],a[62]!==ie||a[63]!==ce?(de=d.jsxs(S,{style:D,styles:G,children:[ie,ce]}),a[62]=ie,a[63]=ce,a[64]=de):de=a[64],de};function Be(e){return e.className}function Me(e){return{value:e,label:e}}function Ne(e,a){return{No:a+1,NIS:e.nis,Nama:e.name,Kelas:e.className,Nilai:e.score??0}}function Ae(e,a,t){return t+1}function Ie(e){return d.jsx(Te,{strong:!0,children:e})}function $e(e){return d.jsx(_,{color:e>=75?"green":"orange",children:e})}const Je=e=>{const a=j.c(46),{exam_id:t,exam_name:s}=e;let n;a[0]!==t?(n={exam_id:t},a[0]=t,a[1]=n):n=a[1];const i=!t;let l;a[2]!==i?(l={skip:i},a[2]=i,a[3]=l):l=a[3];const{data:r}=g(n,l);let o;a[4]!==t?(o={exam_id:t},a[4]=t,a[5]=o):o=a[5];const c=!t;let m;a[6]!==c?(m={skip:c},a[6]=c,a[7]=m):m=a[7];const{data:h}=v(o,m);let u;a[8]!==r?.data?(u=r?.data||[],a[8]=r?.data,a[9]=u):u=a[9];const x=u;let p;a[10]!==x?(p=x.map(Le),a[10]=x,a[11]=p):p=a[11];const y=p;let f;a[12]!==h?.data?(f=h?.data||[],a[12]=h?.data,a[13]=f):f=a[13];const w=f;let b;a[14]!==w?(b=w.map(Re),a[14]=w,a[15]=b):b=a[15];const _=b;let S;a[16]!==y?(S=y.filter(Fe),a[16]=y,a[17]=S):S=a[17];const k=S.length;let P;a[18]!==y?(P=y.filter(Ue),a[18]=y,a[19]=P):P=a[19];const T=P.length;let C;a[20]!==y?(C=y.filter(qe),a[20]=y,a[21]=C):C=a[21];const B=C.length,M=r?.duration_minutes||0;let N;a[22]!==y.length||a[23]!==k||a[24]!==M||a[25]!==T||a[26]!==B?(N={total:y.length,ongoing:k,violations:T,waiting:B,duration:M},a[22]=y.length,a[23]=k,a[24]=M,a[25]=T,a[26]=B,a[27]=N):N=a[27];const A=N;let I,$,J,L,R,F;return a[28]===Symbol.for("react.memo_cache_sentinel")?(I={display:"flex",flexDirection:"column",gap:16},a[28]=I):I=a[28],a[29]!==t||a[30]!==s||a[31]!==A?($=d.jsx(Pe,{examId:t,examName:s,stats:A}),a[29]=t,a[30]=s,a[31]=A,a[32]=$):$=a[32],a[33]!==y||a[34]!==t?(J={key:"attendance",label:"Kehadiran",children:d.jsx(ge,{data:y,examId:t})},a[33]=y,a[34]=t,a[35]=J):J=a[35],a[36]!==t||a[37]!==s||a[38]!==_?(L={key:"scores",label:"Nilai",children:d.jsx(Ce,{data:_,examName:s,examId:t})},a[36]=t,a[37]=s,a[38]=_,a[39]=L):L=a[39],a[40]!==J||a[41]!==L?(R=d.jsx(z,{defaultActiveKey:"attendance",items:[J,L]}),a[40]=J,a[41]=L,a[42]=R):R=a[42],a[43]!==$||a[44]!==R?(F=d.jsxs("div",{style:I,children:[$,R]}),a[43]=$,a[44]=R,a[45]=F):F=a[45],F};function Le(e){return{id:e.id,nis:e.nis,name:e.name,className:e.class_name,ip:e.ip||"-",browser:e.browser||"-",startAt:e.start_at||"-",status:e.status||"belum_masuk"}}function Re(e){return{id:e.id,nis:e.nis,name:e.name,className:e.class_name,score:e.score??0}}function Fe(e){return"mengerjakan"===e.status}function Ue(e){return"pelanggaran"===e.status}function qe(e){return"belum_masuk"===e.status}const{Text:De,Title:Ge}=a,Ee={single:"PG Jawaban Tunggal",multi:"PG Multi Jawaban",short:"Jawaban Singkat",essay:"Uraian",match:"Mencocokkan"},Ke=e=>{const a=j.c(2),{type:t}=e,s=Ee[t]||t;let n;return a[0]!==s?(n=d.jsx(_,{color:"blue",children:s}),a[0]=s,a[1]=n):n=a[1],n},We=e=>{const a=j.c(64),{item:t,onPointChange:s,maxAllow:n,saveState:i}=e,l=!0===t.correct;let r,o,c,m,h,p,y,g,f,w,b,k,v,z,P;return a[0]===Symbol.for("react.memo_cache_sentinel")?(r={borderRadius:12},a[0]=r):r=a[0],a[1]!==t.no?(o=d.jsx(u,{size:8,align:"center",wrap:!0,children:d.jsxs(De,{type:"secondary",children:["Soal #",t.no]})}),a[1]=t.no,a[2]=o):o=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(c={rowGap:4},a[3]=c):c=a[3],a[4]!==t.maxPoints?(m=d.jsxs(_,{color:"gold",children:["Poin: ",t.maxPoints]}),a[4]=t.maxPoints,a[5]=m):m=a[5],a[6]!==l||a[7]!==t.correct?(h="boolean"==typeof t.correct?d.jsx(_,{color:l?"green":"red",children:l?"Benar":"Salah"}):null,a[6]=l,a[7]=t.correct,a[8]=h):h=a[8],a[9]!==m||a[10]!==h?(p=d.jsxs(u,{size:6,wrap:!0,style:c,children:[m,h]}),a[9]=m,a[10]=h,a[11]=p):p=a[11],a[12]!==o||a[13]!==p?(y=d.jsxs(x,{justify:"space-between",align:"center",wrap:"wrap",gap:8,children:[o,p]}),a[12]=o,a[13]=p,a[14]=y):y=a[14],a[15]===Symbol.for("react.memo_cache_sentinel")?(g={margin:"8px 0"},a[15]=g):g=a[15],a[16]!==t.question?(f=d.jsx(Ge,{level:5,style:g,children:t.question}),a[16]=t.question,a[17]=f):f=a[17],a[18]!==t.correctAnswers||a[19]!==t.options||a[20]!==t.selected||a[21]!==t.type?(w="single"===t.type&&d.jsxs(u,{orientation:"vertical",size:8,style:{width:"100%"},children:[d.jsxs("div",{style:{width:"100%"},children:[d.jsx(De,{type:"secondary",children:"Jawaban Siswa"}),d.jsx(u,{wrap:!0,size:6,style:{marginTop:6,width:"100%"},children:t.options.map(e=>d.jsx(_,{color:e===t.selected?"green":"default",icon:e===t.selected?d.jsx(O,{size:12}):null,style:{maxWidth:"100%",whiteSpace:"normal"},children:e},e))})]}),d.jsxs("div",{style:{width:"100%"},children:[d.jsx(De,{type:"secondary",children:"Jawaban Benar"}),d.jsx(u,{wrap:!0,size:6,style:{marginTop:6,width:"100%"},children:t.correctAnswers?.length?t.correctAnswers.map(He):d.jsx(_,{color:"default",children:"-"})})]})]}),a[18]=t.correctAnswers,a[19]=t.options,a[20]=t.selected,a[21]=t.type,a[22]=w):w=a[22],a[23]!==t.correctAnswers||a[24]!==t.options||a[25]!==t.selected||a[26]!==t.type?(b="multi"===t.type&&d.jsxs(u,{orientation:"vertical",size:8,style:{width:"100%"},children:[d.jsxs("div",{style:{width:"100%"},children:[d.jsx(De,{type:"secondary",children:"Jawaban Siswa"}),d.jsx(u,{wrap:!0,size:6,style:{marginTop:6,width:"100%"},children:t.options.map(e=>{const a=t.selected.includes(e);return d.jsx(_,{color:a?"green":"default",icon:a?d.jsx(O,{size:12}):null,style:{maxWidth:"100%",whiteSpace:"normal"},children:e},e)})})]}),d.jsxs("div",{style:{width:"100%"},children:[d.jsx(De,{type:"secondary",children:"Jawaban Benar"}),d.jsx(u,{wrap:!0,size:6,style:{marginTop:6,width:"100%"},children:t.correctAnswers?.length?t.correctAnswers.map(Oe):d.jsx(_,{color:"default",children:"-"})})]})]}),a[23]=t.correctAnswers,a[24]=t.options,a[25]=t.selected,a[26]=t.type,a[27]=b):b=a[27],a[28]!==t.answer||a[29]!==t.id||a[30]!==t.maxPoints||a[31]!==t.points||a[32]!==t.type||a[33]!==n||a[34]!==s||a[35]!==i?(k="short"===t.type&&d.jsxs(u,{orientation:"vertical",size:8,style:{width:"100%"},children:[d.jsxs(De,{children:["Jawaban Siswa: ",t.answer]}),d.jsxs(x,{align:"center",gap:8,wrap:"wrap",children:[d.jsx(De,{type:"secondary",children:"Poin:"}),d.jsx(D,{min:0,max:n,value:t.points,onChange:e=>s(t.id,e),style:{width:120}}),d.jsxs(_,{color:"gold",children:["Maks ",t.maxPoints]}),"saving"===i&&d.jsx(_,{color:"gold",children:"Menyimpan..."}),"saved"===i&&d.jsx(_,{color:"green",children:"Tersimpan"}),"error"===i&&d.jsx(_,{color:"red",children:"Gagal menyimpan"})]})]}),a[28]=t.answer,a[29]=t.id,a[30]=t.maxPoints,a[31]=t.points,a[32]=t.type,a[33]=n,a[34]=s,a[35]=i,a[36]=k):k=a[36],a[37]!==t.answer||a[38]!==t.id||a[39]!==t.maxPoints||a[40]!==t.points||a[41]!==t.type||a[42]!==n||a[43]!==s||a[44]!==i?(v="essay"===t.type&&d.jsxs(u,{orientation:"vertical",size:8,style:{width:"100%"},children:[d.jsx(De,{children:"Jawaban Siswa:"}),d.jsx(S,{size:"small",style:{background:"#fafafa"},children:t.answer}),d.jsxs(x,{align:"center",gap:8,wrap:"wrap",children:[d.jsx(De,{type:"secondary",children:"Poin:"}),d.jsx(D,{min:0,max:n,value:t.points,onChange:e=>s(t.id,e),style:{width:120}}),d.jsxs(_,{color:"gold",children:["Maks ",t.maxPoints]}),"saving"===i&&d.jsx(_,{color:"gold",children:"Menyimpan..."}),"saved"===i&&d.jsx(_,{color:"green",children:"Tersimpan"}),"error"===i&&d.jsx(_,{color:"red",children:"Gagal menyimpan"})]})]}),a[37]=t.answer,a[38]=t.id,a[39]=t.maxPoints,a[40]=t.points,a[41]=t.type,a[42]=n,a[43]=s,a[44]=i,a[45]=v):v=a[45],a[46]!==t.correctMatches||a[47]!==t.id||a[48]!==t.matches||a[49]!==t.maxPoints||a[50]!==t.points||a[51]!==t.type||a[52]!==n||a[53]!==s||a[54]!==i?(z="match"===t.type&&d.jsxs(u,{orientation:"vertical",size:12,style:{width:"100%"},children:[d.jsxs("div",{style:{width:"100%"},children:[d.jsx(De,{type:"secondary",children:"Jawaban Siswa"}),d.jsx(u,{orientation:"vertical",size:6,style:{marginTop:6,width:"100%"},children:t.matches.map(Xe)})]}),d.jsxs("div",{style:{width:"100%"},children:[d.jsx(De,{type:"secondary",children:"Pasangan Benar"}),d.jsx(u,{orientation:"vertical",size:6,style:{marginTop:6,width:"100%"},children:t.correctMatches?.length?t.correctMatches.map(Ye):d.jsx(_,{color:"default",children:"-"})})]}),d.jsxs(x,{align:"center",gap:8,wrap:"wrap",children:[d.jsx(De,{type:"secondary",children:"Poin:"}),d.jsx(D,{min:0,max:n,value:t.points,onChange:e=>s(t.id,e),style:{width:120}}),d.jsxs(_,{color:"gold",children:["Maks ",t.maxPoints]}),"saving"===i&&d.jsx(_,{color:"gold",children:"Menyimpan..."}),"saved"===i&&d.jsx(_,{color:"green",children:"Tersimpan"}),"error"===i&&d.jsx(_,{color:"red",children:"Gagal menyimpan"})]})]}),a[46]=t.correctMatches,a[47]=t.id,a[48]=t.matches,a[49]=t.maxPoints,a[50]=t.points,a[51]=t.type,a[52]=n,a[53]=s,a[54]=i,a[55]=z):z=a[55],a[56]!==w||a[57]!==b||a[58]!==k||a[59]!==v||a[60]!==z||a[61]!==y||a[62]!==f?(P=d.jsxs(S,{size:"small",style:r,children:[y,f,w,b,k,v,z]}),a[56]=w,a[57]=b,a[58]=k,a[59]=v,a[60]=z,a[61]=y,a[62]=f,a[63]=P):P=a[63],P},Ve=()=>{const e=j.c(96),[a,t]=J();let s;e[0]!==a?(s=a.get("exam_id"),e[0]=a,e[1]=s):s=e[1];const n=s;let i;e[2]!==a?(i=a.get("exam_name"),e[2]=a,e[3]=i):i=e[3];const l=i;let r;e[4]!==a?(r=a.get("student_id"),e[4]=a,e[5]=r):r=e[5];const o=r;let c;e[6]!==a?(c=(a.get("student_name")||"-").replaceAll("-"," "),e[6]=a,e[7]=c):c=e[7];const m=c;let h;e[8]!==a?(h=(a.get("student_class")||"-").replaceAll("-"," "),e[8]=a,e[9]=h):h=e[9];const y=h;let g;e[10]!==a?(g=a.get("student_nis")||"-",e[10]=a,e[11]=g):g=e[11];const f=g;let w;e[12]!==n||e[13]!==o?(w={exam_id:n,student_id:o},e[12]=n,e[13]=o,e[14]=w):w=e[14];const b=!n||!o;let k;e[15]!==b?(k={skip:b},e[15]=b,e[16]=k):k=e[16];const{data:v}=P(w,k);let z;e[17]!==v?(z=void 0===v?[]:v,e[17]=v,e[18]=z):z=e[18];const B=z,[M]=T();let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N={},e[19]=N):N=e[19];const A=$.useRef(N);let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=[],e[20]=I):I=e[20];const[L,R]=$.useState(I);let F;e[21]===Symbol.for("react.memo_cache_sentinel")?(F={},e[21]=F):F=e[21];const[U,q]=$.useState(F);let D,G,E;e[22]!==B?(D=()=>{R((B||[]).map(Qe)),q({})},G=[B],e[22]=B,e[23]=D,e[24]=G):(D=e[23],G=e[24]),$.useEffect(D,G),e[25]!==L?(E=L.reduce(Ze,0),e[25]=L,e[26]=E):E=e[26];const K=E,W=Math.min(K,100);let V;e[27]!==n||e[28]!==L||e[29]!==M||e[30]!==o?(V=(e,a)=>{const t=Number.isFinite(a)?a:0,s=L.find(a=>a.id===e)?.maxPoints??t,i=Math.max(0,Math.min(t,s));R(a=>a.map(a=>a.id!==e?a:{...a,points:i})),n&&o&&(A.current[e]&&clearTimeout(A.current[e]),A.current[e]=setTimeout(()=>{q(a=>({...a,[e]:"saving"})),M({exam_id:n,student_id:o,question_id:e,score:i}).unwrap().then(()=>{q(a=>({...a,[e]:"saved"}))}).catch(()=>{q(a=>({...a,[e]:"error"}))})},400))},e[27]=n,e[28]=L,e[29]=M,e[30]=o,e[31]=V):V=e[31];const H=V;let O;e[32]!==L?(O=(e,a)=>{const t=L.reduce((a,t)=>t.id===e?a:"short"===t.type||"essay"===t.type||"match"===t.type?a+(Number(t.points)||0):a,0);return Math.min(a,Math.max(0,100-t))},e[32]=L,e[33]=O):O=e[33];const Y=O;let Z;e[34]!==L?(Z={},L.forEach(e=>{Z[e.type]||(Z[e.type]=[]),Z[e.type].push(e)}),e[34]=L,e[35]=Z):Z=e[35];const ee=Z;let ae;e[36]!==ee?(ae=Object.entries(ee).map(ea),e[36]=ee,e[37]=ae):ae=e[37];const te=ae;let ne,ie,le;e[38]===Symbol.for("react.memo_cache_sentinel")?(ne=()=>()=>{Object.values(A.current).forEach(aa)},ie=[],e[38]=ne,e[39]=ie):(ne=e[38],ie=e[39]),$.useEffect(ne,ie),e[40]!==n||e[41]!==l||e[42]!==t?(le=()=>{t({view:"report",exam_id:n,exam_name:l})},e[40]=n,e[41]=l,e[42]=t,e[43]=le):le=e[43];const re=le;let oe;e[44]!==te||e[45]!==y||e[46]!==m||e[47]!==f||e[48]!==W?(oe=()=>{const e=window.open("","_blank");if(!e)return;const a=`\n      <html>\n        <head>\n          <title>Jawaban Siswa</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 24px; }\n            h1 { margin: 0 0 4px; font-size: 18px; }\n            .meta { color: #667085; margin-bottom: 16px; }\n            .section { margin-bottom: 16px; }\n            .question { margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #eee; }\n            .label { font-weight: 600; }\n          </style>\n        </head>\n        <body>\n          <h1>Jawaban Siswa</h1>\n          <div class="meta">${m} • NIS ${f} • ${y}</div>\n          <div class="meta">Total Skor: ${W} / 100</div>\n          ${te.map(sa).join("")}\n        </body>\n      </html>\n    `;e.document.write(a),e.document.close(),e.focus(),e.print()},e[44]=te,e[45]=y,e[46]=m,e[47]=f,e[48]=W,e[49]=oe):oe=e[49];const ce=oe;let de,me,he,ue,xe,pe,ye,je,ge,fe,we,be,_e,Se,ke;e[50]===Symbol.for("react.memo_cache_sentinel")?(de={display:"flex",flexDirection:"column",gap:16},e[50]=de):de=e[50],e[51]===Symbol.for("react.memo_cache_sentinel")?(me={width:"100%"},e[51]=me):me=e[51],e[52]===Symbol.for("react.memo_cache_sentinel")?(he=d.jsx(Q,{size:16}),e[52]=he):he=e[52],e[53]!==re?(ue=d.jsx(p,{icon:he,onClick:re,children:"Kembali"}),e[53]=re,e[54]=ue):ue=e[54],e[55]===Symbol.for("react.memo_cache_sentinel")?(xe=d.jsx(se,{size:18}),e[55]=xe):xe=e[55],e[56]===Symbol.for("react.memo_cache_sentinel")?(pe=d.jsxs(u,{size:8,align:"center",children:[xe,d.jsx(Ge,{level:4,style:{margin:0},children:"Jawaban Siswa"})]}),e[56]=pe):pe=e[56],e[57]!==ue?(ye=d.jsxs(u,{size:10,align:"center",wrap:!0,children:[ue,pe]}),e[57]=ue,e[58]=ye):ye=e[58],e[59]===Symbol.for("react.memo_cache_sentinel")?(je=d.jsx(X,{size:14}),e[59]=je):je=e[59],e[60]!==ce?(ge=d.jsx(p,{icon:je,onClick:ce,children:"Export PDF"}),e[60]=ce,e[61]=ge):ge=e[61],e[62]!==ye||e[63]!==ge?(fe=d.jsxs(x,{align:"center",justify:"space-between",wrap:"wrap",gap:12,children:[ye,ge]}),e[62]=ye,e[63]=ge,e[64]=fe):fe=e[64],e[65]!==m?(we=d.jsx(De,{strong:!0,children:m}),e[65]=m,e[66]=we):we=e[66],e[67]===Symbol.for("react.memo_cache_sentinel")?(be={color:"#667085",fontSize:12},e[67]=be):be=e[67],e[68]!==y||e[69]!==f?(_e=d.jsxs("div",{style:be,children:["NIS ",f," • ",y]}),e[68]=y,e[69]=f,e[70]=_e):_e=e[70],e[71]!==we||e[72]!==_e?(Se=d.jsxs("div",{children:[we,_e]}),e[71]=we,e[72]=_e,e[73]=Se):Se=e[73],e[74]!==L.length?(ke=d.jsxs(_,{color:"blue",children:["Total Soal: ",L.length]}),e[74]=L.length,e[75]=ke):ke=e[75];const ve=W>=75?"green":"gold";let ze,Pe,Te,Ce,Be,Me;return e[76]!==ve||e[77]!==W?(ze=d.jsxs(_,{color:ve,children:["Total Skor: ",W,"/100"]}),e[76]=ve,e[77]=W,e[78]=ze):ze=e[78],e[79]!==ke||e[80]!==ze?(Pe=d.jsxs(u,{size:8,align:"center",wrap:!0,children:[ke,ze]}),e[79]=ke,e[80]=ze,e[81]=Pe):Pe=e[81],e[82]!==Se||e[83]!==Pe?(Te=d.jsxs(x,{justify:"space-between",align:"center",wrap:"wrap",gap:8,children:[Se,Pe]}),e[82]=Se,e[83]=Pe,e[84]=Te):Te=e[84],e[85]!==fe||e[86]!==Te?(Ce=d.jsx(S,{size:"small",children:d.jsxs(u,{vertical:!0,size:16,style:me,children:[fe,Te]})}),e[85]=fe,e[86]=Te,e[87]=Ce):Ce=e[87],e[88]!==Y||e[89]!==U||e[90]!==te||e[91]!==H?(Be=0===te.length?d.jsx(S,{size:"small",style:{borderRadius:12},children:d.jsx(De,{type:"secondary",children:"Belum ada jawaban."})}):d.jsx(u,{orientation:"vertical",size:16,style:{width:"100%"},children:te.map(e=>d.jsxs(S,{style:{borderRadius:12},children:[d.jsxs(x,{align:"center",gap:8,style:{marginBottom:8},children:[d.jsx(Ke,{type:e.type}),d.jsxs(De,{type:"secondary",children:[e.items.length," soal"]})]}),d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:e.items.map(e=>d.jsx(We,{item:e,onPointChange:H,maxAllow:Y(e.id,e.maxPoints||0),saveState:U[e.id]},e.id))}),d.jsx(C,{style:{margin:"16px 0 0"}})]},e.type))}),e[88]=Y,e[89]=U,e[90]=te,e[91]=H,e[92]=Be):Be=e[92],e[93]!==Ce||e[94]!==Be?(Me=d.jsxs("div",{style:de,children:[Ce,Be]}),e[93]=Ce,e[94]=Be,e[95]=Me):Me=e[95],Me};function He(e){return d.jsx(_,{color:"blue",style:{maxWidth:"100%",whiteSpace:"normal"},children:e},e)}function Oe(e){return d.jsx(_,{color:"blue",style:{maxWidth:"100%",whiteSpace:"normal"},children:e},e)}function Xe(e,a){return d.jsxs(x,{align:"center",gap:8,wrap:"wrap",children:[d.jsx(_,{style:{maxWidth:"100%",whiteSpace:"normal"},children:e.left}),d.jsx(De,{type:"secondary",children:"→"}),d.jsx(_,{color:e.correct?"green":"red",style:{maxWidth:"100%",whiteSpace:"normal"},children:e.right}),e.correct?d.jsx(O,{size:14,color:"#16a34a"}):d.jsx(oe,{size:14,color:"#ef4444"})]},`${e.left}-${e.right}-${a}`)}function Ye(e,a){return d.jsxs(x,{align:"center",gap:8,wrap:"wrap",children:[d.jsx(_,{style:{maxWidth:"100%",whiteSpace:"normal"},children:e.left}),d.jsx(De,{type:"secondary",children:"→"}),d.jsx(_,{color:"blue",style:{maxWidth:"100%",whiteSpace:"normal"},children:e.right})]},`${e.left}-${e.right}-${a}`)}function Qe(e){return{...e}}function Ze(e,a){return"short"===a.type||"essay"===a.type?e+(Number(a.points)||0):"single"===a.type||"multi"===a.type?e+(a.correct&&a.maxPoints||0):"match"===a.type?e+(Number(a.points)||0):e}function ea(e){const[a,t]=e;return{type:a,items:t}}function aa(e){return clearTimeout(e)}function ta(e){return`\n                <div class="question">\n                  <div class="label">Soal #${e.no}</div>\n                  <div>${e.question}</div>\n                  ${e.answer?`<div>Jawaban: ${e.answer}</div>`:""}\n                  ${"short"===e.type||"essay"===e.type||"match"===e.type?`<div>Poin: ${e.points||0}/${e.maxPoints}</div>`:""}\n                </div>\n              `}function sa(e){return`\n            <div class="section">\n              <div class="label">${Ee[e.type]||e.type}</div>\n              ${e.items.map(ta).join("")}\n            </div>\n          `}const{Text:na,Title:ia}=a,{useToken:la}=k,ra=()=>{const e=j.c(79),{token:a}=la(),[t,s]=J(),n=t.get("view");let i;e[0]!==t?(i=t.get("exam_id"),e[0]=t,e[1]=i):i=e[1];const l=i;let r;e[2]!==t?(r=t.get("exam_name")?.replaceAll("-"," "),e[2]=t,e[3]=r):r=e[3];const o=r,[c,m]=$.useState(1),[g,f]=$.useState("");let w;e[4]===Symbol.for("react.memo_cache_sentinel")?(w=[],e[4]=w):w=e[4];const[b,k]=$.useState(w),[v,z]=$.useState(!1),[P,T]=$.useState(null);let C;e[5]!==c||e[6]!==g?(C={page:c,search:g},e[5]=c,e[6]=g,e[7]=C):C=e[7];const{data:L,isFetching:F}=B(C),[U]=M();let D,K,V;e[8]!==L||e[9]!==c?(D=()=>{L?.data&&k(1===c?L.data:e=>{const a=new Set(e.map(oa)),t=L.data.filter(e=>!a.has(e.id));return[...e,...t]})},K=[L,c],e[8]=L,e[9]=c,e[10]=D,e[11]=K):(D=e[10],K=e[11]),$.useEffect(D,K),e[12]===Symbol.for("react.memo_cache_sentinel")?(V=e=>{f(e),m(1),k([])},e[12]=V):V=e[12];const H=V;let O;e[13]!==L?.hasMore||e[14]!==F?(O=()=>{L?.hasMore&&!F&&m(ca)},e[13]=L?.hasMore,e[14]=F,e[15]=O):O=e[15];const X=O;let Q;e[16]!==U?(Q=async e=>{try{await U(e).unwrap(),y.success("Jadwal ujian berhasil dihapus"),m(1),k(a=>a.filter(a=>a.id!==e))}catch(a){y.error("Gagal menghapus jadwal ujian")}},e[16]=U,e[17]=Q):Q=e[17];const Z=Q;let ee;e[18]===Symbol.for("react.memo_cache_sentinel")?(ee=e=>{T(void 0===e?null:e),z(!0)},e[18]=ee):ee=e[18];const te=ee;let se;e[19]===Symbol.for("react.memo_cache_sentinel")?(se=()=>{z(!1),T(null),m(1)},e[19]=se):se=e[19];const oe=se;let ce;e[20]!==s?(ce=e=>{s({view:"report",exam_id:e.id,exam_name:e.name?.replaceAll(" ","-")})},e[20]=s,e[21]=ce):ce=e[21];const de=ce;let me;e[22]!==Z||e[23]!==de||e[24]!==a.colorPrimary||e[25]!==a.colorPrimaryBg?(me=e=>{const t=e.is_active?"green":"default",s=e.classes?.map(da).join(", "),n=e.class_count>0?`${e.class_count} kelas`:"Belum ada kelas";return d.jsxs(S,{hoverable:!0,size:"small",style:{height:"100%",borderRadius:12,display:"flex",flexDirection:"column"},styles:{body:{flex:1,display:"flex",flexDirection:"column"}},title:d.jsxs(x,{justify:"space-between",align:"center",children:[d.jsx(_,{color:t,children:e.is_active?"Aktif":"Nonaktif"}),d.jsx(na,{type:"secondary",style:{fontSize:11},children:e.bank_type||"UJIAN"})]}),actions:[d.jsx(N,{title:"Laporan",children:d.jsx("div",{onClick:()=>de(e),style:{display:"flex",justifyContent:"center"},children:d.jsx(Y,{size:16})})},"report"),d.jsx(N,{title:"Edit",children:d.jsx("div",{onClick:()=>te(e),style:{display:"flex",justifyContent:"center"},children:d.jsx(ae,{size:16})})},"edit"),d.jsx(N,{title:"Hapus",children:d.jsx(ne,{title:"Hapus Jadwal Ujian?",onConfirm:()=>Z(e.id),okText:"Ya",cancelText:"Batal",okButtonProps:{danger:!0},children:d.jsx("div",{style:{display:"flex",justifyContent:"center"},children:d.jsx(ie,{size:16})})})},"delete")],children:[d.jsxs(x,{gap:"middle",align:"start",style:{marginBottom:12},children:[d.jsx("div",{style:{background:a.colorPrimaryBg,padding:10,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx(q,{size:20,color:a.colorPrimary})}),d.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[d.jsx(N,{title:e.name,children:d.jsx(ia,{level:5,ellipsis:{rows:2},style:{margin:"0 0 4px 0",fontSize:15,lineHeight:1.3},children:e.name})}),d.jsxs(na,{type:"secondary",style:{fontSize:12},children:[e.bank_title," • ",e.subject_name||"Mapel Umum"]})]})]}),d.jsxs(u,{vertical:!0,size:4,style:{marginBottom:12},children:[d.jsxs(na,{style:{fontSize:12},children:["Grade: ",e.grade_name||"-"]}),d.jsx(N,{title:s||"",children:d.jsxs(na,{style:{fontSize:12},children:[d.jsx(E,{size:12,style:{marginRight:6}}),n]})}),d.jsxs(na,{style:{fontSize:12},children:["Token: ",e.token||"-"]}),d.jsxs(na,{style:{fontSize:12},children:[d.jsx(G,{size:12,style:{marginRight:6}}),e.duration_minutes," menit"]})]}),d.jsxs(x,{align:"center",gap:8,style:{marginTop:"auto"},children:[d.jsx(A,{size:22,style:{backgroundColor:"#f0f0f0",color:"#666",fontSize:10},children:(e.teacher_name||"?").split(" ").slice(0,2).map(ma).join("").toUpperCase()}),d.jsx(na,{ellipsis:!0,style:{fontSize:12,color:"#666"},children:e.teacher_name||"-"})]})]})},e[22]=Z,e[23]=de,e[24]=a.colorPrimary,e[25]=a.colorPrimaryBg,e[26]=me):me=e[26];const he=me;if("report"===n){const a=`Laporan ${o}`;let t,s;return e[27]!==l||e[28]!==o?(t=d.jsx(Je,{exam_id:l,exam_name:o}),e[27]=l,e[28]=o,e[29]=t):t=e[29],e[30]!==a||e[31]!==t?(s=d.jsx(I,{title:a,children:t}),e[30]=a,e[31]=t,e[32]=s):s=e[32],s}if("student_answers"===n){const a=`Jawaban ${o}`;let t,s;return e[33]===Symbol.for("react.memo_cache_sentinel")?(t=d.jsx(Ve,{}),e[33]=t):t=e[33],e[34]!==a?(s=d.jsx(I,{title:a,children:t}),e[34]=a,e[35]=s):s=e[35],s}if("student_answers"===n){const a=`Jawaban Siswa ${o}`;let t,s;return e[36]!==l||e[37]!==o?(t=d.jsx(Ve,{exam_id:l,exam_name:o}),e[36]=l,e[37]=o,e[38]=t):t=e[38],e[39]!==a||e[40]!==t?(s=d.jsx(I,{title:a,children:t}),e[39]=a,e[40]=t,e[41]=s):s=e[41],s}let ue,xe,pe,je,ge,fe;e[42]===Symbol.for("react.memo_cache_sentinel")?(ue={marginBottom:24},e[42]=ue):ue=e[42],e[43]===Symbol.for("react.memo_cache_sentinel")?(xe=d.jsx(le,{size:16,color:"#999"}),pe={width:320,borderRadius:8},e[43]=xe,e[44]=pe):(xe=e[43],pe=e[44]),e[45]===Symbol.for("react.memo_cache_sentinel")?(je=d.jsx(h,{prefix:xe,style:pe,placeholder:"Cari nama ujian, bank soal, mapel, atau guru...",allowClear:!0,onChange:e=>{setTimeout(()=>H(e.target.value),500)}}),e[45]=je):je=e[45],e[46]===Symbol.for("react.memo_cache_sentinel")?(ge=d.jsx(re,{size:18}),e[46]=ge):ge=e[46],e[47]===Symbol.for("react.memo_cache_sentinel")?(fe=d.jsxs(x,{align:"center",justify:"space-between",wrap:"wrap",gap:16,style:ue,children:[je,d.jsx(u,{children:d.jsx(p,{icon:ge,type:"primary",onClick:()=>te(null),style:{borderRadius:8},children:"Jadwal Ujian"})})]}),e[47]=fe):fe=e[47];const we=L?.hasMore||!1;let be,_e,Se,ke,ve,ze;e[48]===Symbol.for("react.memo_cache_sentinel")?(be={gutter:[16,16],xs:24,sm:12,md:8,lg:8,xl:6,xxl:4},e[48]=be):be=e[48],e[49]!==b||e[50]!==X||e[51]!==F||e[52]!==he||e[53]!==we?(_e=d.jsx(R,{data:b,loading:F,hasMore:we,onLoadMore:X,renderItem:he,emptyText:"Belum ada jadwal ujian tersedia",grid:be,height:"calc(100vh - 300px)"}),e[49]=b,e[50]=X,e[51]=F,e[52]=he,e[53]=we,e[54]=_e):_e=e[54],e[55]!==a.colorPrimaryBg?(Se={background:a.colorPrimaryBg,padding:6,borderRadius:6,display:"flex"},e[55]=a.colorPrimaryBg,e[56]=Se):Se=e[56],e[57]!==a.colorPrimary?(ke=d.jsx(q,{size:18,color:a.colorPrimary}),e[57]=a.colorPrimary,e[58]=ke):ke=e[58],e[59]!==Se||e[60]!==ke?(ve=d.jsx("div",{style:Se,children:ke}),e[59]=Se,e[60]=ke,e[61]=ve):ve=e[61],e[62]===Symbol.for("react.memo_cache_sentinel")?(ze={fontSize:16},e[62]=ze):ze=e[62];const Pe=P?"Edit Jadwal Ujian":"Buat Jadwal Ujian Baru";let Te,Ce,Be,Me,Ne,Ae,Ie;return e[63]!==Pe?(Te=d.jsx(na,{strong:!0,style:ze,children:Pe}),e[63]=Pe,e[64]=Te):Te=e[64],e[65]!==ve||e[66]!==Te?(Ce=d.jsxs(x,{align:"center",gap:8,children:[ve,Te]}),e[65]=ve,e[66]=Te,e[67]=Ce):Ce=e[67],e[68]===Symbol.for("react.memo_cache_sentinel")?(Be=()=>z(!1),e[68]=Be):Be=e[68],e[69]===Symbol.for("react.memo_cache_sentinel")?(Me=()=>z(!1),e[69]=Me):Me=e[69],e[70]!==P?(Ne=d.jsx(ye,{initialValues:P,onClose:Me,onSuccess:oe}),e[70]=P,e[71]=Ne):Ne=e[71],e[72]!==v||e[73]!==Ce||e[74]!==Ne?(Ae=d.jsx(W,{title:Ce,open:v,onCancel:Be,footer:null,destroyOnHidden:!0,centered:!0,width:720,children:Ne}),e[72]=v,e[73]=Ce,e[74]=Ne,e[75]=Ae):Ae=e[75],e[76]!==_e||e[77]!==Ae?(Ie=d.jsxs(I,{title:"Manajemen Jadwal Ujian",children:[fe,_e,Ae]}),e[76]=_e,e[77]=Ae,e[78]=Ie):Ie=e[78],Ie};function oa(e){return e.id}function ca(e){return e+1}function da(e){return e.name}function ma(e){return e[0]}export{ra as default};
