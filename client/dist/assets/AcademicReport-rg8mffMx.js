import{k as e,bp as t,o as i}from"./index-DJgzJvx0.js";import{r as l}from"./vendor-kOq7Q5-U.js";import{B as a}from"./book-open-Bg2XmE5G.js";import{U as n}from"./user-round-BNUrar0_.js";import{C as s}from"./clipboard-check-Eo2TgE6U.js";import{G as r}from"./graduation-cap-DX8X8xmD.js";import{F as d}from"./funnel-CQS6Mpx9.js";import{L as o}from"./loader-circle-CRJL7iuh.js";import"./charts-4CCI6hAs.js";const c=[{value:"",label:"Semua Bulan"},{value:"1",label:"Januari"},{value:"2",label:"Februari"},{value:"3",label:"Maret"},{value:"4",label:"April"},{value:"5",label:"Mei"},{value:"6",label:"Juni"},{value:"7",label:"Juli"},{value:"8",label:"Agustus"},{value:"9",label:"September"},{value:"10",label:"Oktober"},{value:"11",label:"November"},{value:"12",label:"Desember"}],m=[{value:"",label:"Semua Semester"},{value:"1",label:"Semester 1"},{value:"2",label:"Semester 2"}],u={border:"1px solid #e6e8ec",borderRadius:14,background:"#fff",boxShadow:"0 8px 24px rgba(15, 23, 42, 0.04)"},h={fontSize:12,color:"#667085",marginBottom:4},p={fontSize:18,color:"#101828",fontWeight:700},g=e=>{if(null==e)return"-";const t=Number(e);return Number.isFinite(t)?t.toFixed(2):"-"},f=()=>{const a=e.c(138);let n;a[0]===Symbol.for("react.memo_cache_sentinel")?(n=(()=>{const e=new Date,t=e.getMonth()+1,i=e.getDate()<10?2:1;return String((t-i-1+12)%12+1)})(),a[0]=n):n=a[0];const s=n,[r,f]=l.useState(""),[y,I]=l.useState(s);let C;a[1]===Symbol.for("react.memo_cache_sentinel")?(C=()=>(e=>{if(!e)return"";const t=Number(e);return!Number.isInteger(t)||t<1||t>12?"":t>=7?"1":"2"})(s),a[1]=C):C=a[1];const[R,$]=l.useState(C),M=r||null,B=R||null,T=y||null;let D;a[2]!==M||a[3]!==B||a[4]!==T?(D={student_id:M,semester:B,month:T},a[2]=M,a[3]=B,a[4]=T,a[5]=D):D=a[5];const{data:G,isFetching:J,isLoading:K,isError:L,error:P}=t(D);let H;a[6]!==G?.data?.students?(H=G?.data?.students||[],a[6]=G?.data?.students,a[7]=H):H=a[7];const U=H;let E;a[8]!==G?.data?.reports?(E=G?.data?.reports||[],a[8]=G?.data?.reports,a[9]=E):E=a[9];const O=E,X=r||String(G?.data?.filters?.selected_student_id||"");let q;e:{if(!X){q=null;break e}let e;a[10]!==X||a[11]!==U?(e=U.find(e=>String(e.student_id)===String(X))||null,a[10]=X,a[11]=U,a[12]=e):e=a[12],q=e}const Q=q;let V;e:{if(!O.length){let e;a[13]===Symbol.for("react.memo_cache_sentinel")?(e={subjects:0,avgAttendanceRate:null,avgAttitude:null,avgFormative:null,avgSummative:null},a[13]=e):e=a[13],V=e;break e}let e;a[14]!==O?(e=e=>O.map(e).filter(x).map(v).filter(j),a[14]=O,a[15]=e):e=a[15];const t=e,i=b,l=O.length;let n,s,r,d,o;a[16]!==t?(n=i(t(S)),a[16]=t,a[17]=n):n=a[17],a[18]!==t?(s=i(t(_)),a[18]=t,a[19]=s):s=a[19],a[20]!==t?(r=i(t(z)),a[20]=t,a[21]=r):r=a[21],a[22]!==t?(d=i(t(k)),a[22]=t,a[23]=d):d=a[23],a[24]!==O.length||a[25]!==n||a[26]!==s||a[27]!==r||a[28]!==d?(o={subjects:l,avgAttendanceRate:n,avgAttitude:s,avgFormative:r,avgSummative:d},a[24]=O.length,a[25]=n,a[26]=s,a[27]=r,a[28]=d,a[29]=o):o=a[29],V=o}const Y=V;let Z,ee,te,ie,le,ae,ne,se,re,de,oe,ce,me,ue,he,pe,ge,fe,xe,ve,je,ye,be,Se,_e,ze,ke,Ne,Fe,We,we;a[30]===Symbol.for("react.memo_cache_sentinel")?(Z={display:"grid",gap:16},ee={...u,padding:16},te={display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,flexWrap:"wrap",marginBottom:12},ie=i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[i.jsx("div",{style:{width:40,height:40,borderRadius:12,background:"#eff8ff",color:"#1570ef",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(d,{size:18})}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#101828"},children:"Filter Laporan Bulanan"}),i.jsx("div",{style:{fontSize:13,color:"#667085"},children:"Pilih siswa, semester, dan bulan untuk melihat rekap per mata pelajaran."})]})]}),a[30]=Z,a[31]=ee,a[32]=te,a[33]=ie):(Z=a[30],ee=a[31],te=a[32],ie=a[33]),a[34]!==J?(le=J?i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,color:"#667085"},children:[i.jsx(o,{size:16,style:{animation:"spin 0.9s linear infinite"}}),"Memuat..."]}):null,a[34]=J,a[35]=le):le=a[35],a[36]!==le?(ae=i.jsxs("div",{style:te,children:[ie,le]}),a[36]=le,a[37]=ae):ae=a[37],a[38]===Symbol.for("react.memo_cache_sentinel")?(ne={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},se={display:"grid",gap:6},re=i.jsx("span",{style:{fontSize:13,color:"#475467"},children:"Siswa"}),a[38]=ne,a[39]=se,a[40]=re):(ne=a[38],se=a[39],re=a[40]),a[41]===Symbol.for("react.memo_cache_sentinel")?(de=e=>f(e.target.value),oe={width:"100%",border:"1px solid #d0d5dd",borderRadius:10,padding:"10px 12px",fontSize:14,outline:"none",background:"#fff"},a[41]=de,a[42]=oe):(de=a[41],oe=a[42]),a[43]!==U?(ce=U.map(N),a[43]=U,a[44]=ce):ce=a[44],a[45]!==X||a[46]!==ce?(me=i.jsxs("label",{style:se,children:[re,i.jsx("select",{value:X,onChange:de,style:oe,children:ce})]}),a[45]=X,a[46]=ce,a[47]=me):me=a[47],a[48]===Symbol.for("react.memo_cache_sentinel")?(ue={display:"grid",gap:6},he=i.jsx("span",{style:{fontSize:13,color:"#475467"},children:"Semester"}),a[48]=ue,a[49]=he):(ue=a[48],he=a[49]),a[50]===Symbol.for("react.memo_cache_sentinel")?(pe=e=>$(e.target.value),ge={width:"100%",border:"1px solid #d0d5dd",borderRadius:10,padding:"10px 12px",fontSize:14,outline:"none",background:"#fff",color:"#344054",cursor:"pointer"},fe=m.map(F),a[50]=pe,a[51]=ge,a[52]=fe):(pe=a[50],ge=a[51],fe=a[52]),a[53]!==R?(xe=i.jsxs("label",{style:ue,children:[he,i.jsx("select",{value:R,onChange:pe,style:ge,children:fe})]}),a[53]=R,a[54]=xe):xe=a[54],a[55]===Symbol.for("react.memo_cache_sentinel")?(ve={display:"grid",gap:6},je=i.jsx("span",{style:{fontSize:13,color:"#475467"},children:"Bulan"}),a[55]=ve,a[56]=je):(ve=a[55],je=a[56]),a[57]===Symbol.for("react.memo_cache_sentinel")?(ye=e=>I(e.target.value),be={width:"100%",border:"1px solid #d0d5dd",borderRadius:10,padding:"10px 12px",fontSize:14,outline:"none",background:"#fff"},Se=c.map(W),a[57]=ye,a[58]=be,a[59]=Se):(ye=a[57],be=a[58],Se=a[59]),a[60]!==y?(_e=i.jsxs("label",{style:ve,children:[je,i.jsx("select",{value:y,onChange:ye,style:be,children:Se})]}),a[60]=y,a[61]=_e):_e=a[61],a[62]!==me||a[63]!==xe||a[64]!==_e?(ze=i.jsxs("div",{style:ne,children:[me,xe,_e]}),a[62]=me,a[63]=xe,a[64]=_e,a[65]=ze):ze=a[65],a[66]!==ae||a[67]!==ze?(ke=i.jsxs("div",{style:ee,children:[ae,ze]}),a[66]=ae,a[67]=ze,a[68]=ke):ke=a[68],a[69]===Symbol.for("react.memo_cache_sentinel")?(Ne={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:12},Fe={...u,padding:14},We=i.jsx("div",{style:h,children:"Siswa"}),we={...p,fontSize:15},a[69]=Ne,a[70]=Fe,a[71]=We,a[72]=we):(Ne=a[69],Fe=a[70],We=a[71],we=a[72]);const Ae=Q?.student_name||"-";let Ie,Ce;a[73]!==Ae?(Ie=i.jsx("div",{style:we,children:Ae}),a[73]=Ae,a[74]=Ie):Ie=a[74],a[75]===Symbol.for("react.memo_cache_sentinel")?(Ce={fontSize:12,color:"#667085",marginTop:4},a[75]=Ce):Ce=a[75];const Re=Q?.nis||"-";let $e,Me,Be,Te,De,Ge,Je;a[76]!==Re?($e=i.jsxs("div",{style:Ce,children:["NIS ",Re]}),a[76]=Re,a[77]=$e):$e=a[77],a[78]!==Ie||a[79]!==$e?(Me=i.jsxs("div",{style:Fe,children:[We,Ie,$e]}),a[78]=Ie,a[79]=$e,a[80]=Me):Me=a[80],a[81]===Symbol.for("react.memo_cache_sentinel")?(Be={...u,padding:14},Te=i.jsx("div",{style:h,children:"Mata Pelajaran"}),a[81]=Be,a[82]=Te):(Be=a[81],Te=a[82]),a[83]!==Y.subjects?(De=i.jsxs("div",{style:Be,children:[Te,i.jsx("div",{style:p,children:Y.subjects})]}),a[83]=Y.subjects,a[84]=De):De=a[84],a[85]===Symbol.for("react.memo_cache_sentinel")?(Ge={...u,padding:14},Je=i.jsx("div",{style:h,children:"Rata-rata Kehadiran"}),a[85]=Ge,a[86]=Je):(Ge=a[85],Je=a[86]);const Ke=null===Y.avgAttendanceRate?"-":`${Y.avgAttendanceRate}%`;let Le,Pe,He,Ue,Ee,Oe,Xe,qe,Qe,Ve,Ye,Ze,et,tt,it,lt,at,nt,st,rt,dt,ot,ct,mt;return a[87]!==Ke?(Le=i.jsxs("div",{style:Ge,children:[Je,i.jsx("div",{style:p,children:Ke})]}),a[87]=Ke,a[88]=Le):Le=a[88],a[89]===Symbol.for("react.memo_cache_sentinel")?(Pe={...u,padding:14},He=i.jsx("div",{style:h,children:"Nilai Sikap"}),a[89]=Pe,a[90]=He):(Pe=a[89],He=a[90]),a[91]!==Y.avgAttitude?(Ue=g(Y.avgAttitude),a[91]=Y.avgAttitude,a[92]=Ue):Ue=a[92],a[93]!==Ue?(Ee=i.jsxs("div",{style:Pe,children:[He,i.jsx("div",{style:p,children:Ue})]}),a[93]=Ue,a[94]=Ee):Ee=a[94],a[95]===Symbol.for("react.memo_cache_sentinel")?(Oe={...u,padding:14},Xe=i.jsx("div",{style:h,children:"Nilai Formatif"}),a[95]=Oe,a[96]=Xe):(Oe=a[95],Xe=a[96]),a[97]!==Y.avgFormative?(qe=g(Y.avgFormative),a[97]=Y.avgFormative,a[98]=qe):qe=a[98],a[99]!==qe?(Qe=i.jsxs("div",{style:Oe,children:[Xe,i.jsx("div",{style:p,children:qe})]}),a[99]=qe,a[100]=Qe):Qe=a[100],a[101]===Symbol.for("react.memo_cache_sentinel")?(Ve={...u,padding:14},Ye=i.jsx("div",{style:h,children:"Nilai Sumatif"}),a[101]=Ve,a[102]=Ye):(Ve=a[101],Ye=a[102]),a[103]!==Y.avgSummative?(Ze=g(Y.avgSummative),a[103]=Y.avgSummative,a[104]=Ze):Ze=a[104],a[105]!==Ze?(et=i.jsxs("div",{style:Ve,children:[Ye,i.jsx("div",{style:p,children:Ze})]}),a[105]=Ze,a[106]=et):et=a[106],a[107]!==Me||a[108]!==De||a[109]!==Le||a[110]!==Ee||a[111]!==Qe||a[112]!==et?(tt=i.jsxs("div",{style:Ne,children:[Me,De,Le,Ee,Qe,et]}),a[107]=Me,a[108]=De,a[109]=Le,a[110]=Ee,a[111]=Qe,a[112]=et,a[113]=tt):tt=a[113],a[114]===Symbol.for("react.memo_cache_sentinel")?(it={...u,padding:12,overflowX:"auto"},lt={width:"100%",borderCollapse:"collapse",minWidth:860},at=i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f9fafb",textAlign:"left"},children:[i.jsx("th",{style:{padding:12,fontSize:12,color:"#475467"},children:"Mata Pelajaran"}),i.jsx("th",{style:{padding:12,fontSize:12,color:"#475467"},children:"Kehadiran"}),i.jsx("th",{style:{padding:12,fontSize:12,color:"#475467"},children:"Nilai Sikap"}),i.jsx("th",{style:{padding:12,fontSize:12,color:"#475467"},children:"Nilai Formatif"}),i.jsx("th",{style:{padding:12,fontSize:12,color:"#475467"},children:"Nilai Sumatif"})]})}),a[114]=it,a[115]=lt,a[116]=at):(it=a[114],lt=a[115],at=a[116]),a[117]!==P?.data?.message||a[118]!==L||a[119]!==K||a[120]!==O?(nt=K?i.jsx("tr",{children:i.jsx("td",{colSpan:5,style:{padding:18,color:"#667085"},children:"Memuat laporan..."})}):L?i.jsx("tr",{children:i.jsx("td",{colSpan:5,style:{padding:18,color:"#b42318"},children:P?.data?.message||"Gagal memuat laporan akademik."})}):0===O.length?i.jsx("tr",{children:i.jsx("td",{colSpan:5,style:{padding:18,color:"#667085"},children:"Data laporan tidak tersedia untuk filter saat ini."})}):O.map(w),a[117]=P?.data?.message,a[118]=L,a[119]=K,a[120]=O,a[121]=nt):nt=a[121],a[122]!==nt?(st=i.jsx("div",{className:"report-desktop-table",style:it,children:i.jsxs("table",{style:lt,children:[at,i.jsx("tbody",{children:nt})]})}),a[122]=nt,a[123]=st):st=a[123],a[124]===Symbol.for("react.memo_cache_sentinel")?(rt={display:"none",gap:12},a[124]=rt):rt=a[124],a[125]!==P?.data?.message||a[126]!==L||a[127]!==K||a[128]!==O?(dt=K?i.jsx("div",{style:{...u,padding:14,color:"#667085"},children:"Memuat laporan..."}):L?i.jsx("div",{style:{...u,padding:14,color:"#b42318"},children:P?.data?.message||"Gagal memuat laporan akademik."}):0===O.length?i.jsx("div",{style:{...u,padding:14,color:"#667085"},children:"Data laporan tidak tersedia untuk filter saat ini."}):O.map(A),a[125]=P?.data?.message,a[126]=L,a[127]=K,a[128]=O,a[129]=dt):dt=a[129],a[130]!==dt?(ot=i.jsx("div",{className:"report-mobile-list",style:rt,children:dt}),a[130]=dt,a[131]=ot):ot=a[131],a[132]===Symbol.for("react.memo_cache_sentinel")?(ct=i.jsx("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 768px) {\n          .report-desktop-table {\n            display: none;\n          }\n\n          .report-mobile-list {\n            display: grid !important;\n          }\n        }\n      "}),a[132]=ct):ct=a[132],a[133]!==ke||a[134]!==tt||a[135]!==st||a[136]!==ot?(mt=i.jsxs("div",{style:Z,children:[ke,tt,st,ot,ct]}),a[133]=ke,a[134]=tt,a[135]=st,a[136]=ot,a[137]=mt):mt=a[137],mt};function x(e){return null!=e}function v(e){return Number(e)}function j(e){return Number.isFinite(e)}function y(e,t){return e+t}function b(e){return e.length?Number((e.reduce(y,0)/e.length).toFixed(2)):null}function S(e){return e.attendance?.rate}function _(e){return e.attitude?.average}function z(e){return e.formative?.average}function k(e){return e.summative?.average}function N(e){return i.jsxs("option",{value:String(e.student_id),children:[e.student_name," - ",e.class_name||"-"]},e.student_id)}function F(e){return i.jsx("option",{value:e.value,children:e.label},e.value||"all")}function W(e){return i.jsx("option",{value:e.value,children:e.label},e.value||"all")}function w(e){return i.jsxs("tr",{style:{borderTop:"1px solid #eaecf0"},children:[i.jsx("td",{style:{padding:12},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(a,{size:15,color:"#1570ef"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,color:"#101828"},children:e.subject_name}),i.jsx("div",{style:{fontSize:12,color:"#667085"},children:e.subject_code||"-"})]})]})}),i.jsx("td",{style:{padding:12},children:i.jsxs("div",{style:{display:"grid",gap:2,fontSize:13},children:[i.jsx("div",{style:{color:"#101828",fontWeight:600},children:null===e.attendance?.rate?"-":`${Number(e.attendance.rate).toFixed(2)}%`}),i.jsxs("div",{style:{color:"#667085"},children:["H:",e.attendance?.hadir||0," I:",e.attendance?.izin||0," S:",e.attendance?.sakit||0," A:",e.attendance?.alpa||0]})]})}),i.jsx("td",{style:{padding:12},children:i.jsxs("div",{style:{display:"grid",gap:4},children:[i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6,fontWeight:600,color:"#101828"},children:[i.jsx(n,{size:14}),g(e.attitude?.average)]}),i.jsx("div",{style:{fontSize:12,color:"#667085",maxWidth:260},children:e.attitude?.note||"-"})]})}),i.jsx("td",{style:{padding:12},children:i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[i.jsx(s,{size:14}),i.jsx("span",{style:{fontWeight:600,color:"#101828"},children:g(e.formative?.average)}),i.jsxs("span",{style:{fontSize:12,color:"#667085"},children:["(",e.formative?.items||0," item)"]})]})}),i.jsx("td",{style:{padding:12},children:i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[i.jsx(r,{size:14}),i.jsx("span",{style:{fontWeight:600,color:"#101828"},children:g(e.summative?.average)}),i.jsxs("span",{style:{fontSize:12,color:"#667085"},children:["(",e.summative?.items||0," item)"]})]})})]},e.subject_id)}function A(e){return i.jsxs("div",{style:{...u,padding:14},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[i.jsx(a,{size:15,color:"#1570ef"}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:700,color:"#101828",fontSize:14},children:e.subject_name}),i.jsx("div",{style:{fontSize:12,color:"#667085"},children:e.subject_code||"-"})]})]}),i.jsxs("div",{style:{display:"grid",gap:8},children:[i.jsxs("div",{children:[i.jsx("div",{style:h,children:"Kehadiran"}),i.jsx("div",{style:{fontSize:13,color:"#101828",fontWeight:600},children:(t=e.attendance,`${null==t?.rate?"-":`${Number(t.rate).toFixed(2)}%`} (H:${t?.hadir||0} I:${t?.izin||0} S:${t?.sakit||0} A:${t?.alpa||0})`)})]}),i.jsxs("div",{children:[i.jsx("div",{style:h,children:"Nilai Sikap"}),i.jsx("div",{style:{fontSize:13,color:"#101828",fontWeight:600},children:g(e.attitude?.average)}),i.jsx("div",{style:{fontSize:12,color:"#667085",marginTop:2},children:e.attitude?.note||"-"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[i.jsxs("div",{children:[i.jsx("div",{style:h,children:"Formatif"}),i.jsxs("div",{style:{fontSize:13,color:"#101828",fontWeight:600},children:[g(e.formative?.average)," (",e.formative?.items||0,")"]})]}),i.jsxs("div",{children:[i.jsx("div",{style:h,children:"Sumatif"}),i.jsxs("div",{style:{fontSize:13,color:"#101828",fontWeight:600},children:[g(e.summative?.average)," (",e.summative?.items||0,")"]})]})]})]})]},`m-${e.subject_id}`);var t}export{f as default};
