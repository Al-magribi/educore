import{k as e,F as s,bn as a,bo as t,bp as n,bq as r,o as i,x as o,T as l,z as c,s as m,M as d,B as u,aM as h}from"./index-TxbSs64b.js";import{r as x}from"./vendor-kOq7Q5-U.js";import{I as p}from"./InfiniteScrollList-U1Ks4nZa.js";import{M as f}from"./index-BttLdxdX.js";import{G as j}from"./git-branch-DTONpvHo.js";import{S as y}from"./school-BSsz7JJi.js";import{P as g}from"./pencil-D3oti55b.js";import{P as b}from"./index-CFuv39oW.js";import{T as _,P as S}from"./trash-2-Q4CxeSSj.js";import{S as k}from"./search-CS2bcV1c.js";import"./charts-DTgBacDZ.js";import"./index-CVJ5d8Nu.js";import"./index-Cv0kXVkw.js";import"./index-BZVnVTbm.js";import"./ActionButton-4PjL455O.js";import"./context-K0_FAUKW.js";import"./useClosable-y2z-qVwf.js";const{Title:w,Text:v}=l,C=l=>{const C=e.c(74),{screens:I}=l,[M,z]=x.useState(1),[J,B]=x.useState("");let P;C[0]===Symbol.for("react.memo_cache_sentinel")?(P=[],C[0]=P):P=C[0];const[F,L]=x.useState(P),[E,D]=x.useState(!1),[H,N]=x.useState(null),[q]=s.useForm();let A;C[1]!==M||C[2]!==J?(A={page:M,limit:10,search:J},C[1]=M,C[2]=J,C[3]=A):A=C[3];const{data:G,isFetching:O,refetch:V}=a(A),[K,Q]=t(),{isLoading:R}=Q,[W,Y]=n(),{isLoading:U}=Y,[X,Z]=r(),{isLoading:$}=Z;let ee,se,ae,te,ne;C[4]!==G||C[5]!==M?(ee=()=>{G?.data&&L(1===M?G.data:e=>{const s=G.data.filter(s=>!e.some(e=>e.id===s.id));return[...e,...s]})},se=[G,M],C[4]=G,C[5]=M,C[6]=ee,C[7]=se):(ee=C[6],se=C[7]),x.useEffect(ee,se),C[8]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>{z(1)},C[8]=ae):ae=C[8],C[9]!==J?(te=[J],C[9]=J,C[10]=te):te=C[10],x.useEffect(ae,te),C[11]!==G?.hasMore||C[12]!==O?(ne=()=>{G?.hasMore&&!O&&z(T)},C[11]=G?.hasMore,C[12]=O,C[13]=ne):ne=C[13];const re=ne;let ie;C[14]!==q?(ie=e=>{const s=void 0===e?null:e;N(s),s?q.setFieldsValue({name:s.name}):q.resetFields(),D(!0)},C[14]=q,C[15]=ie):ie=C[15];const oe=ie;let le;C[16]!==K||C[17]!==H||C[18]!==V||C[19]!==W?(le=async e=>{try{H?(await W({id:H.id,name:e.name}).unwrap(),c.success("Jurusan berhasil diperbarui")):(await K({name:e.name}).unwrap(),c.success("Jurusan berhasil ditambahkan")),D(!1),z(1),V()}catch(s){const e=s;c.error(e?.data?.message||"Terjadi kesalahan")}},C[16]=K,C[17]=H,C[18]=V,C[19]=W,C[20]=le):le=C[20];const ce=le;let me;C[21]!==X||C[22]!==V?(me=async e=>{try{await X(e).unwrap(),c.success("Jurusan dihapus"),z(1),V()}catch(s){const e=s;c.error(e?.data?.message||"Gagal menghapus")}},C[21]=X,C[22]=V,C[23]=me):me=C[23];const de=me;let ue;C[24]!==de||C[25]!==oe||C[26]!==$?(ue=e=>i.jsx(m,{hoverable:!0,style:{height:"100%",display:"flex",flexDirection:"column"},styles:{body:{flex:1,padding:"16px"}},actions:[i.jsx(d,{title:"Edit Nama",children:i.jsx(u,{type:"text",icon:i.jsx(g,{size:14,color:"#faad14"}),onClick:()=>oe(e)})},"edit"),i.jsx(b,{title:"Hapus Jurusan?",description:"Pastikan tidak ada kelas yang terhubung.",onConfirm:()=>de(e.id),okText:"Ya, Hapus",cancelText:"Batal",disabled:$,children:i.jsx(u,{type:"text",danger:!0,icon:i.jsx(_,{size:14}),loading:$})},"delete")],children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[i.jsx("div",{style:{background:"#e6f7ff",padding:10,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(j,{size:24,color:"#1890ff"})}),i.jsxs("div",{children:[i.jsx(w,{level:5,style:{margin:0},children:e.name}),i.jsxs(v,{type:"secondary",style:{fontSize:12,display:"flex",alignItems:"center",gap:4},children:[i.jsx(y,{size:12})," ",e.homebase_name||"Satuan Pendidikan"]})]})]})}),C[24]=de,C[25]=oe,C[26]=$,C[27]=ue):ue=C[27];const he=ue;let xe,pe,fe;C[28]===Symbol.for("react.memo_cache_sentinel")?(xe={padding:24},pe={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:10},C[28]=xe,C[29]=pe):(xe=C[28],pe=C[29]),C[30]===Symbol.for("react.memo_cache_sentinel")?(fe=i.jsx(w,{level:4,style:{margin:0},children:"Daftar Jurusan"}),C[30]=fe):fe=C[30];const je=!!I.xs,ye=I.xs?"stretch":"center",ge=I.xs?"100%":"auto";let be,_e,Se;C[31]!==ge?(be={width:ge},C[31]=ge,C[32]=be):be=C[32],C[33]===Symbol.for("react.memo_cache_sentinel")?(_e=i.jsx(k,{size:16,color:"#bfbfbf"}),C[33]=_e):_e=C[33],C[34]===Symbol.for("react.memo_cache_sentinel")?(Se=e=>B(e.target.value),C[34]=Se):Se=C[34];const ke=I.xs?"100%":260;let we,ve,Ce;C[35]!==ke?(we=i.jsx(o,{placeholder:"Cari jurusan...",prefix:_e,allowClear:!0,onChange:Se,style:{width:ke}}),C[35]=ke,C[36]=we):we=C[36],C[37]===Symbol.for("react.memo_cache_sentinel")?(ve=i.jsx(S,{size:18}),C[37]=ve):ve=C[37],C[38]!==oe?(Ce=()=>oe(null),C[38]=oe,C[39]=Ce):Ce=C[39];const Te=I.xs?"100%":"auto";let Ie,Me,ze;C[40]!==Te?(Ie={width:Te},C[40]=Te,C[41]=Ie):Ie=C[41],C[42]!==Ce||C[43]!==Ie?(Me=i.jsx(u,{type:"primary",icon:ve,onClick:Ce,style:Ie,children:"Tambah"}),C[42]=Ce,C[43]=Ie,C[44]=Me):Me=C[44],C[45]!==je||C[46]!==ye||C[47]!==be||C[48]!==we||C[49]!==Me?(ze=i.jsxs("div",{style:pe,children:[fe,i.jsxs(h,{gap:8,vertical:je,align:ye,justify:"flex-end",style:be,children:[we,Me]})]}),C[45]=je,C[46]=ye,C[47]=be,C[48]=we,C[49]=Me,C[50]=ze):ze=C[50];const Je=G?.hasMore;let Be,Pe;C[51]===Symbol.for("react.memo_cache_sentinel")?(Be={gutter:[16,16],xs:24,sm:12,md:8,lg:6,xl:6,xxl:4},C[51]=Be):Be=C[51],C[52]!==re||C[53]!==O||C[54]!==F||C[55]!==he||C[56]!==Je?(Pe=i.jsx(p,{data:F,loading:O,hasMore:Je,onLoadMore:re,renderItem:he,emptyText:"Belum ada data jurusan",grid:Be}),C[52]=re,C[53]=O,C[54]=F,C[55]=he,C[56]=Je,C[57]=Pe):Pe=C[57];const Fe=H?"Edit Jurusan":"Tambah Jurusan Baru";let Le;C[58]===Symbol.for("react.memo_cache_sentinel")?(Le=()=>D(!1),C[58]=Le):Le=C[58];const Ee=R||U;let De,He,Ne,qe,Ae;return C[59]===Symbol.for("react.memo_cache_sentinel")?(De=[{required:!0,message:"Nama jurusan wajib diisi"}],C[59]=De):De=C[59],C[60]===Symbol.for("react.memo_cache_sentinel")?(He=i.jsx(s.Item,{name:"name",label:"Nama Jurusan",rules:De,help:"Contoh: IPA, IPS, Teknik Komputer Jaringan",children:i.jsx(o,{placeholder:"Masukkan nama jurusan..."})}),C[60]=He):He=C[60],C[61]!==q||C[62]!==ce?(Ne=i.jsx(s,{form:q,layout:"vertical",onFinish:ce,children:He}),C[61]=q,C[62]=ce,C[63]=Ne):Ne=C[63],C[64]!==q.submit||C[65]!==E||C[66]!==Fe||C[67]!==Ee||C[68]!==Ne?(qe=i.jsx(f,{title:Fe,open:E,onCancel:Le,onOk:q.submit,confirmLoading:Ee,destroyOnHidden:!0,children:Ne}),C[64]=q.submit,C[65]=E,C[66]=Fe,C[67]=Ee,C[68]=Ne,C[69]=qe):qe=C[69],C[70]!==ze||C[71]!==Pe||C[72]!==qe?(Ae=i.jsxs("div",{style:xe,children:[ze,Pe,qe]}),C[70]=ze,C[71]=Pe,C[72]=qe,C[73]=Ae):Ae=C[73],Ae};function T(e){return e+1}export{C as default};
