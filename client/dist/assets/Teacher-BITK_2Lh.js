import{aA as e,k as l,T as a,o as s,ag as o,N as r,p as t,A as i,aM as n,q as c,s as d,M as m,B as h,d0 as x,F as u,d1 as p,d2 as j,C as g,x as y,w as f,X as b,d3 as _,d4 as S,d5 as T,d6 as k,bc as v,z as w}from"./index-BMgVGS0W.js";import{r as D}from"./vendor-kOq7Q5-U.js";import{I as z}from"./InfiniteScrollList-DsHuus8o.js";import{B as P}from"./index-Ie9_wHGB.js";import{R as C,a as M}from"./TeamOutlined-Db81Nb3-.js";import{R as B}from"./PhoneOutlined-FET1bm8U.js";import{R as I}from"./DeleteOutlined-Bo7VPVp-.js";import{P as E}from"./index-BVGPo9j5.js";import{T as R}from"./index-hPZPoAPD.js";import{D as A}from"./index-FSaxVOpe.js";import{S as L}from"./index-BaY85u3L.js";import{T as F,P as W}from"./trash-2-CUj98Q3w.js";import{U as G}from"./user-BdspMW-a.js";import{B as N}from"./book-open-DJbUen71.js";import{M as K}from"./index-CDsHpMr4.js";import{S as O}from"./search-DM2czfgU.js";import{U}from"./user-plus-CNMc8FA2.js";import"./charts-CwbbN17O.js";import"./index-uTpWdo5L.js";import"./index-CmsZKls5.js";import"./ActionButton-DfMNmIbJ.js";import"./useClosable-CyYxAYSl.js";import"./context-CW6N5AXl.js";const V=e("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),{Text:q,Title:Q}=a,{useToken:$}=o,H=e=>{const a=l.c(10),{data:o,loading:r,hasMore:t,onLoadMore:i,onEdit:n,onDelete:c}=e;let d,m,h;return a[0]===Symbol.for("react.memo_cache_sentinel")?(d={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},a[0]=d):d=a[0],a[1]!==c||a[2]!==n?(m=e=>s.jsx(J,{item:e,onEdit:n,onDelete:c}),a[1]=c,a[2]=n,a[3]=m):m=a[3],a[4]!==o||a[5]!==t||a[6]!==r||a[7]!==i||a[8]!==m?(h=s.jsx(z,{data:o,loading:r,hasMore:t,onLoadMore:i,height:"75vh",grid:d,renderItem:m}),a[4]=o,a[5]=t,a[6]=r,a[7]=i,a[8]=m,a[9]=h):h=a[9],h},J=e=>{const a=l.c(8),{item:o,onEdit:r,onDelete:t}=e,{token:i}=$();let n;a[0]!==o||a[1]!==t||a[2]!==r?(n=s.jsx(X,{item:o,onEdit:r,onDelete:t}),a[0]=o,a[1]=t,a[2]=r,a[3]=n):n=a[3];const c=n;let d;return a[4]!==c||a[5]!==o.is_homeroom||a[6]!==i?(d=o.is_homeroom?s.jsx(P.Ribbon,{text:"Wali Kelas",color:i.colorSuccess,children:c}):c,a[4]=c,a[5]=o.is_homeroom,a[6]=i,a[7]=d):d=a[7],d},Y=e=>{const a=l.c(30),{allocations:o}=e,{token:r}=$();let t;e:{if(!o){let e;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0],t=e;break e}let e;if(a[1]!==o){const l={};o.forEach(e=>{const a=e.subject_name||"Unknown",s=e.class_name||"Umum";l[a]||(l[a]=[]),l[a].push(s)}),e=Object.entries(l),a[1]=o,a[2]=e}else e=a[2];t=e}const i=t;if(0===i.length){let e,l;return a[3]===Symbol.for("react.memo_cache_sentinel")?(e={padding:"12px 0"},a[3]=e):e=a[3],a[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(n,{justify:"center",align:"center",style:e,children:s.jsx(q,{type:"secondary",style:{fontSize:12,fontStyle:"italic"},children:"Belum ada jadwal mengajar"})}),a[4]=l):l=a[4],l}let c,d,m,h;a[5]===Symbol.for("react.memo_cache_sentinel")?(c={maxWidth:300},d=s.jsx(q,{strong:!0,children:"Detail Jadwal Mengajar"}),a[5]=c,a[6]=d):(c=a[5],d=a[6]),a[7]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(A,{style:{margin:"8px 0"}}),a[7]=m):m=a[7],a[8]!==i||a[9]!==r.colorPrimary?(h=s.jsxs("div",{style:c,children:[d,m,s.jsx(n,{vertical:!0,gap:"small",children:i.map((e,l)=>{const[a,o]=e;return s.jsxs("div",{children:[s.jsxs(n,{align:"center",gap:"small",style:{marginBottom:4},children:[s.jsx(M,{style:{color:r.colorPrimary,fontSize:12}}),s.jsx(q,{style:{fontSize:12,fontWeight:500},children:a})]}),s.jsx(n,{wrap:!0,gap:"4px",children:o.map(Z)})]},l)})})]}),a[8]=i,a[9]=r.colorPrimary,a[10]=h):h=a[10];const u=h;let p;a[11]!==i||a[12]!==r.colorText?(p=i.slice(0,2).map((e,l)=>{const[a,o]=e;return s.jsxs(n,{vertical:!0,gap:2,children:[s.jsx(q,{ellipsis:!0,style:{fontSize:12,fontWeight:600,color:r.colorText},children:a}),s.jsxs(q,{ellipsis:!0,type:"secondary",style:{fontSize:11},children:["Kelas: ",o.slice(0,3).join(", "),o.length>3?" +"+(o.length-3):""]})]},l)}),a[11]=i,a[12]=r.colorText,a[13]=p):p=a[13];const j=`1px dashed ${r.colorBorder}`;let g,y;a[14]!==j||a[15]!==r.borderRadiusSM||a[16]!==r.colorFillAlter?(g={marginTop:4,backgroundColor:r.colorFillAlter,border:j,borderRadius:r.borderRadiusSM,padding:"4px 8px",textAlign:"center",cursor:"pointer",transition:"all 0.2s"},a[14]=j,a[15]=r.borderRadiusSM,a[16]=r.colorFillAlter,a[17]=g):g=a[17],a[18]===Symbol.for("react.memo_cache_sentinel")?(y={fontSize:11},a[18]=y):y=a[18];const f=i.length>2?`+${i.length-2} Mapel Lainnya...`:"Lihat Detail Kelas";let b,_,S,T;return a[19]!==f?(b=s.jsx(q,{type:"secondary",style:y,children:f}),a[19]=f,a[20]=b):b=a[20],a[21]!==b||a[22]!==g?(_=s.jsx("div",{style:g,children:b}),a[21]=b,a[22]=g,a[23]=_):_=a[23],a[24]!==u||a[25]!==_?(S=s.jsx(x,{content:u,title:null,trigger:"hover",placement:"bottom",children:_}),a[24]=u,a[25]=_,a[26]=S):S=a[26],a[27]!==S||a[28]!==p?(T=s.jsxs(n,{vertical:!0,gap:"small",children:[p,S]}),a[27]=S,a[28]=p,a[29]=T):T=a[29],T},X=e=>{const a=l.c(97),{item:o,onEdit:x,onDelete:u}=e,{token:p}=$();let j,g,y,f,b,_,S,T,k,v,w,D,z,P,L,F,W;a[0]===Symbol.for("react.memo_cache_sentinel")?(j={height:"100%",display:"flex",flexDirection:"column"},g={body:{flex:1,padding:16}},a[0]=j,a[1]=g):(j=a[0],g=a[1]),a[2]!==p.colorWarning?(y=s.jsx(r,{style:{color:p.colorWarning}}),a[2]=p.colorWarning,a[3]=y):y=a[3],a[4]!==o||a[5]!==x?(f=()=>x(o),a[4]=o,a[5]=x,a[6]=f):f=a[6],a[7]!==y||a[8]!==f?(b=s.jsx(m,{title:"Edit Data",children:s.jsx(h,{type:"text",icon:y,onClick:f})},"edit"),a[7]=y,a[8]=f,a[9]=b):b=a[9],a[10]!==o.id||a[11]!==u?(_=()=>u(o.id),a[10]=o.id,a[11]=u,a[12]=_):_=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(h,{type:"text",danger:!0,icon:s.jsx(I,{})}),a[13]=S):S=a[13],a[14]!==_?(T=s.jsx(E,{title:"Hapus Guru?",description:"Aksi ini tidak dapat dibatalkan",onConfirm:_,okText:"Ya",cancelText:"Batal",children:S},"delete"),a[14]=_,a[15]=T):T=a[15],a[16]!==b||a[17]!==T?(k=[b,T],a[16]=b,a[17]=T,a[18]=k):k=a[18],a[19]!==p.colorPrimary||a[20]!==p.colorPrimaryBg?(v={backgroundColor:p.colorPrimaryBg,color:p.colorPrimary,fontSize:18},a[19]=p.colorPrimary,a[20]=p.colorPrimaryBg,a[21]=v):v=a[21],a[22]!==o.img_url?(w=!o.img_url&&s.jsx(t,{}),a[22]=o.img_url,a[23]=w):w=a[23],a[24]!==o.full_name?(D=o.full_name?.charAt(0),a[24]=o.full_name,a[25]=D):D=a[25],a[26]!==o.img_url||a[27]!==v||a[28]!==w||a[29]!==D?(z=s.jsx(i,{src:o.img_url,size:48,style:v,icon:w,children:D}),a[26]=o.img_url,a[27]=v,a[28]=w,a[29]=D,a[30]=z):z=a[30],a[31]===Symbol.for("react.memo_cache_sentinel")?(P={fontSize:15},a[31]=P):P=a[31],a[32]!==o.full_name?(L={tooltip:o.full_name},a[32]=o.full_name,a[33]=L):L=a[33],a[34]!==o.full_name||a[35]!==L?(F=s.jsx(q,{strong:!0,style:P,ellipsis:L,children:o.full_name}),a[34]=o.full_name,a[35]=L,a[36]=F):F=a[36],a[37]===Symbol.for("react.memo_cache_sentinel")?(W={width:"fit-content",margin:0,fontSize:10},a[37]=W):W=a[37];const G=o.nip||"-";let N,K,O,U,V,Q,H,J,X,Z,ee,le,ae,se,oe;a[38]!==G?(N=s.jsxs(R,{style:W,children:["NIP: ",G]}),a[38]=G,a[39]=N):N=a[39],a[40]!==F||a[41]!==N?(K=s.jsxs(n,{vertical:!0,gap:2,children:[F,N]}),a[40]=F,a[41]=N,a[42]=K):K=a[42],a[43]===Symbol.for("react.memo_cache_sentinel")?(O={marginTop:16},a[43]=O):O=a[43],a[44]!==o.homeroom_class||a[45]!==p.borderRadiusSM||a[46]!==p.colorSuccess||a[47]!==p.colorSuccessBg||a[48]!==p.colorSuccessBorder||a[49]!==p.colorSuccessText?(U=o.homeroom_class&&s.jsxs("div",{style:{backgroundColor:p.colorSuccessBg,border:`1px solid ${p.colorSuccessBorder}`,padding:"6px 8px",borderRadius:p.borderRadiusSM,display:"flex",alignItems:"center",gap:8},children:[s.jsx(C,{style:{color:p.colorSuccess}}),s.jsxs(q,{style:{fontSize:11,color:p.colorSuccessText,fontWeight:500},ellipsis:!0,children:["Wali Kelas ",o.homeroom_class.name]})]}),a[44]=o.homeroom_class,a[45]=p.borderRadiusSM,a[46]=p.colorSuccess,a[47]=p.colorSuccessBg,a[48]=p.colorSuccessBorder,a[49]=p.colorSuccessText,a[50]=U):U=a[50],a[51]===Symbol.for("react.memo_cache_sentinel")?(V={marginBottom:8},a[51]=V):V=a[51],a[52]!==p.colorTextDescription?(Q=s.jsx(M,{style:{fontSize:12,color:p.colorTextDescription}}),a[52]=p.colorTextDescription,a[53]=Q):Q=a[53],a[54]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx(q,{type:"secondary",style:{fontSize:11,fontWeight:700,textTransform:"uppercase"},children:"Tugas Mengajar"}),a[54]=H):H=a[54],a[55]!==Q?(J=s.jsxs(n,{align:"center",gap:"small",style:V,children:[Q,H]}),a[55]=Q,a[56]=J):J=a[56],a[57]!==p.borderRadiusLG||a[58]!==p.colorFillQuaternary?(X={backgroundColor:p.colorFillQuaternary,borderRadius:p.borderRadiusLG,padding:12},a[57]=p.borderRadiusLG,a[58]=p.colorFillQuaternary,a[59]=X):X=a[59],a[60]!==o.allocations?(Z=s.jsx(Y,{allocations:o.allocations}),a[60]=o.allocations,a[61]=Z):Z=a[61],a[62]!==X||a[63]!==Z?(ee=s.jsx("div",{style:X,children:Z}),a[62]=X,a[63]=Z,a[64]=ee):ee=a[64],a[65]!==J||a[66]!==ee?(le=s.jsxs("div",{children:[J,ee]}),a[65]=J,a[66]=ee,a[67]=le):le=a[67],a[68]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(A,{dashed:!0,style:{margin:"4px 0"}}),a[68]=ae):ae=a[68],a[69]!==p.colorTextDescription?(se=s.jsx(B,{style:{fontSize:12,color:p.colorTextDescription}}),a[69]=p.colorTextDescription,a[70]=se):se=a[70],a[71]!==p.colorTextSecondary?(oe={fontSize:12,color:p.colorTextSecondary},a[71]=p.colorTextSecondary,a[72]=oe):oe=a[72];const re=o.phone||"-";let te,ie,ne,ce,de,me,he;return a[73]!==oe||a[74]!==re?(te=s.jsx(q,{style:oe,children:re}),a[73]=oe,a[74]=re,a[75]=te):te=a[75],a[76]!==se||a[77]!==te?(ie=s.jsxs(n,{align:"center",gap:"small",children:[se,te]}),a[76]=se,a[77]=te,a[78]=ie):ie=a[78],a[79]!==o.email||a[80]!==p.colorTextDescription||a[81]!==p.colorTextSecondary?(ne=o.email&&s.jsxs(n,{align:"center",gap:"small",children:[s.jsx(c,{style:{fontSize:12,color:p.colorTextDescription}}),s.jsx(q,{style:{fontSize:12,color:p.colorTextSecondary},ellipsis:!0,children:o.email})]}),a[79]=o.email,a[80]=p.colorTextDescription,a[81]=p.colorTextSecondary,a[82]=ne):ne=a[82],a[83]!==ie||a[84]!==ne?(ce=s.jsxs(n,{vertical:!0,gap:4,children:[ie,ne]}),a[83]=ie,a[84]=ne,a[85]=ce):ce=a[85],a[86]!==U||a[87]!==le||a[88]!==ce?(de=s.jsxs(n,{vertical:!0,gap:"middle",style:O,children:[U,le,ae,ce]}),a[86]=U,a[87]=le,a[88]=ce,a[89]=de):de=a[89],a[90]!==z||a[91]!==K||a[92]!==de?(me=s.jsx(d.Meta,{avatar:z,title:K,description:de}),a[90]=z,a[91]=K,a[92]=de,a[93]=me):me=a[93],a[94]!==me||a[95]!==k?(he=s.jsx(d,{hoverable:!0,style:j,styles:g,actions:k,children:me}),a[94]=me,a[95]=k,a[96]=he):he=a[96],he};function Z(e,l){return s.jsx(R,{bordered:!1,color:"blue",style:{margin:0,fontSize:11},children:e},l)}const ee=e=>{const a=l.c(38),{open:o,onCancel:r,onSubmit:t,initialValues:i,loading:n}=e,[c]=u.useForm(),{data:m}=p(),{data:x}=j();let _,S;a[0]!==c||a[1]!==i||a[2]!==o?(_=()=>{if(o)if(i){const e=i.allocations||[],l=new Map;e.forEach(e=>{l.has(e.subject_id)||l.set(e.subject_id,{subject_id:e.subject_id,class_ids:[]}),l.get(e.subject_id).class_ids.push(e.class_id)});const a=Array.from(l.values());c.setFieldsValue({...i,homeroom_class_id:i.homeroom_class?.id,allocations:a})}else c.resetFields()},S=[o,i,c],a[0]=c,a[1]=i,a[2]=o,a[3]=_,a[4]=S):(_=a[3],S=a[4]),D.useEffect(_,S);const T=i?"Edit Data Guru":"Tambah Guru Baru";let k,v,w,z,P,C,M,B,I,E,R,O,U,q,Q,$;return a[5]!==c?(k=()=>c.submit(),a[5]=c,a[6]=k):k=a[6],a[7]===Symbol.for("react.memo_cache_sentinel")?(v={allocations:[]},a[7]=v):v=a[7],a[8]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(A,{titlePlacement:"left",children:s.jsxs(b,{children:[s.jsx(G,{size:16})," Data Pribadi"]})}),a[8]=w):w=a[8],a[9]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(g,{span:12,children:s.jsx(u.Item,{name:"full_name",label:"Nama Lengkap",rules:[{required:!0}],children:s.jsx(y,{placeholder:"Nama lengkap dengan gelar"})})}),a[9]=z):z=a[9],a[10]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(g,{span:12,children:s.jsx(u.Item,{name:"username",label:"Username (Login)",rules:[{required:!0}],children:s.jsx(y,{placeholder:"Username unik"})})}),a[10]=P):P=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(g,{span:12,children:s.jsx(u.Item,{name:"nip",label:"NIP / NIY",children:s.jsx(y,{placeholder:"Nomor Induk Pegawai"})})}),a[11]=C):C=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(g,{span:12,children:s.jsx(u.Item,{name:"phone",label:"No. Telepon",children:s.jsx(y,{placeholder:"08..."})})}),a[12]=M):M=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsxs(f,{gutter:16,children:[z,P,C,M,s.jsx(g,{span:24,children:s.jsx(u.Item,{name:"email",label:"Email",children:s.jsx(y,{placeholder:"email@sekolah.sch.id"})})})]}),a[13]=B):B=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(A,{titlePlacement:"left",children:s.jsxs(b,{children:[s.jsx(V,{size:16})," Tugas Tambahan"]})}),a[14]=I):I=a[14],a[15]!==m?(E=m?.map(le),a[15]=m,a[16]=E):E=a[16],a[17]!==E?(R=s.jsx(u.Item,{name:"homeroom_class_id",label:"Wali Kelas (Opsional)",help:"Pilih kelas jika guru ini adalah wali kelas",children:s.jsx(L,{allowClear:!0,placeholder:"Pilih Kelas",options:E})}),a[17]=E,a[18]=R):R=a[18],a[19]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(A,{titlePlacement:"left",children:s.jsxs(b,{children:[s.jsx(N,{size:16})," Mata Pelajaran yang Diampu"]})}),a[19]=O):O=a[19],a[20]!==m||a[21]!==x?(U=s.jsx(u.List,{name:"allocations",children:(e,l)=>{const{add:a,remove:o}=l;return s.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[e.map(e=>{const{key:l,name:a,...r}=e;return s.jsx(d,{size:"small",type:"inner",styles:{body:{padding:"12px",background:"#f9f9f9"}},children:s.jsxs(f,{gutter:12,align:"top",children:[" ",s.jsx(g,{span:8,children:s.jsx(u.Item,{...r,name:[a,"subject_id"],label:"Mata Pelajaran",rules:[{required:!0,message:"Wajib pilih"}],children:s.jsx(L,{placeholder:"Pilih Mapel",showSearch:{optionFilterProp:["label"]},options:x?.map(ae),allowClear:!0,virtual:!1})})}),s.jsx(g,{span:14,children:s.jsx(u.Item,{...r,name:[a,"class_ids"],label:"Daftar Kelas Ajar",rules:[{required:!0,message:"Pilih minimal 1 kelas"}],children:s.jsx(L,{mode:"multiple",placeholder:"Pilih Kelas (Bisa banyak)",allowClear:!0,virtual:!1,maxTagCount:"responsive",options:m?.map(se)})})}),s.jsx(g,{span:2,style:{textAlign:"right",paddingTop:"30px"},children:s.jsx(h,{type:"text",danger:!0,icon:s.jsx(F,{size:18}),onClick:()=>o(a)})})]})},l)}),s.jsx(h,{type:"dashed",onClick:()=>a(),block:!0,icon:s.jsx(W,{size:16}),children:"Tambah Alokasi Mapel"})]})}}),a[20]=m,a[21]=x,a[22]=U):U=a[22],a[23]!==i?(q=!i&&s.jsx(u.Item,{name:"password",hidden:!0,initialValue:"123456",children:s.jsx(y,{})}),a[23]=i,a[24]=q):q=a[24],a[25]!==c||a[26]!==t||a[27]!==R||a[28]!==U||a[29]!==q?(Q=s.jsxs(u,{form:c,layout:"vertical",onFinish:t,initialValues:v,children:[w,B,I,R,O,U,q]}),a[25]=c,a[26]=t,a[27]=R,a[28]=U,a[29]=q,a[30]=Q):Q=a[30],a[31]!==n||a[32]!==r||a[33]!==o||a[34]!==Q||a[35]!==T||a[36]!==k?($=s.jsx(K,{title:T,open:o,onCancel:r,onOk:k,confirmLoading:n,width:750,centered:!0,children:Q}),a[31]=n,a[32]=r,a[33]=o,a[34]=Q,a[35]=T,a[36]=k,a[37]=$):$=a[37],$};function le(e){return{label:e.name,value:e.id}}function ae(e){return{label:e.name,value:e.id}}function se(e){return{label:e.name,value:e.id}}const{Title:oe,Text:re}=a,{Content:te}=v,ie=({screens:e})=>{const[l,a]=D.useState(!1),[o,r]=D.useState(null),[t,i]=D.useState(""),[c,d]=D.useState(1),[m]=D.useState(12),[x,u]=D.useState([]),{data:p,isFetching:j}=_({page:c,limit:m,search:t}),[g,{isLoading:f}]=S(),[b,{isLoading:z}]=T(),[P]=k();D.useEffect(()=>{p?.data&&u(1===c?p.data:e=>{const l=p.data.filter(l=>!e.some(e=>e.id===l.id));return[...e,...l]})},[p,c]),D.useEffect(()=>{d(1)},[t]);return s.jsx(v,{style:{minHeight:"100vh",backgroundColor:"white"},children:s.jsxs(te,{children:[s.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[s.jsxs("div",{children:[s.jsx(oe,{level:3,style:{margin:0},children:"Data Guru"}),s.jsx(re,{type:"secondary",children:"Kelola data guru, wali kelas, dan alokasi mengajar"})]}),s.jsxs(n,{gap:8,vertical:!!e.xs,align:e.xs?"stretch":"center",justify:"flex-end",style:{width:e.xs?"100%":"auto"},children:[s.jsx(y,{placeholder:"Cari Nama / NIP...",prefix:s.jsx(O,{size:16,className:"text-gray-400"}),style:{width:e.xs?"100%":"auto"},allowClear:!0,onChange:e=>i(e.target.value)}),s.jsx(h,{type:"primary",icon:s.jsx(U,{size:18}),onClick:()=>{r(null),a(!0)},style:{width:e.xs?"100%":"auto"},children:"Guru"})]})]}),s.jsx(H,{data:x,loading:j,hasMore:x.length<(p?.total||0),onLoadMore:()=>{!j&&x.length<(p?.total||0)&&d(e=>e+1)},onEdit:e=>{r(e),a(!0)},onDelete:async e=>{try{await P(e).unwrap(),w.success("Guru berhasil dihapus"),d(1)}catch(l){w.error("Gagal menghapus guru")}}}),s.jsx(ee,{open:l,onCancel:()=>{a(!1),r(null)},onSubmit:async e=>{try{const l=[];e.allocations&&e.allocations.length>0&&e.allocations.forEach(e=>{e.class_ids&&Array.isArray(e.class_ids)&&e.class_ids.forEach(a=>{l.push({subject_id:e.subject_id,class_id:a})})});const s={...e,allocations:l};o?(await b({id:o.id,...s}).unwrap(),w.success("Data guru diperbarui"),d(1)):(await g(s).unwrap(),w.success("Guru baru ditambahkan"),d(1)),a(!1),r(null)}catch(l){console.error(l),w.error("Terjadi kesalahan saat menyimpan")}},initialValues:o,loading:f||z})]})})};export{ie as default};
