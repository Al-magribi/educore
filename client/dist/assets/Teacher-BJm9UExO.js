import{az as e,k as l,T as s,o as a,ag as o,N as r,p as t,A as i,aL as n,q as c,s as d,M as m,B as h,cd as x,F as u,ce as p,cf as j,C as g,x as y,w as f,X as b,cg as _,ch as S,ci as T,cj as k,b5 as v,z as w}from"./index-DJgzJvx0.js";import{r as D}from"./vendor-kOq7Q5-U.js";import{I as P}from"./InfiniteScrollList-CRQVFRuq.js";import{B as z}from"./index-B466D75m.js";import{R as M,a as C}from"./TeamOutlined-BpKTH4r9.js";import{R as B}from"./PhoneOutlined-B9xyKFne.js";import{R as I}from"./DeleteOutlined-B97TiFIe.js";import{P as E}from"./index-C1pdE3N8.js";import{T as L}from"./index-A8UrXWNV.js";import{D as R}from"./index-Ddh-PgSR.js";import{S as A}from"./index-ZAZRIL-n.js";import{T as F}from"./trash-2-AcrYeN4V.js";import{P as G}from"./plus-BlyBk2I3.js";import{U as W}from"./user-CZPLsXqQ.js";import{B as N}from"./book-open-Bg2XmE5G.js";import{M as K}from"./index-CWRbA1GH.js";import{S as U}from"./search-DCbkSk8T.js";import{U as q}from"./user-plus-D4x3Gc9O.js";import"./charts-4CCI6hAs.js";import"./index-CsPvpU6M.js";import"./index-BzygXUWO.js";import"./ActionButton-DZkZ4UyV.js";import"./useClosable-BMlLLbW6.js";import"./context-Co2t6AGx.js";import"./useMergedMask-hWGqm8nf.js";const O=e("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),{Text:V,Title:H}=s,{useToken:Q}=o,$=e=>{const s=l.c(10),{data:o,loading:r,hasMore:t,onLoadMore:i,onEdit:n,onDelete:c}=e;let d,m,h;return s[0]===Symbol.for("react.memo_cache_sentinel")?(d={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},s[0]=d):d=s[0],s[1]!==c||s[2]!==n?(m=e=>a.jsx(J,{item:e,onEdit:n,onDelete:c}),s[1]=c,s[2]=n,s[3]=m):m=s[3],s[4]!==o||s[5]!==t||s[6]!==r||s[7]!==i||s[8]!==m?(h=a.jsx(P,{data:o,loading:r,hasMore:t,onLoadMore:i,height:"75vh",grid:d,renderItem:m}),s[4]=o,s[5]=t,s[6]=r,s[7]=i,s[8]=m,s[9]=h):h=s[9],h},J=e=>{const s=l.c(8),{item:o,onEdit:r,onDelete:t}=e,{token:i}=Q();let n;s[0]!==o||s[1]!==t||s[2]!==r?(n=a.jsx(X,{item:o,onEdit:r,onDelete:t}),s[0]=o,s[1]=t,s[2]=r,s[3]=n):n=s[3];const c=n;let d;return s[4]!==c||s[5]!==o.is_homeroom||s[6]!==i?(d=o.is_homeroom?a.jsx(z.Ribbon,{text:"Wali Kelas",color:i.colorSuccess,children:c}):c,s[4]=c,s[5]=o.is_homeroom,s[6]=i,s[7]=d):d=s[7],d},Y=e=>{const s=l.c(30),{allocations:o}=e,{token:r}=Q();let t;e:{if(!o){let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],s[0]=e):e=s[0],t=e;break e}let e;if(s[1]!==o){const l={};o.forEach(e=>{const s=e.subject_name||"Unknown",a=e.class_name||"Umum";l[s]||(l[s]=[]),l[s].push(a)}),e=Object.entries(l),s[1]=o,s[2]=e}else e=s[2];t=e}const i=t;if(0===i.length){let e,l;return s[3]===Symbol.for("react.memo_cache_sentinel")?(e={padding:"12px 0"},s[3]=e):e=s[3],s[4]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(n,{justify:"center",align:"center",style:e,children:a.jsx(V,{type:"secondary",style:{fontSize:12,fontStyle:"italic"},children:"Belum ada jadwal mengajar"})}),s[4]=l):l=s[4],l}let c,d,m,h;s[5]===Symbol.for("react.memo_cache_sentinel")?(c={maxWidth:300},d=a.jsx(V,{strong:!0,children:"Detail Jadwal Mengajar"}),s[5]=c,s[6]=d):(c=s[5],d=s[6]),s[7]===Symbol.for("react.memo_cache_sentinel")?(m=a.jsx(R,{style:{margin:"8px 0"}}),s[7]=m):m=s[7],s[8]!==i||s[9]!==r.colorPrimary?(h=a.jsxs("div",{style:c,children:[d,m,a.jsx(n,{vertical:!0,gap:"small",children:i.map((e,l)=>{const[s,o]=e;return a.jsxs("div",{children:[a.jsxs(n,{align:"center",gap:"small",style:{marginBottom:4},children:[a.jsx(C,{style:{color:r.colorPrimary,fontSize:12}}),a.jsx(V,{style:{fontSize:12,fontWeight:500},children:s})]}),a.jsx(n,{wrap:!0,gap:"4px",children:o.map(Z)})]},l)})})]}),s[8]=i,s[9]=r.colorPrimary,s[10]=h):h=s[10];const u=h;let p;s[11]!==i||s[12]!==r.colorText?(p=i.slice(0,2).map((e,l)=>{const[s,o]=e;return a.jsxs(n,{vertical:!0,gap:2,children:[a.jsx(V,{ellipsis:!0,style:{fontSize:12,fontWeight:600,color:r.colorText},children:s}),a.jsxs(V,{ellipsis:!0,type:"secondary",style:{fontSize:11},children:["Kelas: ",o.slice(0,3).join(", "),o.length>3?" +"+(o.length-3):""]})]},l)}),s[11]=i,s[12]=r.colorText,s[13]=p):p=s[13];const j=`1px dashed ${r.colorBorder}`;let g,y;s[14]!==j||s[15]!==r.borderRadiusSM||s[16]!==r.colorFillAlter?(g={marginTop:4,backgroundColor:r.colorFillAlter,border:j,borderRadius:r.borderRadiusSM,padding:"4px 8px",textAlign:"center",cursor:"pointer",transition:"all 0.2s"},s[14]=j,s[15]=r.borderRadiusSM,s[16]=r.colorFillAlter,s[17]=g):g=s[17],s[18]===Symbol.for("react.memo_cache_sentinel")?(y={fontSize:11},s[18]=y):y=s[18];const f=i.length>2?`+${i.length-2} Mapel Lainnya...`:"Lihat Detail Kelas";let b,_,S,T;return s[19]!==f?(b=a.jsx(V,{type:"secondary",style:y,children:f}),s[19]=f,s[20]=b):b=s[20],s[21]!==b||s[22]!==g?(_=a.jsx("div",{style:g,children:b}),s[21]=b,s[22]=g,s[23]=_):_=s[23],s[24]!==u||s[25]!==_?(S=a.jsx(x,{content:u,title:null,trigger:"hover",placement:"bottom",children:_}),s[24]=u,s[25]=_,s[26]=S):S=s[26],s[27]!==S||s[28]!==p?(T=a.jsxs(n,{vertical:!0,gap:"small",children:[p,S]}),s[27]=S,s[28]=p,s[29]=T):T=s[29],T},X=e=>{const s=l.c(97),{item:o,onEdit:x,onDelete:u}=e,{token:p}=Q();let j,g,y,f,b,_,S,T,k,v,w,D,P,z,A,F,G;s[0]===Symbol.for("react.memo_cache_sentinel")?(j={height:"100%",display:"flex",flexDirection:"column"},g={body:{flex:1,padding:16}},s[0]=j,s[1]=g):(j=s[0],g=s[1]),s[2]!==p.colorWarning?(y=a.jsx(r,{style:{color:p.colorWarning}}),s[2]=p.colorWarning,s[3]=y):y=s[3],s[4]!==o||s[5]!==x?(f=()=>x(o),s[4]=o,s[5]=x,s[6]=f):f=s[6],s[7]!==y||s[8]!==f?(b=a.jsx(m,{title:"Edit Data",children:a.jsx(h,{type:"text",icon:y,onClick:f})},"edit"),s[7]=y,s[8]=f,s[9]=b):b=s[9],s[10]!==o.id||s[11]!==u?(_=()=>u(o.id),s[10]=o.id,s[11]=u,s[12]=_):_=s[12],s[13]===Symbol.for("react.memo_cache_sentinel")?(S=a.jsx(h,{type:"text",danger:!0,icon:a.jsx(I,{})}),s[13]=S):S=s[13],s[14]!==_?(T=a.jsx(E,{title:"Hapus Guru?",description:"Aksi ini tidak dapat dibatalkan",onConfirm:_,okText:"Ya",cancelText:"Batal",children:S},"delete"),s[14]=_,s[15]=T):T=s[15],s[16]!==b||s[17]!==T?(k=[b,T],s[16]=b,s[17]=T,s[18]=k):k=s[18],s[19]!==p.colorPrimary||s[20]!==p.colorPrimaryBg?(v={backgroundColor:p.colorPrimaryBg,color:p.colorPrimary,fontSize:18},s[19]=p.colorPrimary,s[20]=p.colorPrimaryBg,s[21]=v):v=s[21],s[22]!==o.img_url?(w=!o.img_url&&a.jsx(t,{}),s[22]=o.img_url,s[23]=w):w=s[23],s[24]!==o.full_name?(D=o.full_name?.charAt(0),s[24]=o.full_name,s[25]=D):D=s[25],s[26]!==o.img_url||s[27]!==v||s[28]!==w||s[29]!==D?(P=a.jsx(i,{src:o.img_url,size:48,style:v,icon:w,children:D}),s[26]=o.img_url,s[27]=v,s[28]=w,s[29]=D,s[30]=P):P=s[30],s[31]===Symbol.for("react.memo_cache_sentinel")?(z={fontSize:15},s[31]=z):z=s[31],s[32]!==o.full_name?(A={tooltip:o.full_name},s[32]=o.full_name,s[33]=A):A=s[33],s[34]!==o.full_name||s[35]!==A?(F=a.jsx(V,{strong:!0,style:z,ellipsis:A,children:o.full_name}),s[34]=o.full_name,s[35]=A,s[36]=F):F=s[36],s[37]===Symbol.for("react.memo_cache_sentinel")?(G={width:"fit-content",margin:0,fontSize:10},s[37]=G):G=s[37];const W=o.nip||"-";let N,K,U,q,O,H,$,J,X,Z,ee,le,se,ae,oe;s[38]!==W?(N=a.jsxs(L,{style:G,children:["NIP: ",W]}),s[38]=W,s[39]=N):N=s[39],s[40]!==F||s[41]!==N?(K=a.jsxs(n,{vertical:!0,gap:2,children:[F,N]}),s[40]=F,s[41]=N,s[42]=K):K=s[42],s[43]===Symbol.for("react.memo_cache_sentinel")?(U={marginTop:16},s[43]=U):U=s[43],s[44]!==o.homeroom_class||s[45]!==p.borderRadiusSM||s[46]!==p.colorSuccess||s[47]!==p.colorSuccessBg||s[48]!==p.colorSuccessBorder||s[49]!==p.colorSuccessText?(q=o.homeroom_class&&a.jsxs("div",{style:{backgroundColor:p.colorSuccessBg,border:`1px solid ${p.colorSuccessBorder}`,padding:"6px 8px",borderRadius:p.borderRadiusSM,display:"flex",alignItems:"center",gap:8},children:[a.jsx(M,{style:{color:p.colorSuccess}}),a.jsxs(V,{style:{fontSize:11,color:p.colorSuccessText,fontWeight:500},ellipsis:!0,children:["Wali Kelas ",o.homeroom_class.name]})]}),s[44]=o.homeroom_class,s[45]=p.borderRadiusSM,s[46]=p.colorSuccess,s[47]=p.colorSuccessBg,s[48]=p.colorSuccessBorder,s[49]=p.colorSuccessText,s[50]=q):q=s[50],s[51]===Symbol.for("react.memo_cache_sentinel")?(O={marginBottom:8},s[51]=O):O=s[51],s[52]!==p.colorTextDescription?(H=a.jsx(C,{style:{fontSize:12,color:p.colorTextDescription}}),s[52]=p.colorTextDescription,s[53]=H):H=s[53],s[54]===Symbol.for("react.memo_cache_sentinel")?($=a.jsx(V,{type:"secondary",style:{fontSize:11,fontWeight:700,textTransform:"uppercase"},children:"Tugas Mengajar"}),s[54]=$):$=s[54],s[55]!==H?(J=a.jsxs(n,{align:"center",gap:"small",style:O,children:[H,$]}),s[55]=H,s[56]=J):J=s[56],s[57]!==p.borderRadiusLG||s[58]!==p.colorFillQuaternary?(X={backgroundColor:p.colorFillQuaternary,borderRadius:p.borderRadiusLG,padding:12},s[57]=p.borderRadiusLG,s[58]=p.colorFillQuaternary,s[59]=X):X=s[59],s[60]!==o.allocations?(Z=a.jsx(Y,{allocations:o.allocations}),s[60]=o.allocations,s[61]=Z):Z=s[61],s[62]!==X||s[63]!==Z?(ee=a.jsx("div",{style:X,children:Z}),s[62]=X,s[63]=Z,s[64]=ee):ee=s[64],s[65]!==J||s[66]!==ee?(le=a.jsxs("div",{children:[J,ee]}),s[65]=J,s[66]=ee,s[67]=le):le=s[67],s[68]===Symbol.for("react.memo_cache_sentinel")?(se=a.jsx(R,{dashed:!0,style:{margin:"4px 0"}}),s[68]=se):se=s[68],s[69]!==p.colorTextDescription?(ae=a.jsx(B,{style:{fontSize:12,color:p.colorTextDescription}}),s[69]=p.colorTextDescription,s[70]=ae):ae=s[70],s[71]!==p.colorTextSecondary?(oe={fontSize:12,color:p.colorTextSecondary},s[71]=p.colorTextSecondary,s[72]=oe):oe=s[72];const re=o.phone||"-";let te,ie,ne,ce,de,me,he;return s[73]!==oe||s[74]!==re?(te=a.jsx(V,{style:oe,children:re}),s[73]=oe,s[74]=re,s[75]=te):te=s[75],s[76]!==ae||s[77]!==te?(ie=a.jsxs(n,{align:"center",gap:"small",children:[ae,te]}),s[76]=ae,s[77]=te,s[78]=ie):ie=s[78],s[79]!==o.email||s[80]!==p.colorTextDescription||s[81]!==p.colorTextSecondary?(ne=o.email&&a.jsxs(n,{align:"center",gap:"small",children:[a.jsx(c,{style:{fontSize:12,color:p.colorTextDescription}}),a.jsx(V,{style:{fontSize:12,color:p.colorTextSecondary},ellipsis:!0,children:o.email})]}),s[79]=o.email,s[80]=p.colorTextDescription,s[81]=p.colorTextSecondary,s[82]=ne):ne=s[82],s[83]!==ie||s[84]!==ne?(ce=a.jsxs(n,{vertical:!0,gap:4,children:[ie,ne]}),s[83]=ie,s[84]=ne,s[85]=ce):ce=s[85],s[86]!==q||s[87]!==le||s[88]!==ce?(de=a.jsxs(n,{vertical:!0,gap:"middle",style:U,children:[q,le,se,ce]}),s[86]=q,s[87]=le,s[88]=ce,s[89]=de):de=s[89],s[90]!==P||s[91]!==K||s[92]!==de?(me=a.jsx(d.Meta,{avatar:P,title:K,description:de}),s[90]=P,s[91]=K,s[92]=de,s[93]=me):me=s[93],s[94]!==me||s[95]!==k?(he=a.jsx(d,{hoverable:!0,style:j,styles:g,actions:k,children:me}),s[94]=me,s[95]=k,s[96]=he):he=s[96],he};function Z(e,l){return a.jsx(L,{bordered:!1,color:"blue",style:{margin:0,fontSize:11},children:e},l)}const ee=e=>{const s=l.c(38),{open:o,onCancel:r,onSubmit:t,initialValues:i,loading:n}=e,[c]=u.useForm(),{data:m}=p(),{data:x}=j();let _,S;s[0]!==c||s[1]!==i||s[2]!==o?(_=()=>{if(o)if(i){const e=i.allocations||[],l=new Map;e.forEach(e=>{l.has(e.subject_id)||l.set(e.subject_id,{subject_id:e.subject_id,class_ids:[]}),l.get(e.subject_id).class_ids.push(e.class_id)});const s=Array.from(l.values());c.setFieldsValue({...i,homeroom_class_id:i.homeroom_class?.id,allocations:s})}else c.resetFields()},S=[o,i,c],s[0]=c,s[1]=i,s[2]=o,s[3]=_,s[4]=S):(_=s[3],S=s[4]),D.useEffect(_,S);const T=i?"Edit Data Guru":"Tambah Guru Baru";let k,v,w,P,z,M,C,B,I,E,L,U,q,V,H,Q;return s[5]!==c?(k=()=>c.submit(),s[5]=c,s[6]=k):k=s[6],s[7]===Symbol.for("react.memo_cache_sentinel")?(v={allocations:[]},s[7]=v):v=s[7],s[8]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(R,{titlePlacement:"left",children:a.jsxs(b,{children:[a.jsx(W,{size:16})," Data Pribadi"]})}),s[8]=w):w=s[8],s[9]===Symbol.for("react.memo_cache_sentinel")?(P=a.jsx(g,{span:12,children:a.jsx(u.Item,{name:"full_name",label:"Nama Lengkap",rules:[{required:!0}],children:a.jsx(y,{placeholder:"Nama lengkap dengan gelar"})})}),s[9]=P):P=s[9],s[10]===Symbol.for("react.memo_cache_sentinel")?(z=a.jsx(g,{span:12,children:a.jsx(u.Item,{name:"username",label:"Username (Login)",rules:[{required:!0}],children:a.jsx(y,{placeholder:"Username unik"})})}),s[10]=z):z=s[10],s[11]===Symbol.for("react.memo_cache_sentinel")?(M=a.jsx(g,{span:12,children:a.jsx(u.Item,{name:"nip",label:"NIP / NIY",children:a.jsx(y,{placeholder:"Nomor Induk Pegawai"})})}),s[11]=M):M=s[11],s[12]===Symbol.for("react.memo_cache_sentinel")?(C=a.jsx(g,{span:12,children:a.jsx(u.Item,{name:"phone",label:"No. Telepon",children:a.jsx(y,{placeholder:"08..."})})}),s[12]=C):C=s[12],s[13]===Symbol.for("react.memo_cache_sentinel")?(B=a.jsxs(f,{gutter:16,children:[P,z,M,C,a.jsx(g,{span:24,children:a.jsx(u.Item,{name:"email",label:"Email",children:a.jsx(y,{placeholder:"email@sekolah.sch.id"})})})]}),s[13]=B):B=s[13],s[14]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(R,{titlePlacement:"left",children:a.jsxs(b,{children:[a.jsx(O,{size:16})," Tugas Tambahan"]})}),s[14]=I):I=s[14],s[15]!==m?(E=m?.map(le),s[15]=m,s[16]=E):E=s[16],s[17]!==E?(L=a.jsx(u.Item,{name:"homeroom_class_id",label:"Wali Kelas (Opsional)",help:"Pilih kelas jika guru ini adalah wali kelas",children:a.jsx(A,{allowClear:!0,placeholder:"Pilih Kelas",options:E})}),s[17]=E,s[18]=L):L=s[18],s[19]===Symbol.for("react.memo_cache_sentinel")?(U=a.jsx(R,{titlePlacement:"left",children:a.jsxs(b,{children:[a.jsx(N,{size:16})," Mata Pelajaran yang Diampu"]})}),s[19]=U):U=s[19],s[20]!==m||s[21]!==x?(q=a.jsx(u.List,{name:"allocations",children:(e,l)=>{const{add:s,remove:o}=l;return a.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[e.map(e=>{const{key:l,name:s,...r}=e;return a.jsx(d,{size:"small",type:"inner",styles:{body:{padding:"12px",background:"#f9f9f9"}},children:a.jsxs(f,{gutter:12,align:"top",children:[" ",a.jsx(g,{span:8,children:a.jsx(u.Item,{...r,name:[s,"subject_id"],label:"Mata Pelajaran",rules:[{required:!0,message:"Wajib pilih"}],children:a.jsx(A,{placeholder:"Pilih Mapel",showSearch:{optionFilterProp:["label"]},options:x?.map(se),allowClear:!0,virtual:!1})})}),a.jsx(g,{span:14,children:a.jsx(u.Item,{...r,name:[s,"class_ids"],label:"Daftar Kelas Ajar",rules:[{required:!0,message:"Pilih minimal 1 kelas"}],children:a.jsx(A,{mode:"multiple",placeholder:"Pilih Kelas (Bisa banyak)",allowClear:!0,virtual:!1,maxTagCount:"responsive",options:m?.map(ae)})})}),a.jsx(g,{span:2,style:{textAlign:"right",paddingTop:"30px"},children:a.jsx(h,{type:"text",danger:!0,icon:a.jsx(F,{size:18}),onClick:()=>o(s)})})]})},l)}),a.jsx(h,{type:"dashed",onClick:()=>s(),block:!0,icon:a.jsx(G,{size:16}),children:"Tambah Alokasi Mapel"})]})}}),s[20]=m,s[21]=x,s[22]=q):q=s[22],s[23]!==i?(V=!i&&a.jsx(u.Item,{name:"password",hidden:!0,initialValue:"123456",children:a.jsx(y,{})}),s[23]=i,s[24]=V):V=s[24],s[25]!==c||s[26]!==t||s[27]!==L||s[28]!==q||s[29]!==V?(H=a.jsxs(u,{form:c,layout:"vertical",onFinish:t,initialValues:v,children:[w,B,I,L,U,q,V]}),s[25]=c,s[26]=t,s[27]=L,s[28]=q,s[29]=V,s[30]=H):H=s[30],s[31]!==n||s[32]!==r||s[33]!==o||s[34]!==H||s[35]!==T||s[36]!==k?(Q=a.jsx(K,{title:T,open:o,onCancel:r,onOk:k,confirmLoading:n,width:750,centered:!0,children:H}),s[31]=n,s[32]=r,s[33]=o,s[34]=H,s[35]=T,s[36]=k,s[37]=Q):Q=s[37],Q};function le(e){return{label:e.name,value:e.id}}function se(e){return{label:e.name,value:e.id}}function ae(e){return{label:e.name,value:e.id}}const{Title:oe,Text:re}=s,{Content:te}=v,ie=({screens:e})=>{const[l,s]=D.useState(!1),[o,r]=D.useState(null),[t,i]=D.useState(""),[c,d]=D.useState(1),[m]=D.useState(12),[x,u]=D.useState([]),{data:p,isFetching:j}=_({page:c,limit:m,search:t}),[g,{isLoading:f}]=S(),[b,{isLoading:P}]=T(),[z]=k();D.useEffect(()=>{p?.data&&u(1===c?p.data:e=>{const l=p.data.filter(l=>!e.some(e=>e.id===l.id));return[...e,...l]})},[p,c]),D.useEffect(()=>{d(1)},[t]);return a.jsx(v,{style:{minHeight:"100vh",backgroundColor:"white"},children:a.jsxs(te,{children:[a.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[a.jsxs("div",{children:[a.jsx(oe,{level:3,style:{margin:0},children:"Data Guru"}),a.jsx(re,{type:"secondary",children:"Kelola data guru, wali kelas, dan alokasi mengajar"})]}),a.jsxs(n,{gap:8,vertical:!!e.xs,align:e.xs?"stretch":"center",justify:"flex-end",style:{width:e.xs?"100%":"auto"},children:[a.jsx(y,{placeholder:"Cari Nama / NIP...",prefix:a.jsx(U,{size:16,className:"text-gray-400"}),style:{width:e.xs?"100%":"auto"},allowClear:!0,onChange:e=>i(e.target.value)}),a.jsx(h,{type:"primary",icon:a.jsx(q,{size:18}),onClick:()=>{r(null),s(!0)},style:{width:e.xs?"100%":"auto"},children:"Guru"})]})]}),a.jsx($,{data:x,loading:j,hasMore:x.length<(p?.total||0),onLoadMore:()=>{!j&&x.length<(p?.total||0)&&d(e=>e+1)},onEdit:e=>{r(e),s(!0)},onDelete:async e=>{try{await z(e).unwrap(),w.success("Guru berhasil dihapus"),d(1)}catch(l){w.error("Gagal menghapus guru")}}}),a.jsx(ee,{open:l,onCancel:()=>{s(!1),r(null)},onSubmit:async e=>{try{const l=[];e.allocations&&e.allocations.length>0&&e.allocations.forEach(e=>{e.class_ids&&Array.isArray(e.class_ids)&&e.class_ids.forEach(s=>{l.push({subject_id:e.subject_id,class_id:s})})});const a={...e,allocations:l};o?(await b({id:o.id,...a}).unwrap(),w.success("Data guru diperbarui"),d(1)):(await g(a).unwrap(),w.success("Guru baru ditambahkan"),d(1)),s(!1),r(null)}catch(l){console.error(l),w.error("Terjadi kesalahan saat menyimpan")}},initialValues:o,loading:f||P})]})})};export{ie as default};
