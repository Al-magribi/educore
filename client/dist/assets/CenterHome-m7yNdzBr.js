import{I as e,y as t,k as s,F as a,H as i,J as n,o as l,D as r,K as o,x as c,C as d,s as m,p as h,L as f,M as u,T as x,N as j,B as p,O as g,P as y,Q as b,S as v,w as S}from"./index-IfHJv5WL.js";import{r as k}from"./vendor-kOq7Q5-U.js";import{I as _}from"./InfiniteScrollList-Chj7-TfW.js";import{a as w,S as M}from"./index-CPaPbrqg.js";import{M as C}from"./index-CQKi3m8Y.js";import{S as z}from"./index-ClObTdl7.js";import{R as T,a as I}from"./TeamOutlined-jVCeJ4LY.js";import{E as O}from"./index-BSxM1sbQ.js";import{T as D}from"./index-BM57nN4D.js";import{R as B}from"./InfoCircleOutlined-Bgm2Tc4t.js";import{P as L}from"./index-BodHHeJo.js";import{R as P}from"./DeleteOutlined-BgrfJ2kJ.js";import"./charts-DyIopC3t.js";import"./index-C5Y2dds-.js";import"./ActionButton-CwPtgC52.js";var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"};function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},H.apply(this,arguments)}const R=(t,s)=>k.createElement(e,H({},t,{ref:s,icon:A})),F=k.forwardRef(R);var E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M874 120H622c-3.3 0-6 2.7-6 6v56c0 3.3 2.7 6 6 6h160.4L583.1 387.3c-50-38.5-111-59.3-175.1-59.3-76.9 0-149.3 30-203.6 84.4S120 539.1 120 616s30 149.3 84.4 203.6C258.7 874 331.1 904 408 904s149.3-30 203.6-84.4C666 765.3 696 692.9 696 616c0-64.1-20.8-124.9-59.2-174.9L836 241.9V402c0 3.3 2.7 6 6 6h56c3.3 0 6-2.7 6-6V150c0-16.5-13.5-30-30-30zM408 828c-116.9 0-212-95.1-212-212s95.1-212 212-212 212 95.1 212 212-95.1 212-212 212z"}}]},name:"man",theme:"outlined"};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},V.apply(this,arguments)}const K=(t,s)=>k.createElement(e,V({},t,{ref:s,icon:E})),W=k.forwardRef(K);var N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M712.8 548.8c53.6-53.6 83.2-125 83.2-200.8 0-75.9-29.5-147.2-83.2-200.8C659.2 93.6 587.8 64 512 64s-147.2 29.5-200.8 83.2C257.6 200.9 228 272.1 228 348c0 63.8 20.9 124.4 59.4 173.9 7.3 9.4 15.2 18.3 23.7 26.9 8.5 8.5 17.5 16.4 26.8 23.7 39.6 30.8 86.3 50.4 136.1 57V736H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h114v140c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V812h114c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H550V629.5c61.5-8.2 118.2-36.1 162.8-80.7zM512 556c-55.6 0-107.7-21.6-147.1-60.9C325.6 455.8 304 403.6 304 348s21.6-107.7 60.9-147.1C404.2 161.5 456.4 140 512 140s107.7 21.6 147.1 60.9C698.4 240.2 720 292.4 720 348s-21.6 107.7-60.9 147.1C619.7 534.4 567.6 556 512 556z"}}]},name:"woman",theme:"outlined"};function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},q.apply(this,arguments)}const G=(t,s)=>k.createElement(e,q({},t,{ref:s,icon:N})),J=k.forwardRef(G),{TextArea:Y}=t,{Option:Q}=w,U=e=>{const o=s.c(25),{open:c,onCancel:d,onSuccess:m,initialData:h}=e,[f]=a.useForm(),[u,x]=i(),{isLoading:j}=x,[p,g]=n(),{isLoading:y}=g;let b,v,S;o[0]!==f||o[1]!==h||o[2]!==c?(b=()=>{c&&(h?f.setFieldsValue(h):f.resetFields())},v=[c,h,f],o[0]=f,o[1]=h,o[2]=c,o[3]=b,o[4]=v):(b=o[3],v=o[4]),k.useEffect(b,v),o[5]!==u||o[6]!==f||o[7]!==h||o[8]!==m||o[9]!==p?(S=async e=>{try{h?(await p({id:h.id,...e}).unwrap(),r.success("Berhasil diperbarui")):(await u(e).unwrap(),r.success("Berhasil ditambahkan")),f.resetFields(),m()}catch(t){const e=t;r.error(e?.data?.message||"Terjadi kesalahan saat menyimpan")}},o[5]=u,o[6]=f,o[7]=h,o[8]=m,o[9]=p,o[10]=S):S=o[10];const _=S,M=h?"Edit Homebase":"Tambah Homebase",z=j||y;let T,I,O,D,B,L;return o[11]===Symbol.for("react.memo_cache_sentinel")?(T=l.jsx(a.Item,{name:"name",label:"Nama Satuan Pendidikan",rules:[{required:!0,message:"Nama wajib diisi"}],children:l.jsx(t,{placeholder:"Contoh: SMA Islam Terpadu"})}),o[11]=T):T=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(I=[{required:!0,message:"Silakan pilih jenjang satuan"}],o[12]=I):I=o[12],o[13]===Symbol.for("react.memo_cache_sentinel")?(O=l.jsx(a.Item,{name:"level",label:"Jenjang / Level Satuan",rules:I,children:l.jsxs(w,{placeholder:"Pilih Jenjang",children:[l.jsx(Q,{value:"SD / MI",children:"SD / MI"}),l.jsx(Q,{value:"SMP / MTS",children:"SMP / MTS"}),l.jsx(Q,{value:"SMA / SMK / MA",children:"SMA / SMK / MA"})]})}),o[13]=O):O=o[13],o[14]===Symbol.for("react.memo_cache_sentinel")?(D=l.jsx(a.Item,{name:"description",label:"Deskripsi / Alamat Singkat",children:l.jsx(Y,{rows:3,placeholder:"Keterangan tambahan..."})}),o[14]=D):D=o[14],o[15]!==f||o[16]!==_?(B=l.jsxs(a,{form:f,layout:"vertical",onFinish:_,preserve:!1,children:[T,O,D]}),o[15]=f,o[16]=_,o[17]=B):B=o[17],o[18]!==f.submit||o[19]!==d||o[20]!==c||o[21]!==B||o[22]!==M||o[23]!==z?(L=l.jsx(C,{title:M,open:c,onCancel:d,onOk:f.submit,confirmLoading:z,destroyOnHidden:!0,children:B}),o[18]=f.submit,o[19]=d,o[20]=c,o[21]=B,o[22]=M,o[23]=z,o[24]=L):L=o[24],L},X=e=>{const t=s.c(39),{open:a,homebaseId:i,onCancel:n}=e,[r,f]=k.useState(null),[u,x]=o(),{data:j,isFetching:p}=x;let g,y,b,v,S;t[0]!==i||t[1]!==a||t[2]!==r||t[3]!==u?(g=()=>{a&&i&&u({id:i,periode_id:r})},y=[a,i,r,u],t[0]=i,t[1]=a,t[2]=r,t[3]=u,t[4]=g,t[5]=y):(g=t[4],y=t[5]),k.useEffect(g,y),t[6]!==j||t[7]!==r?(b=()=>{j?.data?.selected_periode_id&&!r&&f(j.data.selected_periode_id)},t[6]=j,t[7]=r,t[8]=b):b=t[8],t[9]!==j?(v=[j],t[9]=j,t[10]=v):v=t[10],k.useEffect(b,v),t[11]!==j?.data?.stats?(S=j?.data?.stats||{},t[11]=j?.data?.stats,t[12]=S):S=t[12];const _=S;let D;t[13]!==j?.data?.class_composition?(D=j?.data?.class_composition||[],t[13]=j?.data?.class_composition,t[14]=D):D=t[14];const B=D;let L;t[15]!==j?.data?.periods?(L=j?.data?.periods||[],t[15]=j?.data?.periods,t[16]=L):L=t[16];const P=L;let A,H,R,E;t[17]!==n?(A=()=>{f(null),n()},t[17]=n,t[18]=A):A=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(H={marginBottom:20,display:"flex",justifyContent:"flex-end",alignItems:"center"},R=l.jsx("span",{style:{marginRight:10},children:"Pilih Periode:"}),t[19]=H,t[20]=R):(H=t[19],R=t[20]),t[21]===Symbol.for("react.memo_cache_sentinel")?(E={width:200},t[21]=E):E=t[21];const V=Number(r);let K,N,q,G,Y;return t[22]===Symbol.for("react.memo_cache_sentinel")?(K=e=>f(e),t[22]=K):K=t[22],t[23]!==P?(N=P.map(Z),t[23]=P,t[24]=N):N=t[24],t[25]!==p||t[26]!==V||t[27]!==N?(q=l.jsxs("div",{style:H,children:[R,l.jsx(w,{style:E,value:V,onChange:K,placeholder:"Pilih Periode",loading:p,children:N})]}),t[25]=p,t[26]=V,t[27]=N,t[28]=q):q=t[28],t[29]!==j||t[30]!==B||t[31]!==p||t[32]!==_?(G=p&&!j?l.jsx("div",{style:{textAlign:"center",padding:50},children:l.jsx(M,{})}):l.jsxs(l.Fragment,{children:[l.jsxs(c,{gutter:[16,16],children:[l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#fffbe6"},children:l.jsx(z,{title:"Total Guru",value:_.teachers?.total||0,prefix:l.jsx(h,{}),valueStyle:{color:"#d48806"}})})}),l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#e6f7ff"},children:l.jsx(z,{title:"Total Siswa",value:_.students?.total||0,prefix:l.jsx(T,{}),valueStyle:{color:"#096dd9"}})})}),l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#fff1f0"},children:l.jsx(z,{title:"Total Kelas",value:_.classes?.total||0,prefix:l.jsx(F,{}),valueStyle:{color:"#cf1322"}})})}),l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#f6ffed"},children:l.jsx(z,{title:"Total Pelajaran",value:_.subjects?.total||0,prefix:l.jsx(I,{}),valueStyle:{color:"#389e0d"}})})})]}),l.jsxs(c,{gutter:[16,16],style:{marginTop:20},children:[l.jsx(d,{xs:24,md:16,children:l.jsx(m,{title:"Komposisi Siswa per Kelas",size:"small",children:l.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:0===B.length?l.jsx(O,{description:"Belum ada kelas/siswa"}):l.jsx(c,{gutter:[10,10],children:B.map($)})})})}),l.jsx(d,{xs:24,md:8,children:l.jsxs(m,{title:"Komposisi Guru",size:"small",children:[l.jsxs("div",{style:{marginBottom:15,background:"#fff7e6",padding:15,borderRadius:8,display:"flex",alignItems:"center"},children:[l.jsx(W,{style:{fontSize:24,color:"#fa8c16",marginRight:15}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:12,color:"#888"},children:"Ikhwan (Laki-laki)"}),l.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:_.teachers?.laki||0})]})]}),l.jsxs("div",{style:{background:"#fff0f6",padding:15,borderRadius:8,display:"flex",alignItems:"center"},children:[l.jsx(J,{style:{fontSize:24,color:"#eb2f96",marginRight:15}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:12,color:"#888"},children:"Akhwat (Perempuan)"}),l.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:_.teachers?.perempuan||0})]})]})]})})]})]}),t[29]=j,t[30]=B,t[31]=p,t[32]=_,t[33]=G):G=t[33],t[34]!==a||t[35]!==q||t[36]!==G||t[37]!==A?(Y=l.jsxs(C,{title:"Dashboard Detail Satuan Pendidikan",open:a,onCancel:A,width:1e3,footer:null,children:[q,G]}),t[34]=a,t[35]=q,t[36]=G,t[37]=A,t[38]=Y):Y=t[38],Y};function Z(e){return l.jsxs(w.Option,{value:e.id,children:[e.name," ",e.is_active&&l.jsx(D,{color:"green",children:"Aktif"})]},e.id)}function $(e,t){return l.jsx(d,{span:12,children:l.jsxs(m,{type:"inner",size:"small",title:e.class_name,style:{border:"1px solid #f0f0f0"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[l.jsx(W,{style:{fontSize:16,color:"#1890ff"}}),l.jsx("div",{style:{fontWeight:"bold"},children:e.laki}),l.jsx("div",{style:{fontSize:10,color:"#888"},children:"Ikhwan"})]}),l.jsx("div",{style:{borderLeft:"1px solid #eee"}}),l.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[l.jsx(J,{style:{fontSize:16,color:"#eb2f96"}}),l.jsx("div",{style:{fontWeight:"bold"},children:e.perempuan}),l.jsx("div",{style:{fontSize:10,color:"#888"},children:"Akhwat"})]})]}),l.jsxs("div",{style:{textAlign:"center",background:"#fafafa",marginTop:8,padding:2,borderRadius:4,fontSize:11},children:["Total: ",e.total_students]})]})},t)}const{Title:ee,Text:te}=x,se=()=>{const e=s.c(52),[i,n]=k.useState(1),[o,c]=k.useState("");let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[0]=d):d=e[0];const[h,x]=k.useState(d),[w,M]=k.useState(!1),[C,z]=k.useState(null),[T,I]=k.useState(!1),[O,D]=k.useState(null),[A]=a.useForm();let H;e[1]!==i||e[2]!==o?(H={page:i,limit:10,search:o},e[1]=i,e[2]=o,e[3]=H):H=e[3];const{data:R,isFetching:F,refetch:E}=f(H),[V,K]=u(),{isLoading:W}=K;let N,q,G,J,Y;e[4]!==R||e[5]!==i?(N=()=>{R?.data&&x(1===i?R.data:e=>{const t=R.data.filter(t=>!e.some(e=>e.id===t.id));return[...e,...t]})},q=[R,i],e[4]=R,e[5]=i,e[6]=N,e[7]=q):(N=e[6],q=e[7]),k.useEffect(N,q),e[8]===Symbol.for("react.memo_cache_sentinel")?(G=()=>{n(1)},e[8]=G):G=e[8],e[9]!==o?(J=[o],e[9]=o,e[10]=J):J=e[10],k.useEffect(G,J),e[11]!==R?.hasMore||e[12]!==F?(Y=()=>{R?.hasMore&&!F&&n(ae)},e[11]=R?.hasMore,e[12]=F,e[13]=Y):Y=e[13];const Q=Y;let Z;e[14]!==V||e[15]!==E?(Z=async e=>{try{await V(e).unwrap(),r.success("Berhasil dihapus"),n(1),E()}catch(t){const e=t;r.error(e?.data?.message||"Gagal menghapus")}},e[14]=V,e[15]=E,e[16]=Z):Z=e[16];const $=Z;let se;e[17]!==A?(se=e=>{const t=void 0===e?null:e;D(t),t?A.setFieldsValue(t):A.resetFields(),I(!0)},e[17]=A,e[18]=se):se=e[18];const ie=se;let ne;e[19]!==E?(ne=()=>{I(!1),D(null),n(1),E()},e[19]=E,e[20]=ne):ne=e[20];const le=ne;let re;e[21]===Symbol.for("react.memo_cache_sentinel")?(re=e=>{z(e),M(!0)},e[21]=re):re=e[21];const oe=re;let ce;e[22]===Symbol.for("react.memo_cache_sentinel")?(ce=()=>{z(null),M(!1)},e[22]=ce):ce=e[22];const de=ce;let me;e[23]!==$||e[24]!==W||e[25]!==ie?(me=e=>l.jsx(m,{hoverable:!0,style:{marginBottom:16},title:l.jsxs(ee,{level:5,style:{margin:0,color:"#1890ff"},children:[l.jsx(y,{style:{marginRight:8}}),e.name]}),actions:[l.jsx(j,{title:"Lihat Dashboard Detail",children:l.jsx(p,{type:"link",icon:l.jsx(B,{}),onClick:()=>oe(e.id),children:"Detail"})},"detail"),l.jsx(j,{title:"Edit",children:l.jsx(p,{type:"text",icon:l.jsx(g,{style:{color:"#faad14"}}),onClick:()=>ie(e)})},"edit"),l.jsx(L,{title:"Hapus Homebase ini?",description:"Data yang terhubung (kelas, guru) mungkin akan error jika tidak ditangani.",onConfirm:()=>$(e.id),okText:"Ya, Hapus",cancelText:"Batal",children:l.jsx(p,{type:"text",danger:!0,icon:l.jsx(P,{}),loading:W})},"delete")],children:l.jsxs("div",{style:{flex:1},children:[l.jsx(te,{type:"secondary",style:{display:"block",marginTop:4},children:e.description||"— Tidak ada deskripsi —"}),l.jsxs(te,{style:{fontSize:11,color:"#ccc",marginTop:8,display:"block"},children:["ID: ",e.id," • Dibuat:"," ",new Date(e.created_at).toLocaleDateString("id-ID")]})]})}),e[23]=$,e[24]=W,e[25]=ie,e[26]=me):me=e[26];const he=me;let fe,ue,xe,je,pe;e[27]===Symbol.for("react.memo_cache_sentinel")?(fe={display:"flex",justifyContent:"space-between",marginBottom:16,gap:10},e[27]=fe):fe=e[27],e[28]===Symbol.for("react.memo_cache_sentinel")?(ue=l.jsx(b,{}),e[28]=ue):ue=e[28],e[29]===Symbol.for("react.memo_cache_sentinel")?(xe=l.jsx(t,{placeholder:"Cari homebase...",prefix:ue,allowClear:!0,onChange:e=>c(e.target.value),style:{maxWidth:300}}),e[29]=xe):xe=e[29],e[30]===Symbol.for("react.memo_cache_sentinel")?(je=l.jsx(v,{}),e[30]=je):je=e[30],e[31]!==ie?(pe=l.jsxs("div",{style:fe,children:[xe,l.jsx(p,{type:"primary",icon:je,onClick:()=>ie(null),children:"Tambah Baru"})]}),e[31]=ie,e[32]=pe):pe=e[32];const ge=R?.hasMore;let ye,be,ve,Se,ke;return e[33]!==Q||e[34]!==F||e[35]!==h||e[36]!==he||e[37]!==ge?(ye=l.jsx(_,{data:h,loading:F,hasMore:ge,onLoadMore:Q,renderItem:he,height:"70vh",emptyText:"Belum ada data satuan pendidikan"}),e[33]=Q,e[34]=F,e[35]=h,e[36]=he,e[37]=ge,e[38]=ye):ye=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(be=()=>I(!1),e[39]=be):be=e[39],e[40]!==O||e[41]!==le||e[42]!==T?(ve=l.jsx(U,{open:T,initialData:O,onCancel:be,onSuccess:le}),e[40]=O,e[41]=le,e[42]=T,e[43]=ve):ve=e[43],e[44]!==w||e[45]!==C?(Se=l.jsx(X,{open:w,homebaseId:C,onCancel:de}),e[44]=w,e[45]=C,e[46]=Se):Se=e[46],e[47]!==pe||e[48]!==ye||e[49]!==ve||e[50]!==Se?(ke=l.jsxs(S,{title:"Manajemen Satuan Pendidikan",children:[pe,ye,ve,Se]}),e[47]=pe,e[48]=ye,e[49]=ve,e[50]=Se,e[51]=ke):ke=e[51],ke};function ae(e){return e+1}export{se as default};
