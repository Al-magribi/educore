import{b as e}from"./vendor-BhwIo2T6.js";import{ap as t,aq as n,aS as a,aw as r,ay as o,ag as s,bX as l,ac as i,ah as c,cp as m}from"./index-Bv8LfhQL.js";const p=t=>{const{value:n,formatter:a,precision:r,decimalSeparator:o,groupSeparator:s="",prefixCls:l}=t;let i;if("function"==typeof a)i=a(n);else{const t=String(n),a=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(a&&"-"!==t){const t=a[1];let n=a[2]||"0",c=a[4]||"";n=n.replace(/\B(?=(\d{3})+(?!\d))/g,s),"number"==typeof r&&(c=c.padEnd(r,"0").slice(0,r>0?r:0)),c&&(c=`${o}${c}`),i=[e.createElement("span",{key:"int",className:`${l}-content-value-int`},t,n),c&&e.createElement("span",{key:"decimal",className:`${l}-content-value-decimal`},c)]}else i=t}return e.createElement("span",{className:`${l}-content-value`},i)},u=t("Statistic",e=>(e=>{const{componentCls:t,marginXXS:n,padding:r,colorTextDescription:o,titleFontSize:s,colorTextHeading:l,contentFontSize:i,fontFamily:c}=e;return{[t]:{...a(e),[`${t}-header`]:{paddingBottom:n,[`${t}-title`]:{color:o,fontSize:s}},[`${t}-skeleton`]:{paddingTop:r},[`${t}-content`]:{color:l,fontSize:i,fontFamily:c,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}}}})(n(e,{})),e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}}),f=e.forwardRef((t,n)=>{const{prefixCls:a,className:c,rootClassName:m,style:f,valueStyle:d,value:g=0,title:v,valueRender:S,prefix:x,suffix:$,loading:y=!1,formatter:E,precision:w,decimalSeparator:N=".",groupSeparator:h=",",onMouseEnter:z,onMouseLeave:C,styles:M,classNames:F,...k}=t,{getPrefixCls:D,direction:H,className:I,style:T,classNames:b,styles:R}=r("statistic"),X=D("statistic",a),[j,B]=u(X),L={...t,decimalSeparator:N,groupSeparator:h,loading:y,value:g},[q,P]=o([b,F],[R,M],{props:L}),Y=e.createElement(p,{decimalSeparator:N,groupSeparator:h,prefixCls:X,formatter:E,precision:w,value:g}),A=s(X,{[`${X}-rtl`]:"rtl"===H},I,c,m,q.root,j,B),G=s(`${X}-header`,q.header),J=s(`${X}-title`,q.title),K=s(`${X}-content`,q.content),O=s(`${X}-content-prefix`,q.prefix),Q=s(`${X}-content-suffix`,q.suffix),U=e.useRef(null);e.useImperativeHandle(n,()=>({nativeElement:U.current}));const V=l(k,{aria:!0,data:!0});return e.createElement("div",{...V,className:A,style:{...P.root,...T,...f},ref:U,onMouseEnter:z,onMouseLeave:C},v&&e.createElement("div",{className:G,style:P.header},e.createElement("div",{className:J,style:P.title},v)),e.createElement(i,{paragraph:!1,loading:y,className:`${X}-skeleton`,active:!0},e.createElement("div",{className:K,style:{...d,...P.content}},x&&e.createElement("span",{className:O,style:P.prefix},x),S?S(Y):Y,$&&e.createElement("span",{className:Q,style:P.suffix},$))))}),d=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function g(e,t,n){const{format:a=""}=t,r=new Date(e).getTime(),o=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,r=(t.match(a)||[]).map(e=>e.slice(1,-1)),o=t.replace(a,"[]"),s=d.reduce((e,[t,a])=>{if(e.includes(t)){const r=Math.floor(n/a);return n-=r*a,e.replace(new RegExp(`${t}+`,"g"),e=>{const t=e.length;return r.toString().padStart(t,"0")})}return e},o);let l=0;return s.replace(a,()=>{const e=r[l];return l+=1,e})}(n?Math.max(r-o,0):Math.max(o-r,0),a)}const v=1e3/60;const S=t=>{const{value:n,format:a="HH:mm:ss",onChange:r,onFinish:o,type:s,...l}=t,i="countdown"===s,[p,u]=e.useState(null),d=c(()=>{const e=Date.now(),t=function(e){return new Date(e).getTime()}(n);u({});const a=i?t-e:e-t;return r?.(a),!(i&&t<e)||(o?.(),!1)});e.useEffect(()=>{let e;const t=()=>{d()||window.clearInterval(e)};return e=window.setInterval(t,v),()=>{window.clearInterval(e)}},[n,i]),e.useEffect(()=>{u({})},[]);return e.createElement(f,{...l,value:n,valueRender:e=>m(e,{title:void 0}),formatter:(e,t)=>p?g(e,{...t,format:a},i):"-"})},x=t=>e.createElement(S,{...t,type:"countdown"}),$=e.memo(x);f.Timer=S,f.Countdown=$;export{f as S};
