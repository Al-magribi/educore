import{k as e,F as s,by as a,bz as t,bA as n,bB as r,o as i,x as o,T as l,z as c,s as m,M as d,B as u,aL as h}from"./index-DJgzJvx0.js";import{r as x}from"./vendor-kOq7Q5-U.js";import{I as p}from"./InfiniteScrollList-CRQVFRuq.js";import{M as f}from"./index-CWRbA1GH.js";import{G as j}from"./git-branch-Dp29Umc2.js";import{S as y}from"./school-ByW01V9H.js";import{P as g}from"./pencil-BHIqPcQ5.js";import{P as b}from"./index-C1pdE3N8.js";import{T as _}from"./trash-2-AcrYeN4V.js";import{S}from"./search-DCbkSk8T.js";import{P as k}from"./plus-BlyBk2I3.js";import"./charts-4CCI6hAs.js";import"./index-CsPvpU6M.js";import"./index-BzygXUWO.js";import"./index-Ddh-PgSR.js";import"./ActionButton-DZkZ4UyV.js";import"./context-Co2t6AGx.js";import"./useMergedMask-hWGqm8nf.js";import"./useClosable-BMlLLbW6.js";const{Title:w,Text:v}=l,C=l=>{const C=e.c(74),{screens:M}=l,[T,J]=x.useState(1),[z,B]=x.useState("");let L;C[0]===Symbol.for("react.memo_cache_sentinel")?(L=[],C[0]=L):L=C[0];const[P,F]=x.useState(L),[E,A]=x.useState(!1),[D,G]=x.useState(null),[H]=s.useForm();let N;C[1]!==T||C[2]!==z?(N={page:T,limit:10,search:z},C[1]=T,C[2]=z,C[3]=N):N=C[3];const{data:q,isFetching:K,refetch:O}=a(N),[W,R]=t(),{isLoading:V}=R,[Y,$]=n(),{isLoading:Q}=$,[U,X]=r(),{isLoading:Z}=X;let ee,se,ae,te,ne;C[4]!==q||C[5]!==T?(ee=()=>{q?.data&&F(1===T?q.data:e=>{const s=q.data.filter(s=>!e.some(e=>e.id===s.id));return[...e,...s]})},se=[q,T],C[4]=q,C[5]=T,C[6]=ee,C[7]=se):(ee=C[6],se=C[7]),x.useEffect(ee,se),C[8]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>{J(1)},C[8]=ae):ae=C[8],C[9]!==z?(te=[z],C[9]=z,C[10]=te):te=C[10],x.useEffect(ae,te),C[11]!==q?.hasMore||C[12]!==K?(ne=()=>{q?.hasMore&&!K&&J(I)},C[11]=q?.hasMore,C[12]=K,C[13]=ne):ne=C[13];const re=ne;let ie;C[14]!==H?(ie=e=>{const s=void 0===e?null:e;G(s),s?H.setFieldsValue({name:s.name}):H.resetFields(),A(!0)},C[14]=H,C[15]=ie):ie=C[15];const oe=ie;let le;C[16]!==W||C[17]!==D||C[18]!==O||C[19]!==Y?(le=async e=>{try{D?(await Y({id:D.id,name:e.name}).unwrap(),c.success("Jurusan berhasil diperbarui")):(await W({name:e.name}).unwrap(),c.success("Jurusan berhasil ditambahkan")),A(!1),J(1),O()}catch(s){const e=s;c.error(e?.data?.message||"Terjadi kesalahan")}},C[16]=W,C[17]=D,C[18]=O,C[19]=Y,C[20]=le):le=C[20];const ce=le;let me;C[21]!==U||C[22]!==O?(me=async e=>{try{await U(e).unwrap(),c.success("Jurusan dihapus"),J(1),O()}catch(s){const e=s;c.error(e?.data?.message||"Gagal menghapus")}},C[21]=U,C[22]=O,C[23]=me):me=C[23];const de=me;let ue;C[24]!==de||C[25]!==oe||C[26]!==Z?(ue=e=>i.jsx(m,{hoverable:!0,style:{height:"100%",display:"flex",flexDirection:"column"},styles:{body:{flex:1,padding:"16px"}},actions:[i.jsx(d,{title:"Edit Nama",children:i.jsx(u,{type:"text",icon:i.jsx(g,{size:14,color:"#faad14"}),onClick:()=>oe(e)})},"edit"),i.jsx(b,{title:"Hapus Jurusan?",description:"Pastikan tidak ada kelas yang terhubung.",onConfirm:()=>de(e.id),okText:"Ya, Hapus",cancelText:"Batal",disabled:Z,children:i.jsx(u,{type:"text",danger:!0,icon:i.jsx(_,{size:14}),loading:Z})},"delete")],children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[i.jsx("div",{style:{background:"#e6f7ff",padding:10,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(j,{size:24,color:"#1890ff"})}),i.jsxs("div",{children:[i.jsx(w,{level:5,style:{margin:0},children:e.name}),i.jsxs(v,{type:"secondary",style:{fontSize:12,display:"flex",alignItems:"center",gap:4},children:[i.jsx(y,{size:12})," ",e.homebase_name||"Satuan Pendidikan"]})]})]})}),C[24]=de,C[25]=oe,C[26]=Z,C[27]=ue):ue=C[27];const he=ue;let xe,pe,fe;C[28]===Symbol.for("react.memo_cache_sentinel")?(xe={padding:24},pe={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:10},C[28]=xe,C[29]=pe):(xe=C[28],pe=C[29]),C[30]===Symbol.for("react.memo_cache_sentinel")?(fe=i.jsx(w,{level:4,style:{margin:0},children:"Daftar Jurusan"}),C[30]=fe):fe=C[30];const je=!!M.xs,ye=M.xs?"stretch":"center",ge=M.xs?"100%":"auto";let be,_e,Se;C[31]!==ge?(be={width:ge},C[31]=ge,C[32]=be):be=C[32],C[33]===Symbol.for("react.memo_cache_sentinel")?(_e=i.jsx(S,{size:16,color:"#bfbfbf"}),C[33]=_e):_e=C[33],C[34]===Symbol.for("react.memo_cache_sentinel")?(Se=e=>B(e.target.value),C[34]=Se):Se=C[34];const ke=M.xs?"100%":260;let we,ve,Ce;C[35]!==ke?(we=i.jsx(o,{placeholder:"Cari jurusan...",prefix:_e,allowClear:!0,onChange:Se,style:{width:ke}}),C[35]=ke,C[36]=we):we=C[36],C[37]===Symbol.for("react.memo_cache_sentinel")?(ve=i.jsx(k,{size:18}),C[37]=ve):ve=C[37],C[38]!==oe?(Ce=()=>oe(null),C[38]=oe,C[39]=Ce):Ce=C[39];const Ie=M.xs?"100%":"auto";let Me,Te,Je;C[40]!==Ie?(Me={width:Ie},C[40]=Ie,C[41]=Me):Me=C[41],C[42]!==Ce||C[43]!==Me?(Te=i.jsx(u,{type:"primary",icon:ve,onClick:Ce,style:Me,children:"Tambah"}),C[42]=Ce,C[43]=Me,C[44]=Te):Te=C[44],C[45]!==je||C[46]!==ye||C[47]!==be||C[48]!==we||C[49]!==Te?(Je=i.jsxs("div",{style:pe,children:[fe,i.jsxs(h,{gap:8,vertical:je,align:ye,justify:"flex-end",style:be,children:[we,Te]})]}),C[45]=je,C[46]=ye,C[47]=be,C[48]=we,C[49]=Te,C[50]=Je):Je=C[50];const ze=q?.hasMore;let Be,Le;C[51]===Symbol.for("react.memo_cache_sentinel")?(Be={gutter:[16,16],xs:24,sm:12,md:8,lg:6,xl:6,xxl:4},C[51]=Be):Be=C[51],C[52]!==re||C[53]!==K||C[54]!==P||C[55]!==he||C[56]!==ze?(Le=i.jsx(p,{data:P,loading:K,hasMore:ze,onLoadMore:re,renderItem:he,emptyText:"Belum ada data jurusan",grid:Be}),C[52]=re,C[53]=K,C[54]=P,C[55]=he,C[56]=ze,C[57]=Le):Le=C[57];const Pe=D?"Edit Jurusan":"Tambah Jurusan Baru";let Fe;C[58]===Symbol.for("react.memo_cache_sentinel")?(Fe=()=>A(!1),C[58]=Fe):Fe=C[58];const Ee=V||Q;let Ae,De,Ge,He,Ne;return C[59]===Symbol.for("react.memo_cache_sentinel")?(Ae=[{required:!0,message:"Nama jurusan wajib diisi"}],C[59]=Ae):Ae=C[59],C[60]===Symbol.for("react.memo_cache_sentinel")?(De=i.jsx(s.Item,{name:"name",label:"Nama Jurusan",rules:Ae,help:"Contoh: IPA, IPS, Teknik Komputer Jaringan",children:i.jsx(o,{placeholder:"Masukkan nama jurusan..."})}),C[60]=De):De=C[60],C[61]!==H||C[62]!==ce?(Ge=i.jsx(s,{form:H,layout:"vertical",onFinish:ce,children:De}),C[61]=H,C[62]=ce,C[63]=Ge):Ge=C[63],C[64]!==H.submit||C[65]!==E||C[66]!==Pe||C[67]!==Ee||C[68]!==Ge?(He=i.jsx(f,{title:Pe,open:E,onCancel:Fe,onOk:H.submit,confirmLoading:Ee,destroyOnHidden:!0,children:Ge}),C[64]=H.submit,C[65]=E,C[66]=Pe,C[67]=Ee,C[68]=Ge,C[69]=He):He=C[69],C[70]!==Je||C[71]!==Le||C[72]!==He?(Ne=i.jsxs("div",{style:xe,children:[Je,Le,He]}),C[70]=Je,C[71]=Le,C[72]=He,C[73]=Ne):Ne=C[73],Ne};function I(e){return e+1}export{C as default};
