import{I as e,a,F as s,m as t,H as n,J as i,j as r,C as l,h as o,R as c,f as m,K as d,x as h,y as u,s as x,L as p,z as j,T as f,M as y,N as b,d as g,G as _,g as S,S as k,o as v,B as w,p as I,r as C,t as T,b as P}from"./index-CVvYH8o1.js";import{b as N}from"./vendor-BhwIo2T6.js";import{I as z}from"./InfiniteScrollList-9flDvJTp.js";import{a as B}from"./index-CAcyGMA9.js";import{S as F}from"./index-Bs_ywDJM.js";import{M as L}from"./index-DOzjnNTE.js";import{P as M}from"./index-C0MTcrq3.js";import{R as G}from"./DeleteOutlined-MFxqPosx.js";import"./index-N53jIs86.js";import"./ActionButton-BSwwgC9k.js";var O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};function H(){return H=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},H.apply(this,arguments)}const E=(a,s)=>N.createElement(e,H({},a,{ref:s,icon:O})),A=N.forwardRef(E),{Option:D}=B,q=e=>{const f=a.c(58),{open:y,onCancel:b,onSuccess:g,initialData:_}=e,[S]=s.useForm();let k;f[0]===Symbol.for("react.memo_cache_sentinel")?(k={page:1,limit:100},f[0]=k):k=f[0];const{data:v,isLoading:w}=t(k),[I,C]=n(),{isLoading:T}=C,[P,z]=i(),{isLoading:M}=z;let G,O,H;f[1]!==S||f[2]!==_||f[3]!==y?(G=()=>{y&&(_?S.setFieldsValue({..._,password:"",homebase_id:_.homebase_id||void 0}):S.resetFields())},O=[y,_,S],f[1]=S,f[2]=_,f[3]=y,f[4]=G,f[5]=O):(G=f[4],O=f[5]),N.useEffect(G,O),f[6]!==I||f[7]!==S||f[8]!==_||f[9]!==g||f[10]!==P?(H=async e=>{try{_?(await P({id:_.id,...e}).unwrap(),x.success("Data guru diperbarui")):(await I(e).unwrap(),x.success("Guru berhasil ditambahkan")),S.resetFields(),g()}catch(a){const e=a;x.error(e?.data?.message||"Terjadi kesalahan")}},f[6]=I,f[7]=S,f[8]=_,f[9]=g,f[10]=P,f[11]=H):H=f[11];const E=H,A=_?"Edit Data Guru":"Tambah Guru Baru",D=T||M;let q,K,W,R;f[12]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx(p,{orientation:"left",style:{margin:"0 0 16px 0"},children:"Informasi Akun"}),f[12]=q):q=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(K=[{required:!0,message:"Nama wajib diisi"}],f[13]=K):K=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(W=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"full_name",label:"Nama Lengkap (dengan gelar)",rules:K,children:r.jsx(o,{placeholder:"Contoh: Budi Santoso, S.Pd.",prefix:r.jsx(c,{})})})}),f[14]=W):W=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(R=[{required:!0,message:"Username wajib diisi"}],f[15]=R):R=f[15];const U=!!_;let Y;f[16]!==U?(Y=r.jsxs(m,{gutter:16,children:[W,r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"username",label:"Username Login",rules:R,children:r.jsx(o,{placeholder:"Username unik",disabled:U})})})]}),f[16]=U,f[17]=Y):Y=f[17];const J=_?"Password Baru (Opsional)":"Password",Q=!_;let X,Z,$,ee;f[18]!==Q?(X={required:Q,message:"Password wajib diisi"},f[18]=Q,f[19]=X):X=f[19],f[20]===Symbol.for("react.memo_cache_sentinel")?(Z={min:6,message:"Minimal 6 karakter"},f[20]=Z):Z=f[20],f[21]!==X?($=[X,Z],f[21]=X,f[22]=$):$=f[22],f[23]===Symbol.for("react.memo_cache_sentinel")?(ee=r.jsx(j,{}),f[23]=ee):ee=f[23];const ae=_?"Biarkan kosong jika tidak diubah":"Password akun";let se,te,ne,ie,re,le,oe,ce,me,de,he,ue,xe;return f[24]!==ae?(se=r.jsx(o.Password,{prefix:ee,placeholder:ae}),f[24]=ae,f[25]=se):se=f[25],f[26]!==J||f[27]!==$||f[28]!==se?(te=r.jsx(s.Item,{name:"password",label:J,rules:$,children:se}),f[26]=J,f[27]=$,f[28]=se,f[29]=te):te=f[29],f[30]===Symbol.for("react.memo_cache_sentinel")?(ne=r.jsx(p,{orientation:"left",style:{margin:"10px 0 16px 0"},children:"Data Kepegawaian"}),f[30]=ne):ne=f[30],f[31]===Symbol.for("react.memo_cache_sentinel")?(ie=[{required:!0,message:"Guru wajib memiliki Homebase"}],f[31]=ie):ie=f[31],f[32]!==v?.data?(re=v?.data?.map(V),f[32]=v?.data,f[33]=re):re=f[33],f[34]!==w||f[35]!==re?(le=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"homebase_id",label:"Penempatan (Homebase)",rules:ie,children:r.jsx(B,{placeholder:"Pilih Satuan Pendidikan",loading:w,showSearch:!0,optionFilterProp:"children",children:re})})}),f[34]=w,f[35]=re,f[36]=le):le=f[36],f[37]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"nip",label:"NIP / NIY",children:r.jsx(o,{placeholder:"Nomor Induk",prefix:r.jsx(d,{})})})}),f[37]=oe):oe=f[37],f[38]!==le?(ce=r.jsxs(m,{gutter:16,children:[le,oe]}),f[38]=le,f[39]=ce):ce=f[39],f[40]===Symbol.for("react.memo_cache_sentinel")?(me=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"phone",label:"No. Telepon / WhatsApp",children:r.jsx(o,{placeholder:"08xxx",prefix:r.jsx(h,{})})})}),f[40]=me):me=f[40],f[41]===Symbol.for("react.memo_cache_sentinel")?(de=r.jsxs(m,{gutter:16,children:[me,r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"email",label:"Email",children:r.jsx(o,{type:"email",placeholder:"email@sekolah.sch.id",prefix:r.jsx(u,{})})})})]}),f[41]=de):de=f[41],f[42]!==_?(he=_&&r.jsx(s.Item,{name:"is_active",label:"Status Akun",valuePropName:"checked",children:r.jsx(F,{checkedChildren:"Aktif",unCheckedChildren:"Nonaktif"})}),f[42]=_,f[43]=he):he=f[43],f[44]!==S||f[45]!==E||f[46]!==Y||f[47]!==te||f[48]!==ce||f[49]!==he?(ue=r.jsxs(s,{form:S,layout:"vertical",onFinish:E,children:[q,Y,te,ne,ce,de,he]}),f[44]=S,f[45]=E,f[46]=Y,f[47]=te,f[48]=ce,f[49]=he,f[50]=ue):ue=f[50],f[51]!==S.submit||f[52]!==b||f[53]!==y||f[54]!==ue||f[55]!==A||f[56]!==D?(xe=r.jsx(L,{title:A,open:y,onCancel:b,onOk:S.submit,confirmLoading:D,destroyOnHidden:!0,width:700,children:ue}),f[51]=S.submit,f[52]=b,f[53]=y,f[54]=ue,f[55]=A,f[56]=D,f[57]=xe):xe=f[57],xe};function V(e){return r.jsx(D,{value:e.id,children:e.name},e.id)}const{Title:K,Text:W}=f,R=()=>{const e=a.c(42),[s,t]=N.useState(1),[n,i]=N.useState("");let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[m,d]=N.useState(l),[h,u]=N.useState(!1),[p,j]=N.useState(null),f=((e,s)=>{const t=a.c(4),[n,i]=N.useState(e);let r,l;return t[0]!==s||t[1]!==e?(r=()=>{const a=setTimeout(()=>{i(e)},s);return()=>{clearTimeout(a)}},l=[e,s],t[0]=s,t[1]=e,t[2]=r,t[3]=l):(r=t[2],l=t[3]),N.useEffect(r,l),n})(n,500);let P;e[1]!==f||e[2]!==s?(P={page:s,limit:16,search:f},e[1]=f,e[2]=s,e[3]=P):P=e[3];const{data:B,isFetching:F,refetch:L}=y(P),[O,H]=b(),{isLoading:E}=H;let D,V,R,Y,J;e[4]!==B||e[5]!==s?(D=()=>{B?.data&&d(1===s?B.data:e=>{const a=B.data.filter(a=>!e.some(e=>e.id===a.id));return[...e,...a]})},V=[B,s],e[4]=B,e[5]=s,e[6]=D,e[7]=V):(D=e[6],V=e[7]),N.useEffect(D,V),e[8]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{t(1)},e[8]=R):R=e[8],e[9]!==n?(Y=[n],e[9]=n,e[10]=Y):Y=e[10],N.useEffect(R,Y),e[11]!==B?.hasMore||e[12]!==F?(J=()=>{B?.hasMore&&!F&&t(U)},e[11]=B?.hasMore,e[12]=F,e[13]=J):J=e[13];const Q=J;let X;e[14]===Symbol.for("react.memo_cache_sentinel")?(X=e=>{j(void 0===e?null:e),u(!0)},e[14]=X):X=e[14];const Z=X;let $;e[15]!==O||e[16]!==L?($=async e=>{try{await O(e).unwrap(),x.success("Guru berhasil dihapus"),t(1),L()}catch(a){x.error("Gagal menghapus data")}},e[15]=O,e[16]=L,e[17]=$):$=e[17];const ee=$;let ae;e[18]!==L?(ae=()=>{u(!1),j(null),t(1),L()},e[18]=L,e[19]=ae):ae=e[19];const se=ae;let te;e[20]!==ee||e[21]!==E?(te=e=>r.jsx(g,{hoverable:!0,style:{height:"100%"},bodyStyle:{padding:"16px"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{display:"flex",gap:12,flex:1,minWidth:0},children:[r.jsx(_,{size:48,src:e.img_url,icon:r.jsx(c,{}),shape:"circle",style:{backgroundColor:"#87d068",flexShrink:0}}),r.jsxs("div",{style:{minWidth:0,flex:1},children:[r.jsx(K,{level:5,style:{margin:0,fontSize:15},ellipsis:!0,children:e.full_name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:2},children:[r.jsxs(W,{type:"secondary",style:{fontSize:12},children:["@",e.username]}),r.jsx("span",{style:{color:"#ddd"},children:"|"}),r.jsx(W,{type:"secondary",style:{fontSize:12},children:e.nip||"Non-NIP"})]}),r.jsxs("div",{style:{marginTop:8},children:[r.jsx(S,{icon:r.jsx(A,{}),color:"cyan",style:{marginBottom:4},children:e.homebase_name||"Belum ada Homebase"}),r.jsx(S,{color:e.is_active?"success":"error",children:e.is_active?"AKTIF":"NONAKTIF"})]}),r.jsxs(W,{type:"secondary",style:{fontSize:11,display:"block",marginTop:4,color:"#aaa"},children:[e.email||"—"," • ",e.phone||"—"]})]})]}),r.jsxs(k,{direction:"vertical",size:0,children:[r.jsx(v,{title:"Edit",children:r.jsx(w,{type:"text",size:"small",icon:r.jsx(I,{style:{color:"orange"}}),onClick:()=>Z(e)})}),r.jsx(M,{title:"Hapus Guru?",description:"Data mengajar, nilai, dan absensi terkait mungkin akan hilang.",onConfirm:()=>ee(e.id),okText:"Ya, Hapus",cancelText:"Batal",children:r.jsx(w,{type:"text",size:"small",danger:!0,icon:r.jsx(G,{}),loading:E})})]})]})}),e[20]=ee,e[21]=E,e[22]=te):te=e[22];const ne=te;let ie,re,le,oe;e[23]===Symbol.for("react.memo_cache_sentinel")?(ie={display:"flex",justifyContent:"space-between",marginBottom:16,gap:10},e[23]=ie):ie=e[23],e[24]===Symbol.for("react.memo_cache_sentinel")?(re=r.jsx(C,{}),e[24]=re):re=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(le=r.jsx(o,{placeholder:"Cari nama atau NIP...",prefix:re,allowClear:!0,onChange:e=>i(e.target.value),style:{maxWidth:300}}),e[25]=le):le=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsxs("div",{style:ie,children:[le,r.jsx(w,{type:"primary",icon:r.jsx(T,{}),onClick:()=>Z(null),children:"Tambah Guru"})]}),e[26]=oe):oe=e[26];const ce=B?.hasMore;let me,de,he,ue,xe;return e[27]===Symbol.for("react.memo_cache_sentinel")?(me={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:6,xxl:6},e[27]=me):me=e[27],e[28]!==Q||e[29]!==F||e[30]!==m||e[31]!==ne||e[32]!==ce?(de=r.jsx(z,{data:m,loading:F,hasMore:ce,onLoadMore:Q,renderItem:ne,height:"75vh",emptyText:"Belum ada data guru",grid:me}),e[28]=Q,e[29]=F,e[30]=m,e[31]=ne,e[32]=ce,e[33]=de):de=e[33],e[34]===Symbol.for("react.memo_cache_sentinel")?(he=()=>u(!1),e[34]=he):he=e[34],e[35]!==p||e[36]!==se||e[37]!==h?(ue=r.jsx(q,{open:h,initialData:p,onCancel:he,onSuccess:se}),e[35]=p,e[36]=se,e[37]=h,e[38]=ue):ue=e[38],e[39]!==de||e[40]!==ue?(xe=r.jsxs(r.Fragment,{children:[oe,de,ue]}),e[39]=de,e[40]=ue,e[41]=xe):xe=e[41],xe};function U(e){return e+1}const Y=()=>{const e=a.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(P,{title:"Manajement Guru",children:r.jsx(R,{})}),e[0]=s):s=e[0],s};export{Y as default};
