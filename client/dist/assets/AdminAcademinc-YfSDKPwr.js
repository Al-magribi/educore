import{b9 as e,T as a,a as l,F as s,bz as i,bA as t,bB as r,j as n,B as o,h as c,s as d,d as m,o as h,bC as x,bD as u,bE as p,bF as y,bG as j,bH as g,bI as b,bJ as f,S as _,f as S,C as k,aO as w,az as v,p as T,R as C,G as z,x as P,y as B,g as I,L as M,bK as L,bL as D,bM as K,bN as R,bO as F,bP as N,bQ as A,bR as E,bq as G,bv as q,bS as H,bT as W,bU as O,bV as U,b as V}from"./index-Bv8LfhQL.js";import{b as $}from"./vendor-BhwIo2T6.js";import{I as Y}from"./InfiniteScrollList-BXnWY33D.js";import{P as J,T as Q,S as X}from"./trash-2-CMLShsuB.js";import{L as Z}from"./layers-CWuAP3n-.js";import{P as ee}from"./index-DeuZmqIr.js";import{M as ae}from"./index-yRGjkVEl.js";import{a as le}from"./index-B60FVS46.js";import{G as se,U as ie,P as te,D as re}from"./user-plus-bvhanjKq.js";import{B as ne}from"./index-BXHTS-qk.js";import{B as oe}from"./book-open-BT-oL9t5.js";import{T as ce}from"./index-BlPIXUsq.js";import{R as de,a as me}from"./TeamOutlined-DjfEXulK.js";import{R as he}from"./DeleteOutlined-Ddb-PdJ1.js";import{U as xe}from"./user-kJLOkuk1.js";import{S as ue}from"./school-CE6HbOJb.js";import{U as pe}from"./users-D0MZto0a.js";import"./index-B3z_uEJa.js";import"./ActionButton-D8LEv3q3.js";const ye=e("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),je=e("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),ge=e("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),be=e("square-user",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 21v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1m6ac2"}]]),{Text:fe}=a,_e=()=>{const e=l.c(35),[a,u]=$.useState(!1),[p]=s.useForm(),{data:y,isLoading:j}=i(),[g,b]=t(),{isLoading:f}=b,[_]=r();let S;e[0]!==g||e[1]!==p?(S=async e=>{try{await g(e).unwrap(),d.success("Kategori berhasil dibuat"),u(!1),p.resetFields()}catch(a){d.error("Gagal membuat kategori")}},e[0]=g,e[1]=p,e[2]=S):S=e[2];const k=S;let w;e[3]!==_?(w=async e=>{try{await _(e).unwrap(),d.success("Kategori dihapus")}catch(a){d.error("Gagal menghapus")}},e[3]=_,e[4]=w):w=e[4];const v=w;let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T={header:{marginBottom:24,display:"flex",justifyContent:"flex-end"},iconCircle:{width:48,height:48,borderRadius:"50%",background:"#fff7e6",color:"#fa8c16",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:16,margin:"0 auto"}},e[5]=T):T=e[5];const C=T;let z,P,B,I,M,L,D,K,R,F,N,A,E,G,q;return e[6]===Symbol.for("react.memo_cache_sentinel")?(z=n.jsx("div",{style:C.header,children:n.jsx(o,{type:"primary",icon:n.jsx(J,{size:18}),onClick:()=>u(!0),style:{borderRadius:8},children:"Tambah Kategori"})}),e[6]=z):z=e[6],e[7]!==y?.data?(P=y?.data||[],e[7]=y?.data,e[8]=P):P=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(B={gutter:[16,16],xs:24,sm:12,md:8,lg:6,xl:4},e[9]=B):B=e[9],e[10]!==v?(I=e=>n.jsxs(m,{hoverable:!0,styles:{body:{padding:"24px 16px"}},actions:[n.jsx(ee,{title:"Hapus kategori?",description:"Semua data di dalamnya akan hilang!",onConfirm:()=>v(e.id),okText:"Ya, Hapus",cancelText:"Batal",okButtonProps:{danger:!0},children:n.jsx(h,{title:"Hapus Permanen",children:n.jsx(o,{type:"text",danger:!0,icon:n.jsx(Q,{size:16}),children:"Hapus"})})})],children:[n.jsx("div",{style:C.iconCircle,children:n.jsx(Z,{size:24})}),n.jsx(fe,{strong:!0,style:{fontSize:16},children:e.name}),n.jsx("div",{style:{marginTop:8,fontSize:12,color:"#8c8c8c"},children:"Kategori Utama"})]}),e[10]=v,e[11]=I):I=e[11],e[12]!==j||e[13]!==P||e[14]!==I?(M=n.jsx(Y,{data:P,loading:j,hasMore:!1,height:"70vh",emptyText:"Belum ada kategori",grid:B,renderItem:I}),e[12]=j,e[13]=P,e[14]=I,e[15]=M):M=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(L=n.jsx(J,{size:20}),e[16]=L):L=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsxs(x,{align:"center",gap:8,children:[L," ",n.jsx("span",{children:"Tambah Kategori"})]}),e[17]=D):D=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(K=()=>u(!1),e[18]=K):K=e[18],e[19]!==p?(R=()=>p.submit(),e[19]=p,e[20]=R):R=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(F={marginTop:20},e[21]=F):F=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(N=[{required:!0,message:"Wajib diisi"}],e[22]=N):N=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(A=n.jsx(s.Item,{name:"name",label:"Nama Kategori",rules:N,children:n.jsx(c,{placeholder:"Contoh: Diniyah, Umum",size:"large",prefix:n.jsx(Z,{size:16,style:{color:"#bfbfbf",marginRight:8}})})}),e[23]=A):A=e[23],e[24]!==p||e[25]!==k?(E=n.jsx(s,{form:p,onFinish:k,layout:"vertical",style:F,children:A}),e[24]=p,e[25]=k,e[26]=E):E=e[26],e[27]!==f||e[28]!==a||e[29]!==R||e[30]!==E?(G=n.jsx(ae,{title:D,open:a,onCancel:K,onOk:R,confirmLoading:f,centered:!0,width:400,children:E}),e[27]=f,e[28]=a,e[29]=R,e[30]=E,e[31]=G):G=e[31],e[32]!==G||e[33]!==M?(q=n.jsxs("div",{children:[z,M,G]}),e[32]=G,e[33]=M,e[34]=q):q=e[34],q},{Text:Se,Paragraph:ke}=a,we=()=>{const e=l.c(46),[a,t]=$.useState(!1),[r,j]=$.useState(""),[g]=s.useForm(),{data:b}=i(),{data:f,isLoading:_}=u(null),[S,k]=p(),{isLoading:w}=k,[v]=y();let T;e[0]!==S||e[1]!==g?(T=async e=>{try{await S(e).unwrap(),d.success("Cabang berhasil dibuat"),t(!1),g.resetFields()}catch(a){d.error("Gagal membuat cabang")}},e[0]=S,e[1]=g,e[2]=T):T=e[2];const C=T;let z;e[3]!==v?(z=async e=>{try{await v(e).unwrap(),d.success("Cabang dihapus")}catch(a){d.error("Gagal menghapus")}},e[3]=v,e[4]=z):z=e[4];const P=z;let B;e[5]!==f?.data||e[6]!==r?(B=f?.data?.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.category_name?.toLowerCase().includes(r.toLowerCase()))||[],e[5]=f?.data,e[6]=r,e[7]=B):B=e[7];const I=B;let M;e[8]===Symbol.for("react.memo_cache_sentinel")?(M={header:{background:"#fff",padding:16,borderRadius:12,border:"1px solid #f0f0f0",marginBottom:24,boxShadow:"0 2px 5px rgba(0,0,0,0.02)"},iconBox:{width:40,height:40,borderRadius:10,background:"#f6ffed",display:"flex",alignItems:"center",justifyContent:"center",color:"#52c41a",marginRight:16,flexShrink:0}},e[8]=M):M=e[8];const L=M;let D,K,R,F,N,A,E,G,q,H,W,O,U,V,Z,ie,te,re,oe,ce,de;return e[9]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(X,{size:16,style:{color:"#bfbfbf"}}),e[9]=D):D=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(K={width:300,borderRadius:8},e[10]=K):K=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(R=n.jsx(c,{prefix:D,placeholder:"Cari cabang atau kategori...",style:K,allowClear:!0,onChange:e=>j(e.target.value)}),e[11]=R):R=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(F=n.jsx("div",{style:L.header,children:n.jsxs(x,{justify:"space-between",align:"center",gap:16,wrap:"wrap",children:[R,n.jsx(o,{type:"primary",icon:n.jsx(J,{size:18}),onClick:()=>t(!0),style:{borderRadius:8},children:"Tambah Cabang"})]})}),e[12]=F):F=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(N={gutter:[16,16],xs:24,sm:12,md:12,lg:8,xl:6},e[13]=N):N=e[13],e[14]!==P?(A=e=>n.jsx(ne.Ribbon,{text:e.category_name||"Tanpa Kategori",color:"cyan",style:{top:12},children:n.jsx(m,{hoverable:!0,actions:[n.jsx(ee,{title:"Hapus cabang ini?",description:"Tindakan ini tidak dapat dibatalkan",onConfirm:()=>P(e.id),okText:"Hapus",cancelText:"Batal",okButtonProps:{danger:!0},children:n.jsx(h,{title:"Hapus",children:n.jsx(o,{type:"text",danger:!0,icon:n.jsx(Q,{size:16}),style:{width:"100%"},children:"Hapus"})})})],children:n.jsxs(x,{align:"flex-start",children:[n.jsx("div",{style:L.iconBox,children:n.jsx(se,{size:20})}),n.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[n.jsx(Se,{strong:!0,style:{fontSize:16,display:"block",marginBottom:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:e.name,children:e.name}),n.jsx(ke,{type:"secondary",ellipsis:{rows:2},style:{fontSize:13,margin:0,minHeight:40},children:e.description||"Tidak ada deskripsi"})]})]})})}),e[14]=P,e[15]=A):A=e[15],e[16]!==I||e[17]!==_||e[18]!==A?(E=n.jsx(Y,{data:I,loading:_,hasMore:!1,height:"70vh",emptyText:"Belum ada data cabang",grid:N,renderItem:A}),e[16]=I,e[17]=_,e[18]=A,e[19]=E):E=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(G=n.jsx(J,{size:20}),e[20]=G):G=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(q=n.jsxs(x,{align:"center",gap:8,children:[G," ",n.jsx("span",{children:"Tambah Cabang Baru"})]}),e[21]=q):q=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(H=()=>t(!1),e[22]=H):H=e[22],e[23]!==g?(W=()=>g.submit(),e[23]=g,e[24]=W):W=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(O={marginTop:20},e[25]=O):O=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(U=[{required:!0,message:"Kategori wajib dipilih"}],e[26]=U):U=e[26],e[27]!==b?.data?(V=b?.data?.map(ve),e[27]=b?.data,e[28]=V):V=e[28],e[29]!==V?(Z=n.jsx(s.Item,{name:"category_id",label:"Pilih Kategori",rules:U,children:n.jsx(le,{placeholder:"Pilih Kategori",options:V,size:"large"})}),e[29]=V,e[30]=Z):Z=e[30],e[31]===Symbol.for("react.memo_cache_sentinel")?(ie=[{required:!0,message:"Wajib diisi"}],e[31]=ie):ie=e[31],e[32]===Symbol.for("react.memo_cache_sentinel")?(te=n.jsx(s.Item,{name:"name",label:"Nama Cabang",rules:ie,children:n.jsx(c,{placeholder:"Contoh: Fiqih, Bahasa Arab",size:"large",prefix:n.jsx(se,{size:16,style:{color:"#bfbfbf",marginRight:8}})})}),e[32]=te):te=e[32],e[33]===Symbol.for("react.memo_cache_sentinel")?(re=n.jsx(s.Item,{name:"description",label:"Deskripsi (Opsional)",children:n.jsx(c.TextArea,{rows:3,placeholder:"Tambahkan catatan singkat..."})}),e[33]=re):re=e[33],e[34]!==g||e[35]!==C||e[36]!==Z?(oe=n.jsxs(s,{form:g,onFinish:C,layout:"vertical",style:O,children:[Z,te,re]}),e[34]=g,e[35]=C,e[36]=Z,e[37]=oe):oe=e[37],e[38]!==w||e[39]!==a||e[40]!==W||e[41]!==oe?(ce=n.jsx(ae,{title:q,open:a,onCancel:H,onOk:W,confirmLoading:w,centered:!0,children:oe}),e[38]=w,e[39]=a,e[40]=W,e[41]=oe,e[42]=ce):ce=e[42],e[43]!==E||e[44]!==ce?(de=n.jsxs("div",{children:[F,E,ce]}),e[43]=E,e[44]=ce,e[45]=de):de=e[45],de};function ve(e){return{label:e.name,value:e.id}}const{Text:Te}=a,Ce=()=>{const[e,a]=$.useState(""),[l,t]=$.useState(null),[r,p]=$.useState(null),[y,w]=$.useState(!1),[v,T]=$.useState(null),[C,z]=$.useState(1),[P]=$.useState(12),[B,I]=$.useState([]),[M]=s.useForm(),[L,D]=$.useState(null),{data:K}=i(),{data:R}=u(null),{data:F,isFetching:N}=j({page:C,limit:P,search:e,category_id:l||"",branch_id:r||""}),[A,{isLoading:E}]=g(),[G,{isLoading:q}]=b(),[H]=f();$.useEffect(()=>{F?.data&&I(1===C?F.data:e=>{const a=F.data.filter(a=>!e.some(e=>e.id===a.id));return[...e,...a]})},[F,C]),$.useEffect(()=>{z(1)},[e,l,r]);const W=()=>{w(!1),T(null),D(null),M.resetFields()},O=R?.data?.filter(e=>e.category_id===L)||[],U=l?R?.data?.filter(e=>e.category_id===l):R?.data,V={container:{height:"100%",display:"flex",flexDirection:"column"},header:{background:"#fff",padding:16,borderRadius:12,border:"1px solid #f0f0f0",marginBottom:24,boxShadow:"0 2px 5px rgba(0,0,0,0.02)"},statusPill:{background:"#f6ffed",border:"1px solid #b7eb8f",color:"#389e0d",padding:"2px 10px",borderRadius:4,fontSize:12,display:"inline-block",marginTop:8},iconBox:{width:36,height:36,borderRadius:"50%",background:"#e6f7ff",display:"flex",alignItems:"center",justifyContent:"center",color:"#1890ff",marginRight:12,flexShrink:0}};return n.jsxs("div",{style:V.container,children:[n.jsx("div",{style:V.header,children:n.jsxs(x,{justify:"space-between",align:"center",gap:16,wrap:"wrap",children:[n.jsxs(_,{wrap:!0,size:12,style:{flex:1},children:[n.jsx(c,{prefix:n.jsx(X,{size:16,style:{color:"#bfbfbf"}}),placeholder:"Cari mata pelajaran...",style:{width:250,borderRadius:8},allowClear:!0,onChange:e=>a(e.target.value)}),n.jsx(le,{placeholder:"Filter Kategori",allowClear:!0,style:{width:180},value:l,onChange:e=>{t(e),p(null)},options:K?.data?.map(e=>({label:e.name,value:e.id})),suffixIcon:n.jsx(Z,{size:14,style:{color:"#bfbfbf"}}),virtual:!1}),n.jsx(le,{placeholder:"Filter Cabang",allowClear:!0,style:{width:180},value:r,onChange:p,options:U?.map(e=>({label:e.name,value:e.id})),disabled:!l&&!r,suffixIcon:n.jsx(se,{size:14,style:{color:"#bfbfbf"}}),virtual:!1})]}),n.jsx(o,{type:"primary",icon:n.jsx(J,{size:18}),onClick:()=>w(!0),style:{borderRadius:8},children:"Mapel Baru"})]})}),n.jsx(Y,{data:B,loading:N,hasMore:B.length<(F?.total||0),onLoadMore:()=>{!N&&B.length<(F?.total||0)&&z(e=>e+1)},height:"70vh",grid:{gutter:[24,24],xs:24,sm:12,md:12,lg:8,xl:6},renderItem:e=>n.jsx(ne.Ribbon,{text:e.category_name||"Umum",color:"Diniyah"===e.category_name?"green":"blue",style:{top:12},children:n.jsx(m,{hoverable:!0,styles:{body:{padding:"20px 24px"}},actions:[n.jsx(h,{title:"Edit",children:n.jsx(ge,{size:18,style:{color:"#faad14",cursor:"pointer"},onClick:()=>{return T(a=e),M.setFieldsValue({name:a.name,code:a.code,kkm:a.kkm,category_id:a.category_id,branch_id:a.branch_id}),D(a.category_id),void w(!0);var a}})}),n.jsx(ee,{title:"Hapus Mapel?",onConfirm:()=>(async e=>{try{await H(e).unwrap(),d.success("Mapel dihapus"),z(1)}catch(a){d.error("Gagal menghapus")}})(e.id),okText:"Hapus",cancelText:"Batal",okButtonProps:{danger:!0},children:n.jsx(h,{title:"Hapus",children:n.jsx(Q,{size:18,style:{color:"#ff4d4f",cursor:"pointer"}})})})],children:n.jsxs(x,{vertical:!0,align:"flex-start",children:[n.jsxs(x,{align:"center",style:{width:"100%",marginBottom:12},children:[n.jsx("div",{style:V.iconBox,children:n.jsx(oe,{size:18})}),n.jsx("div",{style:{flex:1,overflow:"hidden"},children:n.jsx(Te,{strong:!0,style:{fontSize:16,display:"block",lineHeight:1.2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:e.name,children:e.name})})]}),n.jsxs(Te,{type:"secondary",style:{fontSize:13,marginBottom:8},children:["Cabang: ",e.branch_name||"-"]}),n.jsxs("div",{style:V.statusPill,children:["Kode: ",e.code||"?"," â€¢ KKM: ",e.kkm]})]})})})}),n.jsx(ae,{title:n.jsxs(x,{align:"center",gap:8,children:[v?n.jsx(ge,{size:20}):n.jsx(J,{size:20}),n.jsx("span",{children:v?"Edit Mata Pelajaran":"Buat Mata Pelajaran Baru"})]}),open:y,onCancel:W,onOk:()=>M.submit(),confirmLoading:E||q,centered:!0,width:600,children:n.jsxs(s,{form:M,onFinish:async e=>{try{const a={...e,branch_id:e.branch_id||null};v?(await G({id:v.id,...a}).unwrap(),d.success("Mapel berhasil diperbarui"),z(1)):(await A(a).unwrap(),d.success("Mapel berhasil ditambahkan"),z(1)),W()}catch(a){d.error("Gagal menyimpan mapel")}},layout:"vertical",initialValues:{kkm:75},style:{marginTop:24},children:[n.jsx(s.Item,{name:"name",label:"Nama Mata Pelajaran",rules:[{required:!0,message:"Nama wajib diisi"}],children:n.jsx(c,{placeholder:"Contoh: Kitab Safinah",size:"large",prefix:n.jsx(oe,{size:16,style:{color:"#bfbfbf",marginRight:8}})})}),n.jsx("div",{style:{background:"#fafafa",padding:16,borderRadius:8,marginBottom:16,border:"1px solid #f0f0f0"},children:n.jsxs(S,{gutter:16,children:[n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"category_id",label:"Kategori",rules:[{required:!0,message:"Pilih kategori"}],style:{marginBottom:0},children:n.jsx(le,{placeholder:"Pilih Kategori",options:K?.data?.map(e=>({label:e.name,value:e.id})),onChange:e=>{D(e),M.setFieldValue("branch_id",null)}})})}),n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"branch_id",label:"Cabang (Opsional)",style:{marginBottom:0},children:n.jsx(le,{placeholder:L?"Pilih Cabang":"Pilih Kategori Dulu",options:O.map(e=>({label:e.name,value:e.id})),disabled:!L,allowClear:!0})})})]})}),n.jsxs(S,{gutter:16,children:[n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"code",label:"Kode Mapel",children:n.jsx(c,{placeholder:"Contoh: MP-01",prefix:n.jsx(je,{size:16,style:{color:"#bfbfbf",marginRight:8}})})})}),n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"kkm",label:"Nilai KKM",rules:[{required:!0}],children:n.jsx(ce,{min:0,max:100,style:{width:"100%"}})})})]})]})})]})},{Title:ze,Text:Pe}=a,Be=()=>{const e=l.c(6);let a,s,i,t;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Z,{size:16})," Kategori Mapel"]}),e[0]=a):a=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(s={key:"1",label:a,children:n.jsx("div",{className:"p-4 bg-white rounded shadow-sm",children:n.jsx(_e,{})})},e[1]=s):s=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(i={key:"2",label:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(se,{size:16})," Cabang Mapel"]}),children:n.jsx(we,{})},e[2]=i):i=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(t=[s,i,{key:"3",label:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(oe,{size:16})," Mata Pelajaran"]}),children:n.jsx(Ce,{})}],e[3]=t):t=e[3];const r=t;let o,c;return e[4]===Symbol.for("react.memo_cache_sentinel")?(o=n.jsxs("div",{className:"mb-6",children:[n.jsx(ze,{level:3,children:"Manajemen Kurikulum"}),n.jsx(Pe,{type:"secondary",children:"Kelola Kategori, Cabang, dan Mata Pelajaran Sekolah"})]}),e[4]=o):o=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(c=n.jsxs("div",{className:"p-6 min-h-screen bg-gray-50",children:[o,n.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:n.jsx(w,{defaultActiveKey:"1",items:r})})]}),e[5]=c):c=e[5],c},{Text:Ie,Title:Me}=a,{useToken:Le}=v,De=e=>{const a=l.c(10),{data:s,loading:i,hasMore:t,onLoadMore:r,onEdit:o,onDelete:c}=e;let d,m,h;return a[0]===Symbol.for("react.memo_cache_sentinel")?(d={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},a[0]=d):d=a[0],a[1]!==c||a[2]!==o?(m=e=>n.jsx(Ke,{item:e,onEdit:o,onDelete:c}),a[1]=c,a[2]=o,a[3]=m):m=a[3],a[4]!==s||a[5]!==t||a[6]!==i||a[7]!==r||a[8]!==m?(h=n.jsx(Y,{data:s,loading:i,hasMore:t,onLoadMore:r,height:"75vh",grid:d,renderItem:m}),a[4]=s,a[5]=t,a[6]=i,a[7]=r,a[8]=m,a[9]=h):h=a[9],h},Ke=e=>{const a=l.c(8),{item:s,onEdit:i,onDelete:t}=e,{token:r}=Le();let o;a[0]!==s||a[1]!==t||a[2]!==i?(o=n.jsx(Fe,{item:s,onEdit:i,onDelete:t}),a[0]=s,a[1]=t,a[2]=i,a[3]=o):o=a[3];const c=o;let d;return a[4]!==c||a[5]!==s.is_homeroom||a[6]!==r?(d=s.is_homeroom?n.jsx(ne.Ribbon,{text:"Wali Kelas",color:r.colorSuccess,children:c}):c,a[4]=c,a[5]=s.is_homeroom,a[6]=r,a[7]=d):d=a[7],d},Re=e=>{const a=l.c(30),{allocations:s}=e,{token:i}=Le();let t;e:{if(!s){let e;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0],t=e;break e}let e;if(a[1]!==s){const l={};s.forEach(e=>{const a=e.subject_name||"Unknown",s=e.class_name||"Umum";l[a]||(l[a]=[]),l[a].push(s)}),e=Object.entries(l),a[1]=s,a[2]=e}else e=a[2];t=e}const r=t;if(0===r.length){let e,l;return a[3]===Symbol.for("react.memo_cache_sentinel")?(e={padding:"12px 0"},a[3]=e):e=a[3],a[4]===Symbol.for("react.memo_cache_sentinel")?(l=n.jsx(x,{justify:"center",align:"center",style:e,children:n.jsx(Ie,{type:"secondary",style:{fontSize:12,fontStyle:"italic"},children:"Belum ada jadwal mengajar"})}),a[4]=l):l=a[4],l}let o,c,d,m;a[5]===Symbol.for("react.memo_cache_sentinel")?(o={maxWidth:300},c=n.jsx(Ie,{strong:!0,children:"Detail Jadwal Mengajar"}),a[5]=o,a[6]=c):(o=a[5],c=a[6]),a[7]===Symbol.for("react.memo_cache_sentinel")?(d=n.jsx(M,{style:{margin:"8px 0"}}),a[7]=d):d=a[7],a[8]!==r||a[9]!==i.colorPrimary?(m=n.jsxs("div",{style:o,children:[c,d,n.jsx(x,{vertical:!0,gap:"small",children:r.map((e,a)=>{const[l,s]=e;return n.jsxs("div",{children:[n.jsxs(x,{align:"center",gap:"small",style:{marginBottom:4},children:[n.jsx(me,{style:{color:i.colorPrimary,fontSize:12}}),n.jsx(Ie,{style:{fontSize:12,fontWeight:500},children:l})]}),n.jsx(x,{wrap:!0,gap:"4px",children:s.map(Ne)})]},a)})})]}),a[8]=r,a[9]=i.colorPrimary,a[10]=m):m=a[10];const h=m;let u;a[11]!==r||a[12]!==i.colorText?(u=r.slice(0,2).map((e,a)=>{const[l,s]=e;return n.jsxs(x,{vertical:!0,gap:2,children:[n.jsx(Ie,{ellipsis:!0,style:{fontSize:12,fontWeight:600,color:i.colorText},children:l}),n.jsxs(Ie,{ellipsis:!0,type:"secondary",style:{fontSize:11},children:["Kelas: ",s.slice(0,3).join(", "),s.length>3?" +"+(s.length-3):""]})]},a)}),a[11]=r,a[12]=i.colorText,a[13]=u):u=a[13];const p=`1px dashed ${i.colorBorder}`;let y,j;a[14]!==p||a[15]!==i.borderRadiusSM||a[16]!==i.colorFillAlter?(y={marginTop:4,backgroundColor:i.colorFillAlter,border:p,borderRadius:i.borderRadiusSM,padding:"4px 8px",textAlign:"center",cursor:"pointer",transition:"all 0.2s"},a[14]=p,a[15]=i.borderRadiusSM,a[16]=i.colorFillAlter,a[17]=y):y=a[17],a[18]===Symbol.for("react.memo_cache_sentinel")?(j={fontSize:11},a[18]=j):j=a[18];const g=r.length>2?`+${r.length-2} Mapel Lainnya...`:"Lihat Detail Kelas";let b,f,_,S;return a[19]!==g?(b=n.jsx(Ie,{type:"secondary",style:j,children:g}),a[19]=g,a[20]=b):b=a[20],a[21]!==b||a[22]!==y?(f=n.jsx("div",{style:y,children:b}),a[21]=b,a[22]=y,a[23]=f):f=a[23],a[24]!==h||a[25]!==f?(_=n.jsx(L,{content:h,title:null,trigger:"hover",placement:"bottom",children:f}),a[24]=h,a[25]=f,a[26]=_):_=a[26],a[27]!==_||a[28]!==u?(S=n.jsxs(x,{vertical:!0,gap:"small",children:[u,_]}),a[27]=_,a[28]=u,a[29]=S):S=a[29],S},Fe=e=>{const a=l.c(97),{item:s,onEdit:i,onDelete:t}=e,{token:r}=Le();let c,d,u,p,y,j,g,b,f,_,S,k,w,v,L,D,K;a[0]===Symbol.for("react.memo_cache_sentinel")?(c={height:"100%",display:"flex",flexDirection:"column"},d={body:{flex:1,padding:16}},a[0]=c,a[1]=d):(c=a[0],d=a[1]),a[2]!==r.colorWarning?(u=n.jsx(T,{style:{color:r.colorWarning}}),a[2]=r.colorWarning,a[3]=u):u=a[3],a[4]!==s||a[5]!==i?(p=()=>i(s),a[4]=s,a[5]=i,a[6]=p):p=a[6],a[7]!==u||a[8]!==p?(y=n.jsx(h,{title:"Edit Data",children:n.jsx(o,{type:"text",icon:u,onClick:p})},"edit"),a[7]=u,a[8]=p,a[9]=y):y=a[9],a[10]!==s.id||a[11]!==t?(j=()=>t(s.id),a[10]=s.id,a[11]=t,a[12]=j):j=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(g=n.jsx(o,{type:"text",danger:!0,icon:n.jsx(he,{})}),a[13]=g):g=a[13],a[14]!==j?(b=n.jsx(ee,{title:"Hapus Guru?",description:"Aksi ini tidak dapat dibatalkan",onConfirm:j,okText:"Ya",cancelText:"Batal",children:g},"delete"),a[14]=j,a[15]=b):b=a[15],a[16]!==y||a[17]!==b?(f=[y,b],a[16]=y,a[17]=b,a[18]=f):f=a[18],a[19]!==r.colorPrimary||a[20]!==r.colorPrimaryBg?(_={backgroundColor:r.colorPrimaryBg,color:r.colorPrimary,fontSize:18},a[19]=r.colorPrimary,a[20]=r.colorPrimaryBg,a[21]=_):_=a[21],a[22]!==s.img_url?(S=!s.img_url&&n.jsx(C,{}),a[22]=s.img_url,a[23]=S):S=a[23],a[24]!==s.full_name?(k=s.full_name?.charAt(0),a[24]=s.full_name,a[25]=k):k=a[25],a[26]!==s.img_url||a[27]!==_||a[28]!==S||a[29]!==k?(w=n.jsx(z,{src:s.img_url,size:48,style:_,icon:S,children:k}),a[26]=s.img_url,a[27]=_,a[28]=S,a[29]=k,a[30]=w):w=a[30],a[31]===Symbol.for("react.memo_cache_sentinel")?(v={fontSize:15},a[31]=v):v=a[31],a[32]!==s.full_name?(L={tooltip:s.full_name},a[32]=s.full_name,a[33]=L):L=a[33],a[34]!==s.full_name||a[35]!==L?(D=n.jsx(Ie,{strong:!0,style:v,ellipsis:L,children:s.full_name}),a[34]=s.full_name,a[35]=L,a[36]=D):D=a[36],a[37]===Symbol.for("react.memo_cache_sentinel")?(K={width:"fit-content",margin:0,fontSize:10},a[37]=K):K=a[37];const R=s.nip||"-";let F,N,A,E,G,q,H,W,O,U,V,$,Y,J,Q;a[38]!==R?(F=n.jsxs(I,{style:K,children:["NIP: ",R]}),a[38]=R,a[39]=F):F=a[39],a[40]!==D||a[41]!==F?(N=n.jsxs(x,{vertical:!0,gap:2,children:[D,F]}),a[40]=D,a[41]=F,a[42]=N):N=a[42],a[43]===Symbol.for("react.memo_cache_sentinel")?(A={marginTop:16},a[43]=A):A=a[43],a[44]!==s.homeroom_class||a[45]!==r.borderRadiusSM||a[46]!==r.colorSuccess||a[47]!==r.colorSuccessBg||a[48]!==r.colorSuccessBorder||a[49]!==r.colorSuccessText?(E=s.homeroom_class&&n.jsxs("div",{style:{backgroundColor:r.colorSuccessBg,border:`1px solid ${r.colorSuccessBorder}`,padding:"6px 8px",borderRadius:r.borderRadiusSM,display:"flex",alignItems:"center",gap:8},children:[n.jsx(de,{style:{color:r.colorSuccess}}),n.jsxs(Ie,{style:{fontSize:11,color:r.colorSuccessText,fontWeight:500},ellipsis:!0,children:["Wali Kelas ",s.homeroom_class.name]})]}),a[44]=s.homeroom_class,a[45]=r.borderRadiusSM,a[46]=r.colorSuccess,a[47]=r.colorSuccessBg,a[48]=r.colorSuccessBorder,a[49]=r.colorSuccessText,a[50]=E):E=a[50],a[51]===Symbol.for("react.memo_cache_sentinel")?(G={marginBottom:8},a[51]=G):G=a[51],a[52]!==r.colorTextDescription?(q=n.jsx(me,{style:{fontSize:12,color:r.colorTextDescription}}),a[52]=r.colorTextDescription,a[53]=q):q=a[53],a[54]===Symbol.for("react.memo_cache_sentinel")?(H=n.jsx(Ie,{type:"secondary",style:{fontSize:11,fontWeight:700,textTransform:"uppercase"},children:"Tugas Mengajar"}),a[54]=H):H=a[54],a[55]!==q?(W=n.jsxs(x,{align:"center",gap:"small",style:G,children:[q,H]}),a[55]=q,a[56]=W):W=a[56],a[57]!==r.borderRadiusLG||a[58]!==r.colorFillQuaternary?(O={backgroundColor:r.colorFillQuaternary,borderRadius:r.borderRadiusLG,padding:12},a[57]=r.borderRadiusLG,a[58]=r.colorFillQuaternary,a[59]=O):O=a[59],a[60]!==s.allocations?(U=n.jsx(Re,{allocations:s.allocations}),a[60]=s.allocations,a[61]=U):U=a[61],a[62]!==O||a[63]!==U?(V=n.jsx("div",{style:O,children:U}),a[62]=O,a[63]=U,a[64]=V):V=a[64],a[65]!==W||a[66]!==V?($=n.jsxs("div",{children:[W,V]}),a[65]=W,a[66]=V,a[67]=$):$=a[67],a[68]===Symbol.for("react.memo_cache_sentinel")?(Y=n.jsx(M,{dashed:!0,style:{margin:"4px 0"}}),a[68]=Y):Y=a[68],a[69]!==r.colorTextDescription?(J=n.jsx(P,{style:{fontSize:12,color:r.colorTextDescription}}),a[69]=r.colorTextDescription,a[70]=J):J=a[70],a[71]!==r.colorTextSecondary?(Q={fontSize:12,color:r.colorTextSecondary},a[71]=r.colorTextSecondary,a[72]=Q):Q=a[72];const X=s.phone||"-";let Z,ae,le,se,ie,te,re;return a[73]!==Q||a[74]!==X?(Z=n.jsx(Ie,{style:Q,children:X}),a[73]=Q,a[74]=X,a[75]=Z):Z=a[75],a[76]!==J||a[77]!==Z?(ae=n.jsxs(x,{align:"center",gap:"small",children:[J,Z]}),a[76]=J,a[77]=Z,a[78]=ae):ae=a[78],a[79]!==s.email||a[80]!==r.colorTextDescription||a[81]!==r.colorTextSecondary?(le=s.email&&n.jsxs(x,{align:"center",gap:"small",children:[n.jsx(B,{style:{fontSize:12,color:r.colorTextDescription}}),n.jsx(Ie,{style:{fontSize:12,color:r.colorTextSecondary},ellipsis:!0,children:s.email})]}),a[79]=s.email,a[80]=r.colorTextDescription,a[81]=r.colorTextSecondary,a[82]=le):le=a[82],a[83]!==ae||a[84]!==le?(se=n.jsxs(x,{vertical:!0,gap:4,children:[ae,le]}),a[83]=ae,a[84]=le,a[85]=se):se=a[85],a[86]!==E||a[87]!==$||a[88]!==se?(ie=n.jsxs(x,{vertical:!0,gap:"middle",style:A,children:[E,$,Y,se]}),a[86]=E,a[87]=$,a[88]=se,a[89]=ie):ie=a[89],a[90]!==w||a[91]!==N||a[92]!==ie?(te=n.jsx(m.Meta,{avatar:w,title:N,description:ie}),a[90]=w,a[91]=N,a[92]=ie,a[93]=te):te=a[93],a[94]!==te||a[95]!==f?(re=n.jsx(m,{hoverable:!0,style:c,styles:d,actions:f,children:te}),a[94]=te,a[95]=f,a[96]=re):re=a[96],re};function Ne(e,a){return n.jsx(I,{bordered:!1,color:"blue",style:{margin:0,fontSize:11},children:e},a)}const Ae=e=>{const a=l.c(38),{open:i,onCancel:t,onSubmit:r,initialValues:d,loading:h}=e,[x]=s.useForm(),{data:u}=D(),{data:p}=K();let y,j;a[0]!==x||a[1]!==d||a[2]!==i?(y=()=>{if(i)if(d){const e=d.allocations||[],a=new Map;e.forEach(e=>{a.has(e.subject_id)||a.set(e.subject_id,{subject_id:e.subject_id,class_ids:[]}),a.get(e.subject_id).class_ids.push(e.class_id)});const l=Array.from(a.values());x.setFieldsValue({...d,homeroom_class_id:d.homeroom_class?.id,allocations:l})}else x.resetFields()},j=[i,d,x],a[0]=x,a[1]=d,a[2]=i,a[3]=y,a[4]=j):(y=a[3],j=a[4]),$.useEffect(y,j);const g=d?"Edit Data Guru":"Tambah Guru Baru";let b,f,w,v,T,C,z,P,B,I,L,R,F,N,A,E;return a[5]!==x?(b=()=>x.submit(),a[5]=x,a[6]=b):b=a[6],a[7]===Symbol.for("react.memo_cache_sentinel")?(f={allocations:[]},a[7]=f):f=a[7],a[8]===Symbol.for("react.memo_cache_sentinel")?(w=n.jsx(M,{titlePlacement:"left",children:n.jsxs(_,{children:[n.jsx(xe,{size:16})," Data Pribadi"]})}),a[8]=w):w=a[8],a[9]===Symbol.for("react.memo_cache_sentinel")?(v=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"full_name",label:"Nama Lengkap",rules:[{required:!0}],children:n.jsx(c,{placeholder:"Nama lengkap dengan gelar"})})}),a[9]=v):v=a[9],a[10]===Symbol.for("react.memo_cache_sentinel")?(T=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"username",label:"Username (Login)",rules:[{required:!0}],children:n.jsx(c,{placeholder:"Username unik"})})}),a[10]=T):T=a[10],a[11]===Symbol.for("react.memo_cache_sentinel")?(C=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"nip",label:"NIP / NIY",children:n.jsx(c,{placeholder:"Nomor Induk Pegawai"})})}),a[11]=C):C=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(z=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"phone",label:"No. Telepon",children:n.jsx(c,{placeholder:"08..."})})}),a[12]=z):z=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(P=n.jsxs(S,{gutter:16,children:[v,T,C,z,n.jsx(k,{span:24,children:n.jsx(s.Item,{name:"email",label:"Email",children:n.jsx(c,{placeholder:"email@sekolah.sch.id"})})})]}),a[13]=P):P=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(B=n.jsx(M,{titlePlacement:"left",children:n.jsxs(_,{children:[n.jsx(ye,{size:16})," Tugas Tambahan"]})}),a[14]=B):B=a[14],a[15]!==u?(I=u?.map(Ee),a[15]=u,a[16]=I):I=a[16],a[17]!==I?(L=n.jsx(s.Item,{name:"homeroom_class_id",label:"Wali Kelas (Opsional)",help:"Pilih kelas jika guru ini adalah wali kelas",children:n.jsx(le,{allowClear:!0,placeholder:"Pilih Kelas",options:I})}),a[17]=I,a[18]=L):L=a[18],a[19]===Symbol.for("react.memo_cache_sentinel")?(R=n.jsx(M,{titlePlacement:"left",children:n.jsxs(_,{children:[n.jsx(oe,{size:16})," Mata Pelajaran yang Diampu"]})}),a[19]=R):R=a[19],a[20]!==u||a[21]!==p?(F=n.jsx(s.List,{name:"allocations",children:(e,a)=>{const{add:l,remove:i}=a;return n.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[e.map(e=>{const{key:a,name:l,...t}=e;return n.jsx(m,{size:"small",type:"inner",styles:{body:{padding:"12px",background:"#f9f9f9"}},children:n.jsxs(S,{gutter:12,align:"top",children:[" ",n.jsx(k,{span:8,children:n.jsx(s.Item,{...t,name:[l,"subject_id"],label:"Mata Pelajaran",rules:[{required:!0,message:"Wajib pilih"}],children:n.jsx(le,{placeholder:"Pilih Mapel",showSearch:{optionFilterProp:["label"]},options:p?.map(Ge),allowClear:!0,virtual:!1})})}),n.jsx(k,{span:14,children:n.jsx(s.Item,{...t,name:[l,"class_ids"],label:"Daftar Kelas Ajar",rules:[{required:!0,message:"Pilih minimal 1 kelas"}],children:n.jsx(le,{mode:"multiple",placeholder:"Pilih Kelas (Bisa banyak)",allowClear:!0,virtual:!1,maxTagCount:"responsive",options:u?.map(qe)})})}),n.jsx(k,{span:2,style:{textAlign:"right",paddingTop:"30px"},children:n.jsx(o,{type:"text",danger:!0,icon:n.jsx(Q,{size:18}),onClick:()=>i(l)})})]})},a)}),n.jsx(o,{type:"dashed",onClick:()=>l(),block:!0,icon:n.jsx(J,{size:16}),children:"Tambah Alokasi Mapel"})]})}}),a[20]=u,a[21]=p,a[22]=F):F=a[22],a[23]!==d?(N=!d&&n.jsx(s.Item,{name:"password",hidden:!0,initialValue:"123456",children:n.jsx(c,{})}),a[23]=d,a[24]=N):N=a[24],a[25]!==x||a[26]!==r||a[27]!==L||a[28]!==F||a[29]!==N?(A=n.jsxs(s,{form:x,layout:"vertical",onFinish:r,initialValues:f,children:[w,P,B,L,R,F,N]}),a[25]=x,a[26]=r,a[27]=L,a[28]=F,a[29]=N,a[30]=A):A=a[30],a[31]!==h||a[32]!==t||a[33]!==i||a[34]!==A||a[35]!==g||a[36]!==b?(E=n.jsx(ae,{title:g,open:i,onCancel:t,onOk:b,confirmLoading:h,width:750,centered:!0,children:A}),a[31]=h,a[32]=t,a[33]=i,a[34]=A,a[35]=g,a[36]=b,a[37]=E):E=a[37],E};function Ee(e){return{label:e.name,value:e.id}}function Ge(e){return{label:e.name,value:e.id}}function qe(e){return{label:e.name,value:e.id}}const{Title:He,Text:We}=a,{Content:Oe}=R,Ue=()=>{const[e,a]=$.useState(!1),[l,s]=$.useState(null),[i,t]=$.useState(""),[r,m]=$.useState(1),[h]=$.useState(12),[x,u]=$.useState([]),{data:p,isFetching:y}=F({page:r,limit:h,search:i}),[j,{isLoading:g}]=N(),[b,{isLoading:f}]=A(),[_]=E();$.useEffect(()=>{p?.data&&u(1===r?p.data:e=>{const a=p.data.filter(a=>!e.some(e=>e.id===a.id));return[...e,...a]})},[p,r]),$.useEffect(()=>{m(1)},[i]);return n.jsx(R,{style:{minHeight:"100vh",backgroundColor:"white"},children:n.jsxs(Oe,{children:[n.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[n.jsxs("div",{children:[n.jsx(He,{level:3,style:{margin:0},children:"Data Guru"}),n.jsx(We,{type:"secondary",children:"Kelola data guru, wali kelas, dan alokasi mengajar"})]}),n.jsxs("div",{style:{display:"flex",gap:12},children:[n.jsx(c,{placeholder:"Cari Nama / NIP...",prefix:n.jsx(X,{size:16,className:"text-gray-400"}),style:{width:250,borderRadius:8},allowClear:!0,onChange:e=>t(e.target.value)}),n.jsx(o,{type:"primary",icon:n.jsx(ie,{size:18}),onClick:()=>{s(null),a(!0)},children:"Tambah Guru"})]})]}),n.jsx(De,{data:x,loading:y,hasMore:x.length<(p?.total||0),onLoadMore:()=>{!y&&x.length<(p?.total||0)&&m(e=>e+1)},onEdit:e=>{s(e),a(!0)},onDelete:async e=>{try{await _(e).unwrap(),d.success("Guru berhasil dihapus"),m(1)}catch(a){d.error("Gagal menghapus guru")}}}),n.jsx(Ae,{open:e,onCancel:()=>{a(!1),s(null)},onSubmit:async e=>{try{const i=[];e.allocations&&e.allocations.length>0&&e.allocations.forEach(e=>{e.class_ids&&Array.isArray(e.class_ids)&&e.class_ids.forEach(a=>{i.push({subject_id:e.subject_id,class_id:a})})});const t={...e,allocations:i};l?(await b({id:l.id,...t}).unwrap(),d.success("Data guru diperbarui"),m(1)):(await j(t).unwrap(),d.success("Guru baru ditambahkan"),m(1)),a(!1),s(null)}catch(i){console.error(i),d.error("Terjadi kesalahan saat menyimpan")}},initialValues:l,loading:g||f})]})})},{Text:Ve,Title:$e}=a,Ye=e=>{const a=l.c(102),{student:s,onEdit:i,onDelete:t,isDeleting:r}=e,{token:c}=v.useToken(),d=s.class_history&&s.class_history.length>0?s.class_history[0]:null,h=`1px solid ${c.colorBorderSecondary}`;let x,u,p,y,j,g,b,f,_,S,k;a[0]!==h||a[1]!==c.boxShadowTertiary?(x={borderRadius:12,overflow:"hidden",border:h,boxShadow:c.boxShadowTertiary},a[0]=h,a[1]=c.boxShadowTertiary,a[2]=x):x=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(u={body:{padding:"20px"}},a[3]=u):u=a[3],a[4]===Symbol.for("react.memo_cache_sentinel")?(p=n.jsx(te,{size:16,className:"text-amber-500"}),a[4]=p):p=a[4],a[5]!==i||a[6]!==s?(y=n.jsx(o,{type:"text",block:!0,icon:p,onClick:()=>i(s),children:"Edit"},"edit"),a[5]=i,a[6]=s,a[7]=y):y=a[7],a[8]!==t||a[9]!==s.id?(j=()=>t(s.id),a[8]=t,a[9]=s.id,a[10]=j):j=a[10],a[11]!==r?(g={danger:!0,loading:r},a[11]=r,a[12]=g):g=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(b=n.jsx(o,{type:"text",danger:!0,block:!0,icon:n.jsx(Q,{size:16}),children:"Hapus"}),a[13]=b):b=a[13],a[14]!==j||a[15]!==g?(f=n.jsx(ee,{title:"Hapus Siswa?",description:"Data nilai & riwayat akan hilang.",onConfirm:j,okText:"Hapus",cancelText:"Batal",okButtonProps:g,children:b},"delete"),a[14]=j,a[15]=g,a[16]=f):f=a[16],a[17]!==y||a[18]!==f?(_=[y,f],a[17]=y,a[18]=f,a[19]=_):_=a[19],a[20]===Symbol.for("react.memo_cache_sentinel")?(S={display:"flex",gap:16,marginBottom:20},a[20]=S):S=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(k=n.jsx(xe,{size:32}),a[21]=k):k=a[21];const w="P"===s.gender?"#ffd6e7":"#bae7ff",T="P"===s.gender?"#d4380d":"#0050b3",C=`2px solid ${c.colorBgContainer}`;let P,B,L,D,K,R,F,N,A,E;a[22]!==w||a[23]!==T||a[24]!==C?(P=n.jsx(z,{size:64,icon:k,style:{backgroundColor:w,color:T,flexShrink:0,border:C,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}}),a[22]=w,a[23]=T,a[24]=C,a[25]=P):P=a[25],a[26]===Symbol.for("react.memo_cache_sentinel")?(B={flex:1,minWidth:0},L={display:"flex",justifyContent:"space-between",alignItems:"flex-start"},D={minWidth:0},a[26]=B,a[27]=L,a[28]=D):(B=a[26],L=a[27],D=a[28]),a[29]===Symbol.for("react.memo_cache_sentinel")?(K={margin:0,fontWeight:700},a[29]=K):K=a[29],a[30]!==s.full_name?(R={tooltip:s.full_name},a[30]=s.full_name,a[31]=R):R=a[31],a[32]!==s.full_name||a[33]!==R?(F=n.jsx($e,{level:5,style:K,ellipsis:R,children:s.full_name}),a[32]=s.full_name,a[33]=R,a[34]=F):F=a[34],a[35]===Symbol.for("react.memo_cache_sentinel")?(N={fontSize:13},a[35]=N):N=a[35],a[36]!==s.username?(A=n.jsxs(Ve,{type:"secondary",style:N,children:["@",s.username]}),a[36]=s.username,a[37]=A):A=a[37],a[38]!==F||a[39]!==A?(E=n.jsxs("div",{style:D,children:[F,A]}),a[38]=F,a[39]=A,a[40]=E):E=a[40];const G=s.is_active?"success":"error";let q;a[41]===Symbol.for("react.memo_cache_sentinel")?(q={marginRight:0,borderRadius:100,fontSize:10,fontWeight:600,lineHeight:"20px"},a[41]=q):q=a[41];const H=s.is_active?"AKTIF":"NON-AKTIF";let W,O,U;a[42]!==G||a[43]!==H?(W=n.jsx(I,{color:G,style:q,children:H}),a[42]=G,a[43]=H,a[44]=W):W=a[44],a[45]!==E||a[46]!==W?(O=n.jsx("div",{style:B,children:n.jsxs("div",{style:L,children:[E,W]})}),a[45]=E,a[46]=W,a[47]=O):O=a[47],a[48]!==P||a[49]!==O?(U=n.jsxs("div",{style:S,children:[P,O]}),a[48]=P,a[49]=O,a[50]=U):U=a[50];const V=`1px solid ${c.colorBorderSecondary}`;let $,Y,J,X,Z,ae,le;a[51]!==V||a[52]!==c.colorFillAlter?($={backgroundColor:c.colorFillAlter,padding:"12px 16px",borderRadius:8,border:V},a[51]=V,a[52]=c.colorFillAlter,a[53]=$):$=a[53],a[54]===Symbol.for("react.memo_cache_sentinel")?(Y={display:"flex",alignItems:"center",marginBottom:8},J={width:24,display:"flex",justifyContent:"center",marginRight:8},a[54]=Y,a[55]=J):(Y=a[54],J=a[55]),a[56]!==c.colorPrimary?(X=n.jsx("div",{style:J,children:n.jsx(ue,{size:16,color:c.colorPrimary})}),a[56]=c.colorPrimary,a[57]=X):X=a[57],a[58]===Symbol.for("react.memo_cache_sentinel")?(Z={flex:1},a[58]=Z):Z=a[58],a[59]===Symbol.for("react.memo_cache_sentinel")?(ae=n.jsx(Ve,{type:"secondary",style:{fontSize:11,display:"block"},children:"Kelas Saat Ini"}),a[59]=ae):ae=a[59],a[60]===Symbol.for("react.memo_cache_sentinel")?(le={fontSize:14},a[60]=le):le=a[60];const se=d?`${d.grade} - ${d.class}`:"Belum Masuk Kelas";let ie,re,ne,ce,de,me,he,pe,ye;a[61]!==se?(ie=n.jsxs("div",{style:Z,children:[ae,n.jsx(Ve,{strong:!0,style:le,children:se})]}),a[61]=se,a[62]=ie):ie=a[62],a[63]!==X||a[64]!==ie?(re=n.jsxs("div",{style:Y,children:[X,ie]}),a[63]=X,a[64]=ie,a[65]=re):re=a[65],a[66]===Symbol.for("react.memo_cache_sentinel")?(ne=n.jsx(M,{style:{margin:"8px 0"}}),ce={display:"flex",gap:12},de={flex:1,display:"flex",alignItems:"center"},me={width:24,display:"flex",justifyContent:"center",marginRight:8},a[66]=ne,a[67]=ce,a[68]=de,a[69]=me):(ne=a[66],ce=a[67],de=a[68],me=a[69]),a[70]!==c.colorTextSecondary?(he=n.jsx("div",{style:me,children:n.jsx(je,{size:16,color:c.colorTextSecondary})}),a[70]=c.colorTextSecondary,a[71]=he):he=a[71],a[72]===Symbol.for("react.memo_cache_sentinel")?(pe=n.jsx(Ve,{type:"secondary",style:{fontSize:11,display:"block"},children:"NIS"}),a[72]=pe):pe=a[72],a[73]===Symbol.for("react.memo_cache_sentinel")?(ye={fontSize:13},a[73]=ye):ye=a[73];const ge=s.nis||"-";let be,fe,_e,Se,ke,we,ve;a[74]!==ge?(be=n.jsxs("div",{children:[pe,n.jsx(Ve,{style:ye,children:ge})]}),a[74]=ge,a[75]=be):be=a[75],a[76]!==he||a[77]!==be?(fe=n.jsxs("div",{style:de,children:[he,be]}),a[76]=he,a[77]=be,a[78]=fe):fe=a[78],a[79]===Symbol.for("react.memo_cache_sentinel")?(_e={flex:1,display:"flex",alignItems:"center"},Se={width:24,display:"flex",justifyContent:"center",marginRight:8},a[79]=_e,a[80]=Se):(_e=a[79],Se=a[80]),a[81]!==c.colorTextSecondary?(ke=n.jsx("div",{style:Se,children:n.jsx(oe,{size:16,color:c.colorTextSecondary})}),a[81]=c.colorTextSecondary,a[82]=ke):ke=a[82],a[83]===Symbol.for("react.memo_cache_sentinel")?(we=n.jsx(Ve,{type:"secondary",style:{fontSize:11,display:"block"},children:"NISN"}),a[83]=we):we=a[83],a[84]===Symbol.for("react.memo_cache_sentinel")?(ve={fontSize:13},a[84]=ve):ve=a[84];const Te=s.nisn||"-";let Ce,ze,Pe,Be,Ie;return a[85]!==Te?(Ce=n.jsxs("div",{children:[we,n.jsx(Ve,{style:ve,children:Te})]}),a[85]=Te,a[86]=Ce):Ce=a[86],a[87]!==ke||a[88]!==Ce?(ze=n.jsxs("div",{style:_e,children:[ke,Ce]}),a[87]=ke,a[88]=Ce,a[89]=ze):ze=a[89],a[90]!==fe||a[91]!==ze?(Pe=n.jsxs("div",{style:ce,children:[fe,ze]}),a[90]=fe,a[91]=ze,a[92]=Pe):Pe=a[92],a[93]!==$||a[94]!==re||a[95]!==Pe?(Be=n.jsxs("div",{style:$,children:[re,ne,Pe]}),a[93]=$,a[94]=re,a[95]=Pe,a[96]=Be):Be=a[96],a[97]!==_||a[98]!==x||a[99]!==U||a[100]!==Be?(Ie=n.jsxs(m,{hoverable:!0,style:x,styles:u,actions:_,children:[U,Be]}),a[97]=_,a[98]=x,a[99]=U,a[100]=Be,a[101]=Ie):Ie=a[101],Ie},{Text:Je}=a,{Option:Qe}=le,Xe=e=>{const a=l.c(79),{open:i,onClose:t,onSubmit:r,initialValues:d,isLoading:m}=e,[h]=s.useForm(),{token:x}=v.useToken(),[u,p]=$.useState(null),{data:y,isLoading:j}=G();let g;a[0]!==u?(g={gradeId:u},a[0]=u,a[1]=g):g=a[1];const b=!u;let f;a[2]!==b?(f={skip:b},a[2]=b,a[3]=f):f=a[3];const{data:w,isLoading:T}=q(g,f);let C,z,P;a[4]!==h||a[5]!==d||a[6]!==i?(C=()=>{i&&(d?(h.setFieldsValue(d),d.current_class_id):(h.resetFields(),p(null)))},z=[i,d,h],a[4]=h,a[5]=d,a[6]=i,a[7]=C,a[8]=z):(C=a[7],z=a[8]),$.useEffect(C,z),a[9]!==h?(P=e=>{p(e),h.setFieldsValue({class_id:null})},a[9]=h,a[10]=P):P=a[10];const B=P,I=d?"Edit Siswa":"Tambah Siswa Baru";let M,L,D,K,R,F,N,A,E,H,W,O;a[11]!==I?(M=n.jsx(Je,{strong:!0,children:I}),a[11]=I,a[12]=M):M=a[12],a[13]!==t?(L=n.jsx(o,{onClick:t,children:"Batal"}),a[13]=t,a[14]=L):L=a[14],a[15]!==h?(D=()=>h.submit(),a[15]=h,a[16]=D):D=a[16],a[17]!==m||a[18]!==D?(K=n.jsx(o,{type:"primary",onClick:D,loading:m,children:"Simpan"}),a[17]=m,a[18]=D,a[19]=K):K=a[19],a[20]!==K||a[21]!==L?(R=n.jsxs(_,{children:[L,K]}),a[20]=K,a[21]=L,a[22]=R):R=a[22],a[23]===Symbol.for("react.memo_cache_sentinel")?(F={marginBottom:24},a[23]=F):F=a[23],a[24]===Symbol.for("react.memo_cache_sentinel")?(N=n.jsx(Je,{type:"secondary",style:{fontSize:12,textTransform:"uppercase",display:"block",marginBottom:12},children:"Akun & Login"}),a[24]=N):N=a[24],a[25]===Symbol.for("react.memo_cache_sentinel")?(A=[{required:!0,message:"Nama wajib diisi"}],a[25]=A):A=a[25],a[26]!==x.colorTextPlaceholder?(E=n.jsx(s.Item,{name:"full_name",label:"Nama Lengkap",rules:A,children:n.jsx(c,{prefix:n.jsx(xe,{size:16,color:x.colorTextPlaceholder}),placeholder:"Nama Siswa"})}),a[26]=x.colorTextPlaceholder,a[27]=E):E=a[27],a[28]!==d?(H=!d&&n.jsxs(n.Fragment,{children:[n.jsx(s.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Username wajib diisi"}],children:n.jsx(c,{placeholder:"Username Login"})}),n.jsx(s.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Password wajib diisi"}],children:n.jsx(c.Password,{placeholder:"Password Akun"})})]}),a[28]=d,a[29]=H):H=a[29],a[30]!==d?(W=d&&n.jsx(s.Item,{name:"is_active",label:"Status Akun",valuePropName:"checked",children:n.jsxs(le,{children:[n.jsx(Qe,{value:!0,children:"Aktif"}),n.jsx(Qe,{value:!1,children:"Non-Aktif"})]})}),a[30]=d,a[31]=W):W=a[31],a[32]!==E||a[33]!==H||a[34]!==W?(O=n.jsxs("div",{style:F,children:[N,E,H,W]}),a[32]=E,a[33]=H,a[34]=W,a[35]=O):O=a[35];const U=`1px solid ${x.colorSplit}`;let V,Y,J,Q,X,Z,ee,ae,se,ie,te,ne;a[36]!==U?(V={borderTop:U,paddingTop:24},a[36]=U,a[37]=V):V=a[37],a[38]===Symbol.for("react.memo_cache_sentinel")?(Y=n.jsx(Je,{type:"secondary",style:{fontSize:12,textTransform:"uppercase",display:"block",marginBottom:12},children:"Data Akademik"}),a[38]=Y):Y=a[38],a[39]===Symbol.for("react.memo_cache_sentinel")?(J=[{required:!0}],a[39]=J):J=a[39],a[40]!==x.colorTextPlaceholder?(Q=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"nis",label:"NIS",rules:J,children:n.jsx(c,{prefix:n.jsx(ue,{size:16,color:x.colorTextPlaceholder}),placeholder:"Nomor Induk"})})}),a[40]=x.colorTextPlaceholder,a[41]=Q):Q=a[41],a[42]===Symbol.for("react.memo_cache_sentinel")?(X=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"nisn",label:"NISN",children:n.jsx(c,{placeholder:"NIS Nasional"})})}),a[42]=X):X=a[42],a[43]!==Q?(Z=n.jsxs(S,{gutter:16,children:[Q,X]}),a[43]=Q,a[44]=Z):Z=a[44],a[45]===Symbol.for("react.memo_cache_sentinel")?(ee=[{required:!0,message:"Pilih jenis kelamin"}],a[45]=ee):ee=a[45],a[46]===Symbol.for("react.memo_cache_sentinel")?(ae=n.jsx(s.Item,{name:"gender",label:"Jenis Kelamin",rules:ee,children:n.jsxs(le,{placeholder:"Pilih Gender",children:[n.jsx(Qe,{value:"L",children:"Laki-laki"}),n.jsx(Qe,{value:"P",children:"Perempuan"})]})}),a[46]=ae):ae=a[46],a[47]===Symbol.for("react.memo_cache_sentinel")?(se=[{required:!0,message:"Pilih tingkat"}],a[47]=se):se=a[47],a[48]!==y?(ie=y?.map(Ze),a[48]=y,a[49]=ie):ie=a[49],a[50]!==B||a[51]!==j||a[52]!==ie?(te=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"grade_id",label:"Tingkat",rules:se,children:n.jsx(le,{placeholder:"Pilih Tingkat",onChange:B,loading:j,allowClear:!0,virtual:!1,children:ie})})}),a[50]=B,a[51]=j,a[52]=ie,a[53]=te):te=a[53],a[54]===Symbol.for("react.memo_cache_sentinel")?(ne=[{required:!0,message:"Pilih kelas"}],a[54]=ne):ne=a[54];const oe=!u;let ce,de,me,he,pe,ye;return a[55]!==w?(ce=w?.map(ea),a[55]=w,a[56]=ce):ce=a[56],a[57]!==T||a[58]!==oe||a[59]!==ce?(de=n.jsx(k,{span:12,children:n.jsx(s.Item,{name:"class_id",label:"Kelas",rules:ne,children:n.jsx(le,{placeholder:"Pilih Kelas",disabled:oe,loading:T,allowClear:!0,virtual:!1,children:ce})})}),a[57]=T,a[58]=oe,a[59]=ce,a[60]=de):de=a[60],a[61]!==te||a[62]!==de?(me=n.jsxs(S,{gutter:16,children:[te,de]}),a[61]=te,a[62]=de,a[63]=me):me=a[63],a[64]!==V||a[65]!==Z||a[66]!==me?(he=n.jsxs("div",{style:V,children:[Y,Z,ae,me]}),a[64]=V,a[65]=Z,a[66]=me,a[67]=he):he=a[67],a[68]!==h||a[69]!==r||a[70]!==O||a[71]!==he?(pe=n.jsxs(s,{form:h,layout:"vertical",onFinish:r,children:[O,he]}),a[68]=h,a[69]=r,a[70]=O,a[71]=he,a[72]=pe):pe=a[72],a[73]!==t||a[74]!==i||a[75]!==R||a[76]!==pe||a[77]!==M?(ye=n.jsx(re,{title:M,size:500,onClose:t,open:i,extra:R,children:pe}),a[73]=t,a[74]=i,a[75]=R,a[76]=pe,a[77]=M,a[78]=ye):ye=a[78],ye};function Ze(e){return n.jsx(Qe,{value:e.id,children:e.name},e.id)}function ea(e){return n.jsx(Qe,{value:e.id,children:e.name},e.id)}const{Title:aa,Text:la}=a,sa=()=>{const{token:e}=v.useToken(),[a,l]=$.useState(1),[s,i]=$.useState(""),[t,r]=$.useState([]),[m,h]=$.useState(!0),[x,u]=$.useState(!1),[p,y]=$.useState(null),{data:j,isFetching:g}=H({page:a,limit:12,search:s}),[b,{isLoading:f}]=W(),[S,{isLoading:k}]=O(),[w,{isLoading:T}]=U();$.useEffect(()=>{if(j?.data){r(1===a?j.data:e=>{const a=new Set(e.map(e=>e.id)),l=j.data.filter(e=>!a.has(e.id));return[...e,...l]});12*(a-1)+j.data.length>=j.totalData?h(!1):h(!0)}},[j,a]);const C=(e=null)=>{y(e),u(!0)},z=async e=>{try{await w(e).unwrap(),r(a=>a.filter(a=>a.id!==e)),d.success("Siswa dihapus")}catch(a){d.error("Gagal menghapus")}};return n.jsxs("div",{style:{minHeight:"100vh"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[n.jsxs("div",{children:[n.jsxs(aa,{level:3,style:{margin:0},children:["Data Siswa ",n.jsxs("span",{children:["(",j?.totalData||0,")"]})]}),n.jsx(la,{type:"secondary",children:"Kelola data siswa sekolah"})]}),n.jsxs(_,{children:[n.jsx(c,{placeholder:"Cari Siswa...",prefix:n.jsx(X,{size:16,color:e.colorTextPlaceholder}),onChange:e=>{i(e.target.value),l(1),h(!0)},style:{width:250},allowClear:!0}),n.jsx(o,{type:"primary",icon:n.jsx(J,{size:18}),onClick:()=>C(null),children:"Tambah"})]})]}),n.jsx(Y,{data:t,loading:g,hasMore:m,onLoadMore:()=>{!g&&m&&l(e=>e+1)},height:"calc(100vh - 150px)",emptyText:"Tidak ada siswa ditemukan",grid:{gutter:[16,16],xs:24,sm:12,md:8,lg:6,xl:6,xxl:4},renderItem:e=>n.jsx(Ye,{student:e,onEdit:C,onDelete:z,isDeleting:T})}),n.jsx(Xe,{open:x,onClose:()=>u(!1),onSubmit:async e=>{try{const a={...e,birth_date:e.birth_date?e.birth_date.format("YYYY-MM-DD"):null};p?(await S({id:p.id,...a}).unwrap(),r(e=>e.map(e=>e.id===p.id?{...e,...a}:e)),d.success("Berhasil diperbarui")):(await b(a).unwrap(),l(1),d.success("Siswa ditambahkan")),u(!1)}catch(a){d.error("Gagal menyimpan data")}},initialValues:p,isLoading:f||k})]})},ia=()=>{const e=l.c(4);let a,s,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={label:"Mata Pelajaran",key:"subject",icon:n.jsx(oe,{size:14}),children:n.jsx(Be,{})},e[0]=a):a=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(s={label:"Guru",key:"teacher",icon:n.jsx(be,{size:14}),children:n.jsx(Ue,{})},e[1]=s):s=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(i=[a,s,{label:"Siswa",key:"student",icon:n.jsx(pe,{size:14}),children:n.jsx(sa,{})}],e[2]=i):i=e[2];const t=i;let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=n.jsx(V,{title:"Manajemen Pendidikan",children:n.jsx(w,{items:t,defaultActiveKey:"subject"})}),e[3]=r):r=e[3],r};export{ia as default};
