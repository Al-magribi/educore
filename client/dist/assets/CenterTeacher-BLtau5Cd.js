import{I as e,a,F as s,m as n,H as t,J as i,j as r,C as l,h as o,R as c,f as m,K as d,x as h,y as u,s as x,L as p,z as j,T as f,M as y,N as b,d as g,G as _,g as S,S as k,o as v,B as w,p as I,r as C,t as P,b as T}from"./index-BgYL1Jri.js";import{b as N}from"./vendor-BhwIo2T6.js";import{I as z}from"./InfiniteScrollList-DlzZmKey.js";import{a as B}from"./index-C4JOlkeI.js";import{S as F}from"./index-Bl0fsb3c.js";import{M as L}from"./index-DLc7ETq3.js";import{u as M}from"./useDebounced-DcYlp9RB.js";import{P as G}from"./index-D_chJppB.js";import{R as O}from"./DeleteOutlined-CZK3iH-n.js";import"./index-DvRJiCh0.js";import"./ActionButton-CJaqdhKg.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},D.apply(this,arguments)}const A=(a,s)=>N.createElement(e,D({},a,{ref:s,icon:H})),E=N.forwardRef(A),{Option:q}=B,V=e=>{const f=a.c(58),{open:y,onCancel:b,onSuccess:g,initialData:_}=e,[S]=s.useForm();let k;f[0]===Symbol.for("react.memo_cache_sentinel")?(k={page:1,limit:100},f[0]=k):k=f[0];const{data:v,isLoading:w}=n(k),[I,C]=t(),{isLoading:P}=C,[T,z]=i(),{isLoading:M}=z;let G,O,H;f[1]!==S||f[2]!==_||f[3]!==y?(G=()=>{y&&(_?S.setFieldsValue({..._,password:"",homebase_id:_.homebase_id||void 0}):S.resetFields())},O=[y,_,S],f[1]=S,f[2]=_,f[3]=y,f[4]=G,f[5]=O):(G=f[4],O=f[5]),N.useEffect(G,O),f[6]!==I||f[7]!==S||f[8]!==_||f[9]!==g||f[10]!==T?(H=async e=>{try{_?(await T({id:_.id,...e}).unwrap(),x.success("Data guru diperbarui")):(await I(e).unwrap(),x.success("Guru berhasil ditambahkan")),S.resetFields(),g()}catch(a){const e=a;x.error(e?.data?.message||"Terjadi kesalahan")}},f[6]=I,f[7]=S,f[8]=_,f[9]=g,f[10]=T,f[11]=H):H=f[11];const D=H,A=_?"Edit Data Guru":"Tambah Guru Baru",E=P||M;let q,V,W,R;f[12]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx(p,{orientation:"left",style:{margin:"0 0 16px 0"},children:"Informasi Akun"}),f[12]=q):q=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(V=[{required:!0,message:"Nama wajib diisi"}],f[13]=V):V=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(W=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"full_name",label:"Nama Lengkap (dengan gelar)",rules:V,children:r.jsx(o,{placeholder:"Contoh: Budi Santoso, S.Pd.",prefix:r.jsx(c,{})})})}),f[14]=W):W=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(R=[{required:!0,message:"Username wajib diisi"}],f[15]=R):R=f[15];const U=!!_;let Y;f[16]!==U?(Y=r.jsxs(m,{gutter:16,children:[W,r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"username",label:"Username Login",rules:R,children:r.jsx(o,{placeholder:"Username unik",disabled:U})})})]}),f[16]=U,f[17]=Y):Y=f[17];const J=_?"Password Baru (Opsional)":"Password",Q=!_;let X,Z,$,ee;f[18]!==Q?(X={required:Q,message:"Password wajib diisi"},f[18]=Q,f[19]=X):X=f[19],f[20]===Symbol.for("react.memo_cache_sentinel")?(Z={min:6,message:"Minimal 6 karakter"},f[20]=Z):Z=f[20],f[21]!==X?($=[X,Z],f[21]=X,f[22]=$):$=f[22],f[23]===Symbol.for("react.memo_cache_sentinel")?(ee=r.jsx(j,{}),f[23]=ee):ee=f[23];const ae=_?"Biarkan kosong jika tidak diubah":"Password akun";let se,ne,te,ie,re,le,oe,ce,me,de,he,ue,xe;return f[24]!==ae?(se=r.jsx(o.Password,{prefix:ee,placeholder:ae}),f[24]=ae,f[25]=se):se=f[25],f[26]!==J||f[27]!==$||f[28]!==se?(ne=r.jsx(s.Item,{name:"password",label:J,rules:$,children:se}),f[26]=J,f[27]=$,f[28]=se,f[29]=ne):ne=f[29],f[30]===Symbol.for("react.memo_cache_sentinel")?(te=r.jsx(p,{orientation:"left",style:{margin:"10px 0 16px 0"},children:"Data Kepegawaian"}),f[30]=te):te=f[30],f[31]===Symbol.for("react.memo_cache_sentinel")?(ie=[{required:!0,message:"Guru wajib memiliki Homebase"}],f[31]=ie):ie=f[31],f[32]!==v?.data?(re=v?.data?.map(K),f[32]=v?.data,f[33]=re):re=f[33],f[34]!==w||f[35]!==re?(le=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"homebase_id",label:"Penempatan (Homebase)",rules:ie,children:r.jsx(B,{placeholder:"Pilih Satuan Pendidikan",loading:w,showSearch:!0,optionFilterProp:"children",children:re})})}),f[34]=w,f[35]=re,f[36]=le):le=f[36],f[37]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"nip",label:"NIP / NIY",children:r.jsx(o,{placeholder:"Nomor Induk",prefix:r.jsx(d,{})})})}),f[37]=oe):oe=f[37],f[38]!==le?(ce=r.jsxs(m,{gutter:16,children:[le,oe]}),f[38]=le,f[39]=ce):ce=f[39],f[40]===Symbol.for("react.memo_cache_sentinel")?(me=r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"phone",label:"No. Telepon / WhatsApp",children:r.jsx(o,{placeholder:"08xxx",prefix:r.jsx(h,{})})})}),f[40]=me):me=f[40],f[41]===Symbol.for("react.memo_cache_sentinel")?(de=r.jsxs(m,{gutter:16,children:[me,r.jsx(l,{span:12,children:r.jsx(s.Item,{name:"email",label:"Email",children:r.jsx(o,{type:"email",placeholder:"email@sekolah.sch.id",prefix:r.jsx(u,{})})})})]}),f[41]=de):de=f[41],f[42]!==_?(he=_&&r.jsx(s.Item,{name:"is_active",label:"Status Akun",valuePropName:"checked",children:r.jsx(F,{checkedChildren:"Aktif",unCheckedChildren:"Nonaktif"})}),f[42]=_,f[43]=he):he=f[43],f[44]!==S||f[45]!==D||f[46]!==Y||f[47]!==ne||f[48]!==ce||f[49]!==he?(ue=r.jsxs(s,{form:S,layout:"vertical",onFinish:D,children:[q,Y,ne,te,ce,de,he]}),f[44]=S,f[45]=D,f[46]=Y,f[47]=ne,f[48]=ce,f[49]=he,f[50]=ue):ue=f[50],f[51]!==S.submit||f[52]!==b||f[53]!==y||f[54]!==ue||f[55]!==A||f[56]!==E?(xe=r.jsx(L,{title:A,open:y,onCancel:b,onOk:S.submit,confirmLoading:E,destroyOnHidden:!0,width:700,children:ue}),f[51]=S.submit,f[52]=b,f[53]=y,f[54]=ue,f[55]=A,f[56]=E,f[57]=xe):xe=f[57],xe};function K(e){return r.jsx(q,{value:e.id,children:e.name},e.id)}const{Title:W,Text:R}=f,U=()=>{const e=a.c(42),[s,n]=N.useState(1),[t,i]=N.useState("");let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[m,d]=N.useState(l),[h,u]=N.useState(!1),[p,j]=N.useState(null),f=M(t,500);let T;e[1]!==f||e[2]!==s?(T={page:s,limit:16,search:f},e[1]=f,e[2]=s,e[3]=T):T=e[3];const{data:B,isFetching:F,refetch:L}=y(T),[H,D]=b(),{isLoading:A}=D;let q,K,U,J,Q;e[4]!==B||e[5]!==s?(q=()=>{B?.data&&d(1===s?B.data:e=>{const a=B.data.filter(a=>!e.some(e=>e.id===a.id));return[...e,...a]})},K=[B,s],e[4]=B,e[5]=s,e[6]=q,e[7]=K):(q=e[6],K=e[7]),N.useEffect(q,K),e[8]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{n(1)},e[8]=U):U=e[8],e[9]!==t?(J=[t],e[9]=t,e[10]=J):J=e[10],N.useEffect(U,J),e[11]!==B?.hasMore||e[12]!==F?(Q=()=>{B?.hasMore&&!F&&n(Y)},e[11]=B?.hasMore,e[12]=F,e[13]=Q):Q=e[13];const X=Q;let Z;e[14]===Symbol.for("react.memo_cache_sentinel")?(Z=e=>{j(void 0===e?null:e),u(!0)},e[14]=Z):Z=e[14];const $=Z;let ee;e[15]!==H||e[16]!==L?(ee=async e=>{try{await H(e).unwrap(),x.success("Guru berhasil dihapus"),n(1),L()}catch(a){x.error("Gagal menghapus data")}},e[15]=H,e[16]=L,e[17]=ee):ee=e[17];const ae=ee;let se;e[18]!==L?(se=()=>{u(!1),j(null),n(1),L()},e[18]=L,e[19]=se):se=e[19];const ne=se;let te;e[20]!==ae||e[21]!==A?(te=e=>r.jsx(g,{hoverable:!0,style:{height:"100%"},bodyStyle:{padding:"16px"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[r.jsxs("div",{style:{display:"flex",gap:12,flex:1,minWidth:0},children:[r.jsx(_,{size:48,src:e.img_url,icon:r.jsx(c,{}),shape:"circle",style:{backgroundColor:"#87d068",flexShrink:0}}),r.jsxs("div",{style:{minWidth:0,flex:1},children:[r.jsx(W,{level:5,style:{margin:0,fontSize:15},ellipsis:!0,children:e.full_name}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:2},children:[r.jsxs(R,{type:"secondary",style:{fontSize:12},children:["@",e.username]}),r.jsx("span",{style:{color:"#ddd"},children:"|"}),r.jsx(R,{type:"secondary",style:{fontSize:12},children:e.nip||"Non-NIP"})]}),r.jsxs("div",{style:{marginTop:8},children:[r.jsx(S,{icon:r.jsx(E,{}),color:"cyan",style:{marginBottom:4},children:e.homebase_name||"Belum ada Homebase"}),r.jsx(S,{color:e.is_active?"success":"error",children:e.is_active?"AKTIF":"NONAKTIF"})]}),r.jsxs(R,{type:"secondary",style:{fontSize:11,display:"block",marginTop:4,color:"#aaa"},children:[e.email||"—"," • ",e.phone||"—"]})]})]}),r.jsxs(k,{direction:"vertical",size:0,children:[r.jsx(v,{title:"Edit",children:r.jsx(w,{type:"text",size:"small",icon:r.jsx(I,{style:{color:"orange"}}),onClick:()=>$(e)})}),r.jsx(G,{title:"Hapus Guru?",description:"Data mengajar, nilai, dan absensi terkait mungkin akan hilang.",onConfirm:()=>ae(e.id),okText:"Ya, Hapus",cancelText:"Batal",children:r.jsx(w,{type:"text",size:"small",danger:!0,icon:r.jsx(O,{}),loading:A})})]})]})}),e[20]=ae,e[21]=A,e[22]=te):te=e[22];const ie=te;let re,le,oe,ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(re={display:"flex",justifyContent:"space-between",marginBottom:16,gap:10},e[23]=re):re=e[23],e[24]===Symbol.for("react.memo_cache_sentinel")?(le=r.jsx(C,{}),e[24]=le):le=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(oe=r.jsx(o,{placeholder:"Cari nama atau NIP...",prefix:le,allowClear:!0,onChange:e=>i(e.target.value),style:{maxWidth:300}}),e[25]=oe):oe=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsxs("div",{style:re,children:[oe,r.jsx(w,{type:"primary",icon:r.jsx(P,{}),onClick:()=>$(null),children:"Tambah Guru"})]}),e[26]=ce):ce=e[26];const me=B?.hasMore;let de,he,ue,xe,pe;return e[27]===Symbol.for("react.memo_cache_sentinel")?(de={gutter:[16,16],xs:24,sm:24,md:12,lg:8,xl:6,xxl:6},e[27]=de):de=e[27],e[28]!==X||e[29]!==F||e[30]!==m||e[31]!==ie||e[32]!==me?(he=r.jsx(z,{data:m,loading:F,hasMore:me,onLoadMore:X,renderItem:ie,height:"75vh",emptyText:"Belum ada data guru",grid:de}),e[28]=X,e[29]=F,e[30]=m,e[31]=ie,e[32]=me,e[33]=he):he=e[33],e[34]===Symbol.for("react.memo_cache_sentinel")?(ue=()=>u(!1),e[34]=ue):ue=e[34],e[35]!==p||e[36]!==ne||e[37]!==h?(xe=r.jsx(V,{open:h,initialData:p,onCancel:ue,onSuccess:ne}),e[35]=p,e[36]=ne,e[37]=h,e[38]=xe):xe=e[38],e[39]!==he||e[40]!==xe?(pe=r.jsxs(r.Fragment,{children:[ce,he,xe]}),e[39]=he,e[40]=xe,e[41]=pe):pe=e[41],pe};function Y(e){return e+1}const J=()=>{const e=a.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(T,{title:"Manajement Guru",children:r.jsx(U,{})}),e[0]=s):s=e[0],s};export{J as default};
