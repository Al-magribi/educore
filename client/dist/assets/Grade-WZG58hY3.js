import{aA as e,k as a,ag as t,F as s,br as r,bs as i,bt as o,bu as n,o as l,x as c,T as d,z as m,s as h,M as p,B as x,aM as u}from"./index-BMgVGS0W.js";import{r as y}from"./vendor-kOq7Q5-U.js";import{I as g}from"./InfiniteScrollList-DsHuus8o.js";import{G as j}from"./graduation-cap-RcmMcpAj.js";import{P as b}from"./pencil-B82zEJ2A.js";import{P as f}from"./index-BVGPo9j5.js";import{T as k,P as S}from"./trash-2-CUj98Q3w.js";import{M as B}from"./index-CDsHpMr4.js";import"./charts-CwbbN17O.js";import"./index-uTpWdo5L.js";import"./index-CmsZKls5.js";import"./index-FSaxVOpe.js";import"./ActionButton-DfMNmIbJ.js";import"./context-CW6N5AXl.js";import"./useClosable-CyYxAYSl.js";const _=e("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),{Search:T}=c,{Text:w,Title:C}=d,v=e=>{const d=a.c(86),{screens:v}=e,{token:P}=t.useToken(),[z]=s.useForm(),[G,I]=y.useState(1),[R,F]=y.useState("");let M;d[0]===Symbol.for("react.memo_cache_sentinel")?(M=[],d[0]=M):M=d[0];const[D,H]=y.useState(M),[E,N]=y.useState(!0),[A,X]=y.useState(!1),[W,q]=y.useState(null);let K;d[1]!==G||d[2]!==R?(K={page:G,limit:12,search:R},d[1]=G,d[2]=R,d[3]=K):K=d[3];const{data:O,isFetching:V}=r(K),[Y,$]=i(),{isLoading:J}=$,[Q,U]=o(),{isLoading:Z}=U,[ee,ae]=n(),{isLoading:te}=ae;let se,re,ie;d[4]!==O||d[5]!==G?(se=()=>{O&&(H(1===G?O.data:e=>[...e,...O.data]),N(G<O.meta.totalPages))},re=[O,G],d[4]=O,d[5]=G,d[6]=se,d[7]=re):(se=d[6],re=d[7]),y.useEffect(se,re),d[8]!==E||d[9]!==V?(ie=()=>{!V&&E&&I(L)},d[8]=E,d[9]=V,d[10]=ie):ie=d[10];const oe=ie;let ne;d[11]===Symbol.for("react.memo_cache_sentinel")?(ne=e=>{F(e),I(1),H([])},d[11]=ne):ne=d[11];const le=ne;let ce;d[12]!==ee?(ce=async e=>{try{await ee(e).unwrap(),m.success("Data berhasil dihapus"),I(1)}catch(a){const e=a;m.error(e?.data?.message||"Gagal menghapus data")}},d[12]=ee,d[13]=ce):ce=d[13];const de=ce;let me;d[14]!==Y||d[15]!==Q||d[16]!==W||d[17]!==z?(me=async e=>{try{W?(await Q({id:W.id,...e}).unwrap(),m.success("Berhasil diperbarui")):(await Y(e).unwrap(),m.success("Berhasil ditambahkan")),X(!1),z.resetFields(),I(1)}catch(a){const e=a;m.error(e?.data?.message||"Terjadi kesalahan")}},d[14]=Y,d[15]=Q,d[16]=W,d[17]=z,d[18]=me):me=d[18];const he=me;let pe;d[19]!==z?(pe=e=>{const a=void 0===e?null:e;q(a),a?z.setFieldsValue(a):z.resetFields(),X(!0)},d[19]=z,d[20]=pe):pe=d[20];const xe=pe;let ue;d[21]!==de||d[22]!==te||d[23]!==xe||d[24]!==P.borderRadiusLG||d[25]!==P.colorBorderSecondary||d[26]!==P.colorPrimary||d[27]!==P.colorPrimaryBg?(ue=e=>l.jsx(h,{hoverable:!0,style:{height:"100%",borderRadius:P.borderRadiusLG,border:`1px solid ${P.colorBorderSecondary}`},styles:{body:{padding:"16px"}},actions:[l.jsx(p,{title:"Edit Data",children:l.jsx(x,{type:"text",icon:l.jsx(b,{size:16,className:"text-yellow-600"}),onClick:()=>xe(e),block:!0})}),l.jsx(p,{title:"Hapus Data",children:l.jsx(f,{title:"Hapus Tingkat?",description:"Aksi ini tidak dapat dibatalkan.",onConfirm:()=>de(e.id),okText:"Ya",cancelText:"Batal",okButtonProps:{danger:!0,loading:te},children:l.jsx(x,{type:"text",danger:!0,icon:l.jsx(k,{size:16}),block:!0})})})],children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[l.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:P.colorPrimaryBg,display:"flex",alignItems:"center",justifyContent:"center",color:P.colorPrimary},children:l.jsx(j,{size:20})}),l.jsxs("div",{children:[l.jsx(w,{type:"secondary",style:{fontSize:12},children:"Tingkat Kelas"}),l.jsx("div",{style:{fontSize:18,fontWeight:"bold",lineHeight:1},children:e.name})]})]})}),d[21]=de,d[22]=te,d[23]=xe,d[24]=P.borderRadiusLG,d[25]=P.colorBorderSecondary,d[26]=P.colorPrimary,d[27]=P.colorPrimaryBg,d[28]=ue):ue=d[28];const ye=ue;let ge,je,be;d[29]===Symbol.for("react.memo_cache_sentinel")?(ge={padding:"20px"},je={marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},d[29]=ge,d[30]=je):(ge=d[29],je=d[30]),d[31]===Symbol.for("react.memo_cache_sentinel")?(be=l.jsx(C,{level:4,style:{margin:0},children:"Daftar Tingkat"}),d[31]=be):be=d[31];const fe=!!v.xs,ke=v.xs?"stretch":"center",Se=v.xs?"100%":"auto";let Be;d[32]!==Se?(Be={width:Se},d[32]=Se,d[33]=Be):Be=d[33];const _e=v.xs?"100%":260;let Te,we,Ce;d[34]!==_e?(Te=l.jsx(T,{placeholder:"Cari tingkat...",onSearch:le,allowClear:!0,style:{width:_e}}),d[34]=_e,d[35]=Te):Te=d[35],d[36]===Symbol.for("react.memo_cache_sentinel")?(we=l.jsx(S,{size:16}),d[36]=we):we=d[36],d[37]!==xe?(Ce=()=>xe(null),d[37]=xe,d[38]=Ce):Ce=d[38];const ve=v.xs?"100%":"auto";let Le,Pe,ze,Ge,Ie,Re,Fe;d[39]!==ve?(Le={width:ve},d[39]=ve,d[40]=Le):Le=d[40],d[41]!==Ce||d[42]!==Le?(Pe=l.jsx(x,{type:"primary",icon:we,onClick:Ce,style:Le,children:"Tambah"}),d[41]=Ce,d[42]=Le,d[43]=Pe):Pe=d[43],d[44]!==fe||d[45]!==ke||d[46]!==Be||d[47]!==Te||d[48]!==Pe?(ze=l.jsxs("div",{style:je,children:[be,l.jsxs(u,{gap:8,vertical:fe,align:ke,justify:"flex-end",style:Be,children:[Te,Pe]})]}),d[44]=fe,d[45]=ke,d[46]=Be,d[47]=Te,d[48]=Pe,d[49]=ze):ze=d[49],d[50]!==P.borderRadiusLG||d[51]!==P.colorBgContainer?(Ge={background:P.colorBgContainer,padding:16,borderRadius:P.borderRadiusLG},d[50]=P.borderRadiusLG,d[51]=P.colorBgContainer,d[52]=Ge):Ge=d[52],d[53]===Symbol.for("react.memo_cache_sentinel")?(Ie={gutter:[16,16],xs:24,sm:12,md:8,lg:6,xl:4,xxl:4},d[53]=Ie):Ie=d[53],d[54]!==D||d[55]!==oe||d[56]!==E||d[57]!==V||d[58]!==ye?(Re=l.jsx(g,{data:D,loading:V,hasMore:E,onLoadMore:oe,renderItem:ye,emptyText:"Belum ada data tingkat kelas",grid:Ie}),d[54]=D,d[55]=oe,d[56]=E,d[57]=V,d[58]=ye,d[59]=Re):Re=d[59],d[60]!==Ge||d[61]!==Re?(Fe=l.jsx("div",{style:Ge,children:Re}),d[60]=Ge,d[61]=Re,d[62]=Fe):Fe=d[62];const Me=W?"Edit Grade":"Tambah Grade Baru";let De,He,Ee,Ne,Ae;d[63]===Symbol.for("react.memo_cache_sentinel")?(De=()=>X(!1),d[63]=De):De=d[63],d[64]===Symbol.for("react.memo_cache_sentinel")?(He=[{required:!0,message:"Harap isi nama tingkat!"}],d[64]=He):He=d[64],d[65]===Symbol.for("react.memo_cache_sentinel")?(Ee=l.jsx(s.Item,{label:"Nama Tingkat",name:"name",rules:He,help:"Contoh: X, XI, XII, atau 1, 2, 3",children:l.jsx(c,{placeholder:"Masukkan nama..."})}),Ne={display:"flex",justifyContent:"flex-end",gap:8,marginTop:24},d[65]=Ee,d[66]=Ne):(Ee=d[65],Ne=d[66]),d[67]===Symbol.for("react.memo_cache_sentinel")?(Ae=l.jsx(x,{onClick:()=>X(!1),children:"Batal"}),d[67]=Ae):Ae=d[67];const Xe=J||Z;let We,qe,Ke,Oe,Ve;return d[68]!==J||d[69]!==Z?(We=J||Z?l.jsx(_,{className:"animate-spin",size:16}):null,d[68]=J,d[69]=Z,d[70]=We):We=d[70],d[71]!==Xe||d[72]!==We?(qe=l.jsxs("div",{style:Ne,children:[Ae,l.jsx(x,{type:"primary",htmlType:"submit",loading:Xe,icon:We,children:"Simpan"})]}),d[71]=Xe,d[72]=We,d[73]=qe):qe=d[73],d[74]!==z||d[75]!==he||d[76]!==qe?(Ke=l.jsxs(s,{form:z,layout:"vertical",onFinish:he,children:[Ee,qe]}),d[74]=z,d[75]=he,d[76]=qe,d[77]=Ke):Ke=d[77],d[78]!==A||d[79]!==Me||d[80]!==Ke?(Oe=l.jsx(B,{title:Me,open:A,onCancel:De,footer:null,destroyOnHidden:!0,children:Ke}),d[78]=A,d[79]=Me,d[80]=Ke,d[81]=Oe):Oe=d[81],d[82]!==ze||d[83]!==Fe||d[84]!==Oe?(Ve=l.jsxs("div",{style:ge,children:[ze,Fe,Oe]}),d[82]=ze,d[83]=Fe,d[84]=Oe,d[85]=Ve):Ve=d[85],Ve};function L(e){return e+1}export{v as default};
