import{I as e,x as t,k as s,F as a,G as i,H as n,o as l,z as r,J as o,w as c,C as d,s as m,p as h,K as f,L as x,T as u,M as j,B as p,N as g,O as y,P as b,Q as v}from"./index-DJgzJvx0.js";import{r as S}from"./vendor-kOq7Q5-U.js";import{I as _}from"./InfiniteScrollList-CRQVFRuq.js";import{S as k}from"./index-ZAZRIL-n.js";import{M as w}from"./index-CWRbA1GH.js";import{S as M}from"./index-BzygXUWO.js";import{S as C}from"./index-C3Z0YesB.js";import{R as z,a as T}from"./TeamOutlined-BpKTH4r9.js";import{E as I}from"./index-CsPvpU6M.js";import{T as O}from"./index-A8UrXWNV.js";import{R as D}from"./InfoCircleOutlined-BpL1BOA6.js";import{P as B}from"./index-C1pdE3N8.js";import{R as H}from"./DeleteOutlined-B97TiFIe.js";import"./charts-4CCI6hAs.js";import"./index-Ddh-PgSR.js";import"./ActionButton-DZkZ4UyV.js";import"./context-Co2t6AGx.js";import"./useMergedMask-hWGqm8nf.js";import"./useClosable-BMlLLbW6.js";var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},A.apply(this,arguments)}const P=(t,s)=>S.createElement(e,A({},t,{ref:s,icon:L})),F=S.forwardRef(P);var R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M874 120H622c-3.3 0-6 2.7-6 6v56c0 3.3 2.7 6 6 6h160.4L583.1 387.3c-50-38.5-111-59.3-175.1-59.3-76.9 0-149.3 30-203.6 84.4S120 539.1 120 616s30 149.3 84.4 203.6C258.7 874 331.1 904 408 904s149.3-30 203.6-84.4C666 765.3 696 692.9 696 616c0-64.1-20.8-124.9-59.2-174.9L836 241.9V402c0 3.3 2.7 6 6 6h56c3.3 0 6-2.7 6-6V150c0-16.5-13.5-30-30-30zM408 828c-116.9 0-212-95.1-212-212s95.1-212 212-212 212 95.1 212 212-95.1 212-212 212z"}}]},name:"man",theme:"outlined"};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},E.apply(this,arguments)}const V=(t,s)=>S.createElement(e,E({},t,{ref:s,icon:R})),K=S.forwardRef(V);var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M712.8 548.8c53.6-53.6 83.2-125 83.2-200.8 0-75.9-29.5-147.2-83.2-200.8C659.2 93.6 587.8 64 512 64s-147.2 29.5-200.8 83.2C257.6 200.9 228 272.1 228 348c0 63.8 20.9 124.4 59.4 173.9 7.3 9.4 15.2 18.3 23.7 26.9 8.5 8.5 17.5 16.4 26.8 23.7 39.6 30.8 86.3 50.4 136.1 57V736H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h114v140c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V812h114c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H550V629.5c61.5-8.2 118.2-36.1 162.8-80.7zM512 556c-55.6 0-107.7-21.6-147.1-60.9C325.6 455.8 304 403.6 304 348s21.6-107.7 60.9-147.1C404.2 161.5 456.4 140 512 140s107.7 21.6 147.1 60.9C698.4 240.2 720 292.4 720 348s-21.6 107.7-60.9 147.1C619.7 534.4 567.6 556 512 556z"}}]},name:"woman",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},W.apply(this,arguments)}const J=(t,s)=>S.createElement(e,W({},t,{ref:s,icon:G})),N=S.forwardRef(J),{TextArea:q}=t,{Option:Y}=k,Q=e=>{const o=s.c(25),{open:c,onCancel:d,onSuccess:m,initialData:h}=e,[f]=a.useForm(),[x,u]=i(),{isLoading:j}=u,[p,g]=n(),{isLoading:y}=g;let b,v,_;o[0]!==f||o[1]!==h||o[2]!==c?(b=()=>{c&&(h?f.setFieldsValue(h):f.resetFields())},v=[c,h,f],o[0]=f,o[1]=h,o[2]=c,o[3]=b,o[4]=v):(b=o[3],v=o[4]),S.useEffect(b,v),o[5]!==x||o[6]!==f||o[7]!==h||o[8]!==m||o[9]!==p?(_=async e=>{try{h?(await p({id:h.id,...e}).unwrap(),r.success("Berhasil diperbarui")):(await x(e).unwrap(),r.success("Berhasil ditambahkan")),f.resetFields(),m()}catch(t){const e=t;r.error(e?.data?.message||"Terjadi kesalahan saat menyimpan")}},o[5]=x,o[6]=f,o[7]=h,o[8]=m,o[9]=p,o[10]=_):_=o[10];const M=_,C=h?"Edit Homebase":"Tambah Homebase",z=j||y;let T,I,O,D,B,H;return o[11]===Symbol.for("react.memo_cache_sentinel")?(T=l.jsx(a.Item,{name:"name",label:"Nama Satuan Pendidikan",rules:[{required:!0,message:"Nama wajib diisi"}],children:l.jsx(t,{placeholder:"Contoh: SMA Islam Terpadu"})}),o[11]=T):T=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(I=[{required:!0,message:"Silakan pilih jenjang satuan"}],o[12]=I):I=o[12],o[13]===Symbol.for("react.memo_cache_sentinel")?(O=l.jsx(a.Item,{name:"level",label:"Jenjang / Level Satuan",rules:I,children:l.jsxs(k,{placeholder:"Pilih Jenjang",children:[l.jsx(Y,{value:"SD / MI",children:"SD / MI"}),l.jsx(Y,{value:"SMP / MTS",children:"SMP / MTS"}),l.jsx(Y,{value:"SMA / SMK / MA",children:"SMA / SMK / MA"})]})}),o[13]=O):O=o[13],o[14]===Symbol.for("react.memo_cache_sentinel")?(D=l.jsx(a.Item,{name:"description",label:"Deskripsi / Alamat Singkat",children:l.jsx(q,{rows:3,placeholder:"Keterangan tambahan..."})}),o[14]=D):D=o[14],o[15]!==f||o[16]!==M?(B=l.jsxs(a,{form:f,layout:"vertical",onFinish:M,preserve:!1,children:[T,O,D]}),o[15]=f,o[16]=M,o[17]=B):B=o[17],o[18]!==f.submit||o[19]!==d||o[20]!==c||o[21]!==B||o[22]!==C||o[23]!==z?(H=l.jsx(w,{title:C,open:c,onCancel:d,onOk:f.submit,confirmLoading:z,destroyOnHidden:!0,children:B}),o[18]=f.submit,o[19]=d,o[20]=c,o[21]=B,o[22]=C,o[23]=z,o[24]=H):H=o[24],H},U=e=>{const t=s.c(39),{open:a,homebaseId:i,onCancel:n}=e,[r,f]=S.useState(null),[x,u]=o(),{data:j,isFetching:p}=u;let g,y,b,v,_;t[0]!==i||t[1]!==a||t[2]!==r||t[3]!==x?(g=()=>{a&&i&&x({id:i,periode_id:r})},y=[a,i,r,x],t[0]=i,t[1]=a,t[2]=r,t[3]=x,t[4]=g,t[5]=y):(g=t[4],y=t[5]),S.useEffect(g,y),t[6]!==j||t[7]!==r?(b=()=>{j?.data?.selected_periode_id&&!r&&f(j.data.selected_periode_id)},t[6]=j,t[7]=r,t[8]=b):b=t[8],t[9]!==j?(v=[j],t[9]=j,t[10]=v):v=t[10],S.useEffect(b,v),t[11]!==j?.data?.stats?(_=j?.data?.stats||{},t[11]=j?.data?.stats,t[12]=_):_=t[12];const O=_;let D;t[13]!==j?.data?.class_composition?(D=j?.data?.class_composition||[],t[13]=j?.data?.class_composition,t[14]=D):D=t[14];const B=D;let H;t[15]!==j?.data?.periods?(H=j?.data?.periods||[],t[15]=j?.data?.periods,t[16]=H):H=t[16];const L=H;let A,P,R,E;t[17]!==n?(A=()=>{f(null),n()},t[17]=n,t[18]=A):A=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(P={marginBottom:20,display:"flex",justifyContent:"flex-end",alignItems:"center"},R=l.jsx("span",{style:{marginRight:10},children:"Pilih Periode:"}),t[19]=P,t[20]=R):(P=t[19],R=t[20]),t[21]===Symbol.for("react.memo_cache_sentinel")?(E={width:200},t[21]=E):E=t[21];const V=Number(r);let G,W,J,q,Y;return t[22]===Symbol.for("react.memo_cache_sentinel")?(G=e=>f(e),t[22]=G):G=t[22],t[23]!==L?(W=L.map(X),t[23]=L,t[24]=W):W=t[24],t[25]!==p||t[26]!==V||t[27]!==W?(J=l.jsxs("div",{style:P,children:[R,l.jsx(k,{style:E,value:V,onChange:G,placeholder:"Pilih Periode",loading:p,children:W})]}),t[25]=p,t[26]=V,t[27]=W,t[28]=J):J=t[28],t[29]!==j||t[30]!==B||t[31]!==p||t[32]!==O?(q=p&&!j?l.jsx("div",{style:{textAlign:"center",padding:50},children:l.jsx(M,{})}):l.jsxs(l.Fragment,{children:[l.jsxs(c,{gutter:[16,16],children:[l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#fffbe6"},children:l.jsx(C,{title:"Total Guru",value:O.teachers?.total||0,prefix:l.jsx(h,{}),valueStyle:{color:"#d48806"}})})}),l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#e6f7ff"},children:l.jsx(C,{title:"Total Siswa",value:O.students?.total||0,prefix:l.jsx(z,{}),valueStyle:{color:"#096dd9"}})})}),l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#fff1f0"},children:l.jsx(C,{title:"Total Kelas",value:O.classes?.total||0,prefix:l.jsx(F,{}),valueStyle:{color:"#cf1322"}})})}),l.jsx(d,{xs:24,sm:12,md:6,children:l.jsx(m,{style:{background:"#f6ffed"},children:l.jsx(C,{title:"Total Pelajaran",value:O.subjects?.total||0,prefix:l.jsx(T,{}),valueStyle:{color:"#389e0d"}})})})]}),l.jsxs(c,{gutter:[16,16],style:{marginTop:20},children:[l.jsx(d,{xs:24,md:16,children:l.jsx(m,{title:"Komposisi Siswa per Kelas",size:"small",children:l.jsx("div",{style:{maxHeight:400,overflowY:"auto"},children:0===B.length?l.jsx(I,{description:"Belum ada kelas/siswa"}):l.jsx(c,{gutter:[10,10],children:B.map(Z)})})})}),l.jsx(d,{xs:24,md:8,children:l.jsxs(m,{title:"Komposisi Guru",size:"small",children:[l.jsxs("div",{style:{marginBottom:15,background:"#fff7e6",padding:15,borderRadius:8,display:"flex",alignItems:"center"},children:[l.jsx(K,{style:{fontSize:24,color:"#fa8c16",marginRight:15}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:12,color:"#888"},children:"Ikhwan (Laki-laki)"}),l.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:O.teachers?.laki||0})]})]}),l.jsxs("div",{style:{background:"#fff0f6",padding:15,borderRadius:8,display:"flex",alignItems:"center"},children:[l.jsx(N,{style:{fontSize:24,color:"#eb2f96",marginRight:15}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:12,color:"#888"},children:"Akhwat (Perempuan)"}),l.jsx("div",{style:{fontSize:20,fontWeight:"bold"},children:O.teachers?.perempuan||0})]})]})]})})]})]}),t[29]=j,t[30]=B,t[31]=p,t[32]=O,t[33]=q):q=t[33],t[34]!==a||t[35]!==J||t[36]!==q||t[37]!==A?(Y=l.jsxs(w,{title:"Dashboard Detail Satuan Pendidikan",open:a,onCancel:A,width:1e3,footer:null,children:[J,q]}),t[34]=a,t[35]=J,t[36]=q,t[37]=A,t[38]=Y):Y=t[38],Y};function X(e){return l.jsxs(k.Option,{value:e.id,children:[e.name," ",e.is_active&&l.jsx(O,{color:"green",children:"Aktif"})]},e.id)}function Z(e,t){return l.jsx(d,{span:12,children:l.jsxs(m,{type:"inner",size:"small",title:e.class_name,style:{border:"1px solid #f0f0f0"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[l.jsx(K,{style:{fontSize:16,color:"#1890ff"}}),l.jsx("div",{style:{fontWeight:"bold"},children:e.laki}),l.jsx("div",{style:{fontSize:10,color:"#888"},children:"Ikhwan"})]}),l.jsx("div",{style:{borderLeft:"1px solid #eee"}}),l.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[l.jsx(N,{style:{fontSize:16,color:"#eb2f96"}}),l.jsx("div",{style:{fontWeight:"bold"},children:e.perempuan}),l.jsx("div",{style:{fontSize:10,color:"#888"},children:"Akhwat"})]})]}),l.jsxs("div",{style:{textAlign:"center",background:"#fafafa",marginTop:8,padding:2,borderRadius:4,fontSize:11},children:["Total: ",e.total_students]})]})},t)}const{Title:$,Text:ee}=u,te=()=>{const e=s.c(52),[i,n]=S.useState(1),[o,c]=S.useState("");let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[0]=d):d=e[0];const[h,u]=S.useState(d),[k,w]=S.useState(!1),[M,C]=S.useState(null),[z,T]=S.useState(!1),[I,O]=S.useState(null),[L]=a.useForm();let A;e[1]!==i||e[2]!==o?(A={page:i,limit:10,search:o},e[1]=i,e[2]=o,e[3]=A):A=e[3];const{data:P,isFetching:F,refetch:R}=f(A),[E,V]=x(),{isLoading:K}=V;let G,W,J,N,q;e[4]!==P||e[5]!==i?(G=()=>{P?.data&&u(1===i?P.data:e=>{const t=P.data.filter(t=>!e.some(e=>e.id===t.id));return[...e,...t]})},W=[P,i],e[4]=P,e[5]=i,e[6]=G,e[7]=W):(G=e[6],W=e[7]),S.useEffect(G,W),e[8]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{n(1)},e[8]=J):J=e[8],e[9]!==o?(N=[o],e[9]=o,e[10]=N):N=e[10],S.useEffect(J,N),e[11]!==P?.hasMore||e[12]!==F?(q=()=>{P?.hasMore&&!F&&n(se)},e[11]=P?.hasMore,e[12]=F,e[13]=q):q=e[13];const Y=q;let X;e[14]!==E||e[15]!==R?(X=async e=>{try{await E(e).unwrap(),r.success("Berhasil dihapus"),n(1),R()}catch(t){const e=t;r.error(e?.data?.message||"Gagal menghapus")}},e[14]=E,e[15]=R,e[16]=X):X=e[16];const Z=X;let te;e[17]!==L?(te=e=>{const t=void 0===e?null:e;O(t),t?L.setFieldsValue(t):L.resetFields(),T(!0)},e[17]=L,e[18]=te):te=e[18];const ae=te;let ie;e[19]!==R?(ie=()=>{T(!1),O(null),n(1),R()},e[19]=R,e[20]=ie):ie=e[20];const ne=ie;let le;e[21]===Symbol.for("react.memo_cache_sentinel")?(le=e=>{C(e),w(!0)},e[21]=le):le=e[21];const re=le;let oe;e[22]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>{C(null),w(!1)},e[22]=oe):oe=e[22];const ce=oe;let de;e[23]!==Z||e[24]!==K||e[25]!==ae?(de=e=>l.jsx(m,{hoverable:!0,style:{marginBottom:16},title:l.jsxs($,{level:5,style:{margin:0,color:"#1890ff"},children:[l.jsx(y,{style:{marginRight:8}}),e.name]}),actions:[l.jsx(j,{title:"Lihat Dashboard Detail",children:l.jsx(p,{type:"link",icon:l.jsx(D,{}),onClick:()=>re(e.id),children:"Detail"})},"detail"),l.jsx(j,{title:"Edit",children:l.jsx(p,{type:"text",icon:l.jsx(g,{style:{color:"#faad14"}}),onClick:()=>ae(e)})},"edit"),l.jsx(B,{title:"Hapus Homebase ini?",description:"Data yang terhubung (kelas, guru) mungkin akan error jika tidak ditangani.",onConfirm:()=>Z(e.id),okText:"Ya, Hapus",cancelText:"Batal",children:l.jsx(p,{type:"text",danger:!0,icon:l.jsx(H,{}),loading:K})},"delete")],children:l.jsxs("div",{style:{flex:1},children:[l.jsx(ee,{type:"secondary",style:{display:"block",marginTop:4},children:e.description||"- Tidak ada deskripsi -"}),l.jsxs(ee,{style:{fontSize:11,color:"#ccc",marginTop:8,display:"block"},children:["ID: ",e.id," - Dibuat:"," ",new Date(e.created_at).toLocaleDateString("id-ID")]})]})}),e[23]=Z,e[24]=K,e[25]=ae,e[26]=de):de=e[26];const me=de;let he,fe,xe,ue,je;e[27]===Symbol.for("react.memo_cache_sentinel")?(he={display:"flex",justifyContent:"space-between",marginBottom:16,gap:10},e[27]=he):he=e[27],e[28]===Symbol.for("react.memo_cache_sentinel")?(fe=l.jsx(b,{}),e[28]=fe):fe=e[28],e[29]===Symbol.for("react.memo_cache_sentinel")?(xe=l.jsx(t,{placeholder:"Cari homebase...",prefix:fe,allowClear:!0,onChange:e=>c(e.target.value),style:{maxWidth:300}}),e[29]=xe):xe=e[29],e[30]===Symbol.for("react.memo_cache_sentinel")?(ue=l.jsx(v,{}),e[30]=ue):ue=e[30],e[31]!==ae?(je=l.jsxs("div",{style:he,children:[xe,l.jsx(p,{type:"primary",icon:ue,onClick:()=>ae(null),children:"Tambah Baru"})]}),e[31]=ae,e[32]=je):je=e[32];const pe=P?.hasMore;let ge,ye,be,ve,Se;return e[33]!==Y||e[34]!==F||e[35]!==h||e[36]!==me||e[37]!==pe?(ge=l.jsx(_,{data:h,loading:F,hasMore:pe,onLoadMore:Y,renderItem:me,height:"70vh",emptyText:"Belum ada data satuan pendidikan"}),e[33]=Y,e[34]=F,e[35]=h,e[36]=me,e[37]=pe,e[38]=ge):ge=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(ye=()=>T(!1),e[39]=ye):ye=e[39],e[40]!==I||e[41]!==ne||e[42]!==z?(be=l.jsx(Q,{open:z,initialData:I,onCancel:ye,onSuccess:ne}),e[40]=I,e[41]=ne,e[42]=z,e[43]=be):be=e[43],e[44]!==k||e[45]!==M?(ve=l.jsx(U,{open:k,homebaseId:M,onCancel:ce}),e[44]=k,e[45]=M,e[46]=ve):ve=e[46],e[47]!==je||e[48]!==ge||e[49]!==be||e[50]!==ve?(Se=l.jsxs(l.Fragment,{children:[je,ge,be,ve]}),e[47]=je,e[48]=ge,e[49]=be,e[50]=ve,e[51]=Se):Se=e[51],Se};function se(e){return e+1}export{te as default};
